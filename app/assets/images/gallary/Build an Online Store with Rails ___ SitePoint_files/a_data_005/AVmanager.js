/* aniview version '6.1.1.162' 						*/
/* All rights reserved to ANIVIEW LTD 2018 				*/
window.aniviewCSS = '#av-container *::-webkit-media-controls-panel{display:none!important;-webkit-appearance:none}#av-container *::--webkit-media-controls-play-button{display:none !important;-webkit-appearance:none}#av-container *::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}@-webkit-keyframes "fade-in"{0%{opacity:0;filter:alpha(opacity=0);}100%{opacity:1;filter:alpha(opacity=100);}}@-moz-keyframes "fade-in"{0%{opacity:0;filter:alpha(opacity=0);}100%{opacity:1;filter:alpha(opacity=100);}}@-o-keyframes fade-in{0% { opacity:0;filter:alpha(opacity=0)}100%{opacity:1;filter:alpha(opacity=100)}}@keyframes "fade-in"{0%{opacity:0;filter:alpha(opacity=0);}100%{opacity:1;filter:alpha(opacity=100);}}@-webkit-keyframes "av-loading-dash"{0%{stroke-dasharray:1, 210;stroke-dashoffset:0;}50%{stroke-dasharray:130, 220;stroke-dashoffset:-50;}100%{stroke-dasharray:170, 220;stroke-dashoffset:-210;}}@-moz-keyframes "av-loading-dash"{0%{stroke-dasharray:1, 210;stroke-dashoffset:0;}50%{stroke-dasharray:130, 220;stroke-dashoffset:-50;}100%{stroke-dasharray:170, 220;stroke-dashoffset:-210;}}@-o-keyframes av-loading-dash{0% { stroke-dasharray:1, 210;stroke-dashoffset:0}50%{stroke-dasharray:130, 220;stroke-dashoffset:-50}100%{stroke-dasharray:170, 220;stroke-dashoffset:-210}}@keyframes "av-loading-dash"{0%{stroke-dasharray:1, 210;stroke-dashoffset:0;}50%{stroke-dasharray:130, 220;stroke-dashoffset:-50;}100%{stroke-dasharray:170, 220;stroke-dashoffset:-210;}}@-webkit-keyframes "av-loading-rotate"{0%{stroke:white;-webkit-transform:rotate(0deg);transform:rotate(0deg);}100%{stroke:currentColor;-webkit-transform:rotate(360deg);transform:rotate(360deg);}}@-moz-keyframes "av-loading-rotate"{0%{stroke:white;-webkit-transform:rotate(0deg);transform:rotate(0deg);}100%{stroke:currentColor;-webkit-transform:rotate(360deg);transform:rotate(360deg);}}@-o-keyframes av-loading-rotate{0% { stroke:white;-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{stroke:currentColor;-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes "av-loading-rotate"{0%{stroke:white;-webkit-transform:rotate(0deg);transform:rotate(0deg);}100%{stroke:currentColor;-webkit-transform:rotate(360deg);transform:rotate(360deg);}}#av-container{position:relative;width:640px;height:360px;background:black;margin:0;overflow:hidden;text-align:initial;}#av-container #av-inner{position:absolute;top:0;left:0;width:100%;height:100%}#av-container #av-inner #slot{position:absolute;width:100%;height:100%;background:black;-webkit-box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1);-moz-box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1);box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1)}#av-container #av-inner #slot #preloader{width:0;height:0;position:absolute;top:0;left:0;bottom:0;right:0;margin:auto;outline:none}#av-container #av-inner #slot #preloader svg{position:absolute;top:50%;left:50%}#av-container #av-inner #slot #preloader svg.icon{fill:white;width:50px;height:50px;margin-left:-25px;margin-top:-25px}#av-container #av-inner #slot #preloader svg.circle{fill:transparent;stroke:rgba(255, 255, 255, 0.2);stroke-width:3;width:70px;height:70px;margin-left:-35px;margin-top:-35px}#av-container #av-inner #slot #preloader svg.circle.active{color:red;stroke:white;stroke-linecap:round;animation:av-loading-dash 2s ease infinite, av-loading-rotate 2.5s linear infinite}#av-container #av-inner #slot #videoslot{text-align:left;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);left:0;right:0;bottom:0;width:100%;object-fit:initial;opacity:0;filter:alpha(opacity=0)}#av-container #av-inner #slot #videoslot.loaded{opacity:1;filter:alpha(opacity=100);-webkit-animation:fade-in 0.5s ease;-moz-animation:fade-in 0.5s ease;-o-animation:fade-in 0.5s ease;animation:fade-in 0.5s ease}#av-container #av-inner #gui:before{content:"";pointer-events:none;position:absolute;left:0;bottom:0;width:100%;height:15%;-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;background:-webkit-linear-gradient(top, transparent 0%, rgba(0, 0, 0, 0.5) 100%);background:-moz-linear-gradient(top, transparent 0%, rgba(0, 0, 0, 0.5) 100%);background:linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.5) 100%);filter:progid: DXImageTransform.Microsoft.gradient(startColorstr="#00000000", endColorstr="#80000000", GradientType=0)}#av-container #av-inner #gui #timeline{position:absolute;height:10px;overflow:hidden;-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;cursor:pointer}#av-container #av-inner #gui #timeline:before,#av-container #av-inner #gui #timeline #timeline-buffer,#av-container #av-inner #gui #timeline #timeline-moveto,#av-container #av-inner #gui #timeline #timeline-progress{position:absolute;left:0;height:2px}#av-container #av-inner #gui #timeline:before{content:"";width:100%;background:rgb(100, 100, 100);background:rgba(255, 255, 255, 0.3);-webkit-box-shadow:0 0 3px 0 rgba(0, 0, 0, 0.1);-moz-box-shadow:0 0 3px 0 rgba(0, 0, 0, 0.1);box-shadow:0 0 3px 0 rgba(0, 0, 0, 0.1)}#av-container #av-inner #gui #timeline #timeline-buffer{width:0;background:rgb(180, 180, 180);background:rgba(255, 255, 255, 0.5);-webkit-box-shadow:0 0 3px 0 rgba(0, 0, 0, 0.1);-moz-box-shadow:0 0 3px 0 rgba(0, 0, 0, 0.1);box-shadow:0 0 3px 0 rgba(0, 0, 0, 0.1)}#av-container #av-inner #gui #timeline #timeline-moveto{width:0;background:rgb(255, 255, 255);background:rgba(255, 255, 255, 0.8);opacity:0}#av-container #av-inner #gui #timeline #timeline-progress{width:0;background:red}#av-container #av-inner #gui #timeline.av-overlay{bottom:41px;left:10px;right:10px}#av-container #av-inner #gui #timeline.av-overlay:before,#av-container #av-inner #gui #timeline.av-overlay #timeline-buffer,#av-container #av-inner #gui #timeline.av-overlay #timeline-moveto,#av-container #av-inner #gui #timeline.av-overlay #timeline-progress{top:50%;margin-top:-1px}#av-container #av-inner #gui #timeline.av-bottom{bottom:0;left:0;right:0}#av-container #av-inner #gui #timeline.av-bottom:before,#av-container #av-inner #gui #timeline.av-bottom #timeline-buffer,#av-container #av-inner #gui #timeline.av-bottom #timeline-moveto,#av-container #av-inner #gui #timeline.av-bottom #timeline-progress{top:auto;bottom:0}#av-container #av-inner #gui #timeline.av-top{top:0;left:0;right:0}#av-container #av-inner #gui #timeline.av-top:before,#av-container #av-inner #gui #timeline.av-top #timeline-buffer,#av-container #av-inner #gui #timeline.av-top #timeline-moveto,#av-container #av-inner #gui #timeline.av-top #timeline-progress{top:0;bottom:auto}#av-container #av-inner #gui #timeline.av-top~#skip-btn{top:2px}#av-container #av-inner #gui #timeline.av-top~#aniview-credit{top:4px}#av-container #av-inner #gui #timeline.av-none{opacity:0 !important;display:none !important}#av-container #av-inner #gui #buttons{-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out}#av-container #av-inner #gui #buttons #play-pause,#av-container #av-inner #gui #buttons #phone,#av-container #av-inner #gui #buttons #sound,#av-container #av-inner #gui #buttons #share,#av-container #av-inner #gui #buttons #fullscreen{width:24px;height:24px;background-repeat:no-repeat;background-size:cover}#av-container #av-inner #gui #buttons #left,#av-container #av-inner #gui #buttons #right{position:absolute;height:24px;bottom:11px}#av-container #av-inner #gui #buttons #left{left:13px}#av-container #av-inner #gui #buttons #left>div{position:relative;float:left;margin-right:14px}#av-container #av-inner #gui #buttons #left #play-pause.play{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22play-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%3Cpath%20fill%3D%22white%22%20d%3D%22m19.343%2011.251c-0.035-0.439-0.334-0.874-0.902-1.207l-10.905-6.403c-1.211-0.712-2.203-0.138-2.203%201.275v7.463c5.85-2.36%2013.783-1.163%2014.01-1.128z%22%2F%3E%09%3Cpath%20fill%3D%22white%22%20d%3D%22m5.333%2017v0.762c0%201.412%200.992%201.985%202.203%201.273l10.904-6.402c0.643-0.377%200.941-0.882%200.902-1.379-8.65%200.696-12.404%203.614-14.009%205.746z%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #left #play-pause.pause{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22pause-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpath%20fill%3D%22white%22%20d%3D%22m4.338%2019.339h5v-16h-5v16zm9.001-16.001v16h5v-16h-5z%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #left #play-pause.replay{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22replay-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpath%20fill%3D%22white%22%20d%3D%22m16.672%2011.339c0%202.945-2.389%205.333-5.334%205.333s-5.334-2.388-5.334-5.333c0-2.943%202.385-5.329%205.326-5.333v2.336l7.016-3.503-7.016-3.503v2.004c-4.414%200.004-7.992%203.583-7.992%207.999%200%204.418%203.582%208%208%208s8-3.582%208-8h-2.666z%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #left #phone{width:auto;font-size:0}#av-container #av-inner #gui #buttons #left #phone .icon{width:24px;height:24px;display:inline-block;vertical-align:top;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22phone-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%3Cpath%20fill%3D%22white%22%20clip-rule%3D%22evenodd%22%20d%3D%22m20.154%2017.236c0.299-0.298%200.254-0.921-0.236-1.188-0.492-0.267-4.518-2.602-4.982-2.138-0.463%200.465-1.447%201.498-2.135%201.188s-2.289-1.816-2.846-2.375c-0.559-0.557-2.064-2.159-2.377-2.847-0.31-0.687%200.725-1.67%201.188-2.134%200.464-0.465-1.87-4.491-2.137-4.982-0.266-0.489-0.889-0.534-1.188-0.237s-2.18%202.176-2.85%202.847c-0.671%200.671-0.279%205.415%204.514%2010.202%204.787%204.792%209.531%205.185%2010.203%204.514%200.671-0.671%202.549-2.551%202.846-2.85z%22%20fill-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E");background-repeat:no-repeat;background-size:cover}#av-container #av-inner #gui #buttons #left #phone #phone-num{display:inline-block;margin-left:4px;height:24px;line-height:24px;font-size:12px;font-weight:400;font-family:Helvetica, Arial, fallback, sans-serif;color:white}#av-container #av-inner #gui #buttons #right{right:13px}#av-container #av-inner #gui #buttons #right>div{position:relative;float:right;margin-left:14px}#av-container #av-inner #gui #buttons #right #sound{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22sound-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.68%2022.68%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.68%2022.68%22%3E%09%09%3Cpolygon%20fill%3D%22white%22%20points%3D%227.247%207.34%201.761%207.34%201.761%2015.34%207.247%2015.34%2012.743%2019.346%2012.743%203.334%22%20clip-rule%3D%22evenodd%22%20fill-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #right #sound div{position:absolute;width:100%;height:100%;top:0;left:0;background-repeat:no-repeat;background-size:cover}#av-container #av-inner #gui #buttons #right #sound div.on{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22sound-on-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpath%20fill%3D%22white%22%20d%3D%22m17.808%204.757l-1.705%201.881c1.357%201.146%202.221%202.824%202.221%204.7s-0.863%203.556-2.221%204.701l1.705%201.881c1.902-1.605%203.109-3.955%203.109-6.582%200-2.626-1.207-4.975-3.109-6.581z%22%20%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #right #sound div.off{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22sound-off-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpolygon%20points%3D%2220.009%2011.337%2022.671%208.674%2021.343%207.345%2018.679%2010.007%2016.015%207.345%2014.685%208.674%2017.349%2011.337%2014.681%2014.003%2016.015%2015.331%2018.679%2012.666%2021.343%2015.331%2022.677%2014.003%22%20fill%3D%22red%22%20clip-rule%3D%22evenodd%22%20fill-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #right #share{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22share-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%3Cpath%20fill%3D%22white%22%20clip-rule%3D%22evenodd%22%20d%3D%22m17.338%2014.339c-0.695%200-1.328%200.246-1.838%200.645l-7.17-3.567c0-0.026%200.008-0.051%200.008-0.078%200-0.026-0.008-0.052-0.008-0.078l7.17-3.566c0.51%200.397%201.143%200.645%201.838%200.645%201.656%200%203-1.343%203-3s-1.344-3-3-3-3%201.343-3%203c0%200.188%200.023%200.372%200.057%200.552l-6.864%203.412c-0.549-0.591-1.324-0.966-2.193-0.966-1.656%200-3%201.343-3%203s1.344%203%203%203c0.869%200%201.645-0.375%202.193-0.965l6.863%203.412c-0.033%200.18-0.057%200.363-0.057%200.553%200%201.656%201.344%203%203%203s3-1.344%203-3-1.343-2.999-2.999-2.999z%22%20fill-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #right #fullscreen.off{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22fullscreen-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpath%20fill%3D%22white%22%20d%3D%22m4.339%2015.339h-2v5h5v-2h-3v-3zm-2-8.001h2v-3h3v-2h-5v5zm13-5v2h3v3h2v-5h-5zm3%2016.001h-3v2h5v-5h-2v3z%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #buttons #right #fullscreen.on{background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22fullscreen-off-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpath%20fill%3D%22white%22%20d%3D%22m6.338%206.338h-3v2h5v-5h-2v3zm-3%2010.001h3v3h2v-5h-5v2zm11%203h2v-3h3v-2h-5v5zm2-13.001v-3h-2v5h5v-2h-3z%22%2F%3E%3C%2Fsvg%3E")}#av-container #av-inner #gui #big-play{display:none;position:absolute;width:68px;height:68px;top:50%;left:50%;margin-top:-34px;margin-left:-34px;background-color:rgb(50, 50, 50);background-color:rgba(0, 0, 0, 0.4);background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22play-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%3Cpath%20fill%3D%22white%22%20d%3D%22m19.343%2011.251c-0.035-0.439-0.334-0.874-0.902-1.207l-10.905-6.403c-1.211-0.712-2.203-0.138-2.203%201.275v7.463c5.85-2.36%2013.783-1.163%2014.01-1.128z%22%2F%3E%09%3Cpath%20fill%3D%22white%22%20d%3D%22m5.333%2017v0.762c0%201.412%200.992%201.985%202.203%201.273l10.904-6.402c0.643-0.377%200.941-0.882%200.902-1.379-8.65%200.696-12.404%203.614-14.009%205.746z%22%2F%3E%3C%2Fsvg%3E");background-size:62% 64%;background-position:16px center;background-repeat:no-repeat;border:3px solid white;border-radius:50%;-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out}#av-container #av-inner #gui #close-btn{z-index:9999999;position:absolute;top:0;left:0;width:28px;height:28px;background-color:rgb(50, 50, 50);background-color:rgba(0, 0, 0, 0.4);background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22close-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%09%3Cpolygon%20fill%3D%22white%22%20points%3D%2219.346%205.421%2017.256%203.332%2011.338%209.25%205.42%203.332%203.332%205.421%209.25%2011.338%203.332%2017.257%205.42%2019.345%2011.338%2013.427%2017.256%2019.345%2019.346%2017.257%2013.428%2011.338%22%20clip-rule%3D%22evenodd%22%20fill-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E");background-repeat:no-repeat;background-size:60%;background-position:center;border-color:white;border-style:solid;border-width:0 1px 1px 0;-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out}#av-container #av-inner #gui #timer{position:absolute;top:0;left:0;width:28px;height:28px;background-color:rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0.7);color:white;font-family:Helvetica, Arial, fallback, sans-serif;font-size:12px;text-align:center;line-height:28px;border-color:white;border-style:solid;border-width:0 1px 1px 0;-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out}#av-container #av-inner #gui #skip-btn{position:absolute;bottom:60px;right:0;padding:0 12px;height:32px;background-color:rgb(50, 50, 50);background-color:rgba(0, 0, 0, 0.4);color:white;font-family:Helvetica, Arial, fallback, sans-serif;font-size:14px;text-align:center;text-transform:uppercase;line-height:32px;border-color:white;border-style:solid;border-width:1px 0 1px 1px;-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out}#av-container #av-inner #gui #aniview-credit{position:absolute;top:2px;right:2px;height:24px;line-height:24px;font-size:11px;font-family:Helvetica, Arial, fallback, sans-serif;font-weight:500;color:white}#av-container #av-inner #gui #aniview-credit span{display:inline-block;vertical-align:top;width:24px;height:24px;background-repeat:no-repeat;background-size:cover;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%22play-Layer_1%22%20xml%3Aspace%3D%22preserve%22%20height%3D%2223%22%20viewBox%3D%220%200%2022.677%2022.677%22%20width%3D%2223%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%20enable-background%3D%22new%200%200%2022.677%2022.677%22%3E%09%3Cpath%20fill%3D%22red%22%20d%3D%22m19.343%2011.251c-0.035-0.439-0.334-0.874-0.902-1.207l-10.905-6.403c-1.211-0.712-2.203-0.138-2.203%201.275v7.463c5.85-2.36%2013.783-1.163%2014.01-1.128z%22%2F%3E%09%3Cpath%20fill%3D%22red%22%20d%3D%22m5.333%2017v0.762c0%201.412%200.992%201.985%202.203%201.273l10.904-6.402c0.643-0.377%200.941-0.882%200.902-1.379-8.65%200.696-12.404%203.614-14.009%205.746z%22%2F%3E%3C%2Fsvg%3E")}#av-container.desktop #av-inner #gui #big-play{border-color:#ccc}#av-container.desktop:hover #av-inner #gui #big-play{background-color:rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0.7);border-color:white}#av-container.desktop #gui:before{bottom:-15%}#av-container.desktop:hover #gui:before{bottom:0}#av-container.desktop #gui:before,#av-container.desktop #gui #timeline,#av-container.desktop #gui #buttons{opacity:0;filter:alpha(opacity=0)}#av-container.desktop:hover #gui:before,#av-container.desktop:hover #gui #buttons,#av-container.desktop:hover #gui #timeline,#av-container.desktop #av-inner #gui #timeline:hover #timeline-moveto{opacity:1;filter:alpha(opacity=100)}#av-container.desktop #av-inner #gui #close-btn:hover,#av-container.desktop #av-inner #gui #skip-btn:hover{cursor:pointer;background-color:rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0.7)}#av-container.responsive{width:100%;height:520px}#av-container.hide-controls #timeline,#av-container.hide-controls #buttons,#av-container.hide-controls #av-inner #gui:before{display:none}#av-container.buttons-below #av-inner #slot #videoslot{top:0;-webkit-transform:none;transform:none}#av-testcss{margin-top:3px}.embed-player-tag #testyourself-postroll-embedgui #av-container{position:relative;top:50%;-webkit-transform:initial !important;transform:initial !important}.testyourself-postroll .embed-player-tag #testyourself-postroll-embedgui #av-container{top:0px}.embed-player-tag #testyourself-postroll-embedgui #av-container{margin-left:auto;margin-right:auto;//margin-top:50px}#testyourself-preroll-embedgui #av-container #av-inner #gui #skip-btn{top:0px}#spotimaniviewplayergui #av-container{//position:inherit} #av-container #videoslot video {max-width: none;}';
window.aniviewGetGui = function () {
	var gui = '<div id="av-container" class="responsive">' +
		'<div id="av-inner">' +
		'<div id="slot">';
	if (window.AV_player.config.preloader && ((window.AV_player.config.preloader.type =='Image' && window.AV_player.config.preloader.link != '') || window.AV_player.config.preloader.type =='js')) {
		gui = gui + '<div id="imgpreloader"><div id="preloader"></div>'
	} else {
		gui = gui + '<div id="imgpreloader"></div><div id="preloader"><svg class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 30 30" xml:space="preserve">' +
			'<g>' +
			'<path d="M23.3,14.9c0-0.4-0.3-0.9-0.8-1.2l-10-6.4c-1.1-0.7-2-0.1-2,1.3v7.5C15.8,13.7,23.1,14.9,23.3,14.9z M23.3,15 c-7.9,0.6-11.4,3.5-12.8,5.7v0.8c0,1.4,0.9,2,2,1.3l10-6.4C23.1,16,23.4,15.5,23.3,15z"/>' +
			'</g>' +
			'</svg>' +
			'<svg class="circle" width="70" height="70" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle cx="35" cy="35" r="32"></circle></svg>' +
			'<svg class="circle active" width="70" height="70" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle cx="35" cy="35" r="32"></circle></svg>';
	};
	gui = gui + '</div>' + '<div id="videoslot"></div>';
	if (window.AV_player.config.preloader.type =='content') {
		gui = gui + '<video id="AVcontent" webkit-playsinline muted style="width: 100%;height:100%"></video>';
	}
	gui = gui + '</div>' +
		'<div id="gui">' +
		'<div id="timeline">' +
		'<div id="timeline-buffer"></div>' +
		'<div id="timeline-moveto"></div>' +
		'<div id="timeline-progress"></div>' +

		'</div>' +
		'<div id="buttons">' +
		'<div id="left">' +
		'<div id="play-pause" class="pause"></div>' +
		'<div id="phone">' +
		'<div class="icon"></div>' +
		'<div id="phone-num"></div>' +
		'</div>' +
		'</div>' +
		'<div id="right">' +
		'<div id="fullscreen" class="off"></div>' +
		'<div id="share"></div>' +
		'<div id="sound"><div class="on"></div></div>' +
		'</div>' +
		'</div>' +
		'<div id="big-play"></div>' +
		'<div id="timer"></div>' +
		'<div id="close-btn"></div>' +
		'<div id="skip-btn">Skip</div>' +
		'<div id="aniview-credit">Ads by <span></span></div>' +
		'</div>' +
		'</div>' +
		'</div>';	
	return gui;
};LinearAd=function(){function t(b,c,e,h,d,u){function l(a,b){var p=document.getElementsByTagName("body")[0],d=document.createElement("script");d.type="text/javascript";d.src=a;d.onload=b;"function"!==typeof d.onload&&(d.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||b()});p.appendChild(d)}function x(){k=new aniviewPlayer(D);k.onAdLoaded=function(){a.dispatch("AdLoaded")};k.onAdStarted=function(){a.dispatch("AdStarted")};k.onAdError=function(b){a.dispatch("AdError",
b)};k.onAdImpression=function(b,p){a.dispatch("AdImpression",b,p)};k.onAdVideoComplete=function(){a.dispatch("AdVideoComplete")};k.onAdSkipped=function(){a.dispatch("AdSkipped")};k.onAdSkippableStateChange=function(){a.dispatch("AdSkippableStateChange")};k.onAdStopped=function(){a.dispatch("AdStopped")};k.onAdClosed=function(b){a.dispatch("AdClosed",b)};k.onAdVideoFirstQuartile=function(){a.dispatch("AdVideoFirstQuartile")};k.onAdVideoMidpoint=function(){a.dispatch("AdVideoMidpoint")};k.onAdVideoThirdQuartile=
function(){a.dispatch("AdVideoThirdQuartile")};k.onAdClickThru=function(){a.dispatch("AdClickThru")};k.onAdVolumeChange=function(){a.dispatch("AdVolumeChange")};k.onAdPaused=function(){a.dispatch("AdPaused")};k.onAdPlaying=function(){a.dispatch("AdPlaying")};k.onAdDurationChange=function(){a.dispatch("AdDurationChange")};k.onallAdsCompleted=function(){a.dispatch("allAdsCompleted")};k.onContentImpression=function(b){a.dispatch("ContentImpression",b)};k.onContentComplete=function(){a.dispatch("ContentComplete")};
k.onContentPaused=function(){a.dispatch("ContentPaused")};k.onContentPlaying=function(){a.dispatch("ContentPlaying")};k.onContentClick=function(){a.dispatch("ContentClick")};k.onAdEvent=function(b,p,d){a.dispatch("AdEvent",b,p,d)};k.onInventory=function(){a.dispatch("Inventory")};k.onInventoryRequest=function(b){a.dispatch("InventoryRequest",b)};k.onFullScreenRequest=function(b){a.dispatch("FullScreenRequest",b)}}function w(){l(z+"aniviewFlashOpen.js",x)}function C(){l(z+"vast-player.js",w)}function t(){l(z+
"AnivewPlayerGUI.js",C)}function g(){l(z+"AniviewImagePlayer.js",t)}var D={width:b,height:c,viewMode:e,desiredBitrate:h,creativeData:d,environmentVars:u};m=b;r=c;var z="https://video.aniview.com/tal/6/";z=u.baseJsUrl||""==u.baseJsUrl?u.baseJsUrl+"/":"https://aniview.hs.llnwd.net/d1/script/6.1/";1==u.bundle||"undefined"!==typeof aniviewPlayer?x():l(z+"Utils.js",g)}var k,m=0,r=0,a=new function(){var a={};this.subscribe=function(b,e,h){a[e]||(a[e]=[]);a[e].push({callback:b,context:h})};this.unsubscribe=
function(b,e){if(a[e])for(var c=0;c<a[e].length;c++)if(a[e][c].callback===b){a[e].splice(c,1);break}};this.dispatch=function(b,e,h,d){if(a[b])for(var c=0;c<a[b].length;c++)if(a[b][c]&&"function"===typeof a[b][c].callback)try{a[b][c].callback.call(a[b][c].context,e,h,d)}catch(l){}}};this.handshakeVersion=function(a){return"2.0"};this.initAd=function(a,c,e,h,d,u){t(a,c,e,h,d,u)};this.startAd=function(a){a?k.startAd():setTimeout(function(){k.startAd()},50)};this.setWaterfallState=function(a,c){k.setWaterfallState(a,
c)};this.getAdLinear=function(){return!0};this.stopAd=function(a,c){k.stopAd()};this.getAdVolume=function(){return k.getAdVolume()};this.setAdVolume=function(a){k.setAdVolume(a)};this.resizeAd=function(a,c,e){k&&(k.resizeAd(a,c,e),m=a,r=c)};this.pauseAd=function(){k.pauseAd()};this.resumeAd=function(){k.resumeAd()};this.expandAd=function(){};this.getAdExpanded=function(a){return!1};this.getAdSkippableState=function(a){return!1};this.collapseAd=function(){};this.skipAd=function(){k.skipAd()};this.getAdWidth=
function(){return m};this.getAdHeight=function(){return r};this.getSkippableRemainingTime=function(){return-1};this.getAdRemainingTime=function(){return k.getAdRemainingTime()};this.getAdDuration=function(){return k.getAdDuration()};this.getAdCompanions=function(){return""};this.getIcons=function(){return""};this.getAdIcons=function(){return""};this.seekAd=function(a){k.seekAd(a)};this.getContentPaused=function(){if(k)return k.getContentPaused()};this.pauseContent=function(){if(k)return k.pauseContent()};
this.resumeContent=function(){if(k)return k.resumeContent()};this.setContentVolume=function(a){if(k)return k.setContentVolume(a)};this.subscribe=function(b,c,e){a.subscribe(b,c,e)};this.unsubscribe=function(b,c){a.unsubscribe(b,c)};Utils.defineProperty(this,"adRemainingTime",this.getAdRemainingTime,null);Utils.defineProperty(this,"adDuration",this.getAdDuration,null);Utils.defineProperty(this,"adVolume",this.getAdVolume,this.setAdVolume);Utils.defineProperty(this,"adSkippableState",this.getAdSkippableState,
null);Utils.defineProperty(this,"adLinear",this.getAdLinear,null);Utils.defineProperty(this,"adExpanded",this.getAdExpanded,null);Utils.defineProperty(this,"adCompanions",this.getAdCompanions,null);Utils.defineProperty(this,"adIcons",this.getAdIcons,null);Utils.defineProperty(this,"adWidth",this.getAdWidth,null);Utils.defineProperty(this,"adHeight",this.getAdHeight,null)};window.getVPAIDAd=function(){return new LinearAd};
(function(t){function k(a,b){if(m.trackingBuffer[a]&&m.trackingBuffer[a].data&&0<m.trackingBuffer[a].data.length){var c=JSON.stringify(m.trackingBuffer[a].data);m.trackingBuffer[a].data.length=0;m.trackingBuffer[a].timer&&(clearTimeout(m.trackingBuffer[a].timer),m.trackingBuffer[a].timer=0);(a=m.createCORSRequest("POST",b,!1))&&a.send(c)}}var m=t.Utils={};m.getUrlParameters=function(a){if(!a){a="avmanager.js";for(var b="",c=document.getElementsByTagName("script"),e=0;e<c.length;e++)if(-1!==c[e].src.toLowerCase().indexOf(a)){b=
c[e].src;break}a=b}b={};c=a;0<c.indexOf("?")&&(c=c.slice(c.indexOf("?")+1));e=c.split("&");for(var h=0;h<e.length;h+=1)if(0<e[h].length&&(c=e[h].split("="),c[0]!==a&&0<c[0].length))if(1===c.length)b[c[0]]=null;else if(2===c.length)try{b[c[0]]=decodeURIComponent(c[1])}catch(u){b[c[0]]=c[1]}else{b[c[0]]="";for(var d=1;d<c.length;d+=1){try{b[c[0]]+=decodeURIComponent(c[d])}catch(u){b[c[0]]+=c[d]}d<c.length-1&&(b[c[0]]+="=")}}return b};m.extendsClass=function(a,b){var c=function(){};c.prototype=b.prototype;
a.prototype=new c};m.getPath=function(a){a&&-1!=a.indexOf("?")&&(a=a.split("?").shift());return a};m.getExtension=function(a){return(a=m.getPath(a))&&-1!=a.indexOf(".")?a.split(".").pop().toLowerCase():null};m.setExtension=function(a,b){return-1!=a.indexOf(".")?(a=a.split("."),a.pop(),a.push(b),a.join(".")):a+"."+b};m.logEnabled=!0;m.logElement=null;m.log=function(){if(m.logEnabled){var a=Array.prototype.join.call(arguments," ");this.logElement&&(this.logElement.innerHTML+=a+"<br>");console.log(a)}};
m.keys={};m.keysTotal={};m.begin=function(a){m.keys[a]=Date.now()};m.end=function(a){var b=m.keys[a];b=Date.now()-b;void 0==m.keysTotal[a]&&(m.keysTotal[a]=0);m.keysTotal[a]+=b};m.logKeys=function(a){m.log();var b=0;for(a in m.keysTotal)m.log(a+" = "+m.keysTotal[a]+" ms"),b+=m.keysTotal[a];m.log("Total = "+b);m.log()};m.defineProperties=function(a){var b=null,c=null,e=null,h=null;for(h in a){var d=h.substring(0,4);"get_"==d?(e=h.substring(4),b=a["get_"+e],void 0!=a["set_"+e]&&(c=a["set_"+e])):"set_"==
d&&(e=h.substring(4),void 0!=!a["get_"+e]&&(c=a["set_"+e]));(b||c)&&m.defineProperty(a,e,b,c)}};m.defineProperty=function(a,b,c,e,h){void 0!=Object.defineProperty?(h={enumerable:void 0!=h?h:!0,configurable:!0},c&&(h.get=c),e&&(h.set=e),Object.defineProperty(a,b,h)):(c&&void 0!=a.__defineGetter__&&a.__defineGetter__(b,c),e&&void 0!=a.__defineSetter__&&a.__defineSetter__(b,e))};m.rndString=function(){return Math.random()+"_"+Date.now()};m.formatData=function(a){var b=[],c;for(c in a){var e=a[c],h=typeof e;
"string"!=h&&"number"!=h&&"boolean"!=h||b.push(c+"="+encodeURIComponent(e))}return b.join("&")};m.webGLEnabled=function(){if(t.WebGLRenderingContext)for(var a=document.createElement("canvas"),b=["webgl","experimental-webgl","moz-webgl","webkit-3d"],c=!1,e=0;e<b.length;e++)try{if((c=a.getContext(b[e]))&&"function"==typeof c.getParameter)return!0}catch(h){}return!1};m.isMobile=function(){if("undefined"===typeof m.isMobileDevice){var a=!1,b=navigator.userAgent||navigator.vendor||t.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;m.isMobileDevice=a}return m.isMobileDevice};m.isAndroid=function(){"undefined"===typeof m.isAndroidDevice&&(m.isAndroidDevice=/(android)/i.test(navigator.userAgent));return m.isAndroidDevice};m.isiOS=function(){"undefined"===typeof m.isiOSDevice&&(m.isiOSDevice=/iPhone|iPod|iPad/.test(navigator.userAgent));return m.isiOSDevice};m.isSlow=function(){return 1024>Math.max(t.screen.width,t.screen.height)*(t.devicePixelRatio||1)};m.startRemoteDebug=function(a){if(a){var b=document.createElement("script");
b.src="https://jsconsole.com/js/remote.js?"+a;document.getElementsByTagName("head")[0].appendChild(b)}};m.isWebKit=function(){return/WebKit/.test(navigator.userAgent)};m.getOS=function(){return-1!=navigator.appVersion.toLowerCase().indexOf("android")?"android":-1!=navigator.appVersion.toLowerCase().indexOf("mac")&&/iPad|iPhone|iPod/.test(navigator.userAgent)?"ios":-1!=navigator.appVersion.toLowerCase().indexOf("win")?"windows":-1!=navigator.appVersion.toLowerCase().indexOf("mac")?"mac":-1!=navigator.appVersion.toLowerCase().indexOf("x11")?
"unix":-1!=navigator.appVersion.toLowerCase().indexOf("linux")?"linux":null};m.getOSVersion=function(){var a=navigator.userAgent.toLowerCase().split(" "),b=a.indexOf("os");return-1!=b?(a=a[b+1].split("_"),{major:a[0],minor:a[1]}):{major:0,minor:0}};m.getChromeVersion=function(){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a?parseInt(a[2],10):!1};m.getBrowser=function(){return-1!=navigator.userAgent.toLowerCase().indexOf("chrome")&&-1!=navigator.vendor.toLowerCase().indexOf("google")?
"chrome":-1!=navigator.userAgent.toLowerCase().indexOf("opera")?"opera":-1!=navigator.userAgent.toLowerCase().indexOf("firefox")?"firefox":-1!=navigator.userAgent.toLowerCase().indexOf("safari")&&-1!=navigator.vendor.toLowerCase().indexOf("apple")?"safari":-1!=navigator.userAgent.toLowerCase().indexOf("msie")||1==!!document.documentMode?"ie":null};m.isHighDensity=function(){var a=!1;try{a=t.matchMedia&&(t.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||
t.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||t.devicePixelRatio&&1.3<t.devicePixelRatio}catch(b){a=t.devicePixelRatio&&1.3<t.devicePixelRatio}return a};m.parseXML=function(a){return(t.DOMParser?function(a){return(new t.DOMParser).parseFromString(a,"text/xml")}:"undefined"!=typeof t.ActiveXObject&&new t.ActiveXObject("Microsoft.XMLDOM")?
function(a){var b=new t.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b}:function(){return null})(a)};m.getChildByPath=function(a,b){if(a&&b&&(b=b.split("/"),0<b.length)){var c=b.shift().toLowerCase();a=a.children;for(var e=0;e<a.length;e++){var h=a[e];if(h.nodeName.toLowerCase()==c)return 0<b.length?m.getChildByPath(h,b.join("/")):h}}return null};m.isVideoElement=function(a){var b="",c="",e="",h="";a.canPlayType&&(b=""!==a.canPlayType('video/mp4; codecs="mp4v.20.8"'),c=""!==
(a.canPlayType('video/mp4; codecs="avc1.42E01E"')||a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),e=""!==a.canPlayType('video/ogg; codecs="theora"'),h=""!==a.canPlayType('video/webm; codecs="vp8, vorbis"'));return b||c||e||h};m.getElementById=function(a,b){a=a.childNodes;for(var c in a){var e=a[c];if(e.id==b)return e;e=m.getElementById(e,b);if(null!=e)return e}return null};m.getHostName=function(a){function b(a){if("undefined"==typeof a||null==a)return"";a=a.trimStr();if(""==a)return"";
if(-1<a.indexOf("://"))if(a=a.split("://"),-1<a[0].indexOf("/")||-1<a[0].indexOf(".")||-1<a[0].indexOf("?")||-1<a[0].indexOf("&"))if(a[0]=a[0].trimStr(),0==a[0].indexOf("//"))a=a[0].split("//")[1].split("/")[0].trimStr().split("?")[0].split("&")[0];else return"";else a[1]=a[1].trimStr(),a=a[1].split("/")[0].trimStr().split("?")[0].split("&")[0];else a=0==a.indexOf("//")?a.split("//")[1].split("/")[0].trimStr().split("?")[0].split("&")[0]:a.split("/")[0].trimStr().split("?")[0].split("&")[0];return a}
try{a=decodeURIComponent(a),a=decodeURIComponent(a),a=decodeURIComponent(a)}catch(c){}String.prototype.trimStr=function(){return this.replace(/^\s+|\s+$/g,"")};return function(a){if("undefined"==typeof a||null==a)return"";a=a.trimStr();return""==a?"":b(a).split(":")[0]}(a)};m.getMD5=function(a,b,c){function e(a,b){var p=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(p>>16)<<16|p&65535}function h(a,b,p,d,q,g){a=e(e(b,a),e(d,g));return e(a<<q|a>>>32-q,p)}function d(a,b,p,d,q,g,c){return h(b&p|~b&d,a,b,
q,g,c)}function u(a,b,p,d,q,g,c){return h(b&d|p&~d,a,b,q,g,c)}function l(a,b,p,d,q,g,c){return h(p^(b|~d),a,b,q,g,c)}function x(a,b){a[b>>5]|=128<<b%32;a[(b+64>>>9<<4)+14]=b;var p=1732584193,g=-271733879,q=-1732584194,c=271733878;for(b=0;b<a.length;b+=16){var E=p;var x=g;var k=q;var w=c;p=d(p,g,q,c,a[b],7,-680876936);c=d(c,p,g,q,a[b+1],12,-389564586);q=d(q,c,p,g,a[b+2],17,606105819);g=d(g,q,c,p,a[b+3],22,-1044525330);p=d(p,g,q,c,a[b+4],7,-176418897);c=d(c,p,g,q,a[b+5],12,1200080426);q=d(q,c,p,g,a[b+
6],17,-1473231341);g=d(g,q,c,p,a[b+7],22,-45705983);p=d(p,g,q,c,a[b+8],7,1770035416);c=d(c,p,g,q,a[b+9],12,-1958414417);q=d(q,c,p,g,a[b+10],17,-42063);g=d(g,q,c,p,a[b+11],22,-1990404162);p=d(p,g,q,c,a[b+12],7,1804603682);c=d(c,p,g,q,a[b+13],12,-40341101);q=d(q,c,p,g,a[b+14],17,-1502002290);g=d(g,q,c,p,a[b+15],22,1236535329);p=u(p,g,q,c,a[b+1],5,-165796510);c=u(c,p,g,q,a[b+6],9,-1069501632);q=u(q,c,p,g,a[b+11],14,643717713);g=u(g,q,c,p,a[b],20,-373897302);p=u(p,g,q,c,a[b+5],5,-701558691);c=u(c,p,g,
q,a[b+10],9,38016083);q=u(q,c,p,g,a[b+15],14,-660478335);g=u(g,q,c,p,a[b+4],20,-405537848);p=u(p,g,q,c,a[b+9],5,568446438);c=u(c,p,g,q,a[b+14],9,-1019803690);q=u(q,c,p,g,a[b+3],14,-187363961);g=u(g,q,c,p,a[b+8],20,1163531501);p=u(p,g,q,c,a[b+13],5,-1444681467);c=u(c,p,g,q,a[b+2],9,-51403784);q=u(q,c,p,g,a[b+7],14,1735328473);g=u(g,q,c,p,a[b+12],20,-1926607734);p=h(g^q^c,p,g,a[b+5],4,-378558);c=h(p^g^q,c,p,a[b+8],11,-2022574463);q=h(c^p^g,q,c,a[b+11],16,1839030562);g=h(q^c^p,g,q,a[b+14],23,-35309556);
p=h(g^q^c,p,g,a[b+1],4,-1530992060);c=h(p^g^q,c,p,a[b+4],11,1272893353);q=h(c^p^g,q,c,a[b+7],16,-155497632);g=h(q^c^p,g,q,a[b+10],23,-1094730640);p=h(g^q^c,p,g,a[b+13],4,681279174);c=h(p^g^q,c,p,a[b],11,-358537222);q=h(c^p^g,q,c,a[b+3],16,-722521979);g=h(q^c^p,g,q,a[b+6],23,76029189);p=h(g^q^c,p,g,a[b+9],4,-640364487);c=h(p^g^q,c,p,a[b+12],11,-421815835);q=h(c^p^g,q,c,a[b+15],16,530742520);g=h(q^c^p,g,q,a[b+2],23,-995338651);p=l(p,g,q,c,a[b],6,-198630844);c=l(c,p,g,q,a[b+7],10,1126891415);q=l(q,c,
p,g,a[b+14],15,-1416354905);g=l(g,q,c,p,a[b+5],21,-57434055);p=l(p,g,q,c,a[b+12],6,1700485571);c=l(c,p,g,q,a[b+3],10,-1894986606);q=l(q,c,p,g,a[b+10],15,-1051523);g=l(g,q,c,p,a[b+1],21,-2054922799);p=l(p,g,q,c,a[b+8],6,1873313359);c=l(c,p,g,q,a[b+15],10,-30611744);q=l(q,c,p,g,a[b+6],15,-1560198380);g=l(g,q,c,p,a[b+13],21,1309151649);p=l(p,g,q,c,a[b+4],6,-145523070);c=l(c,p,g,q,a[b+11],10,-1120210379);q=l(q,c,p,g,a[b+2],15,718787259);g=l(g,q,c,p,a[b+9],21,-343485551);p=e(p,E);g=e(g,x);q=e(q,k);c=e(c,
w)}return[p,g,q,c]}function k(a){var b,p="";for(b=0;b<32*a.length;b+=8)p+=String.fromCharCode(a[b>>5]>>>b%32&255);return p}function C(a){var b,p=[];p[(a.length>>2)-1]=void 0;for(b=0;b<p.length;b+=1)p[b]=0;for(b=0;b<8*a.length;b+=8)p[b>>5]|=(a.charCodeAt(b/8)&255)<<b%32;return p}function m(a){return k(x(C(a),8*a.length))}function g(a){var b="",p;for(p=0;p<a.length;p+=1){var d=a.charCodeAt(p);b+="0123456789abcdef".charAt(d>>>4&15)+"0123456789abcdef".charAt(d&15)}return b}function D(a,b){a=unescape(encodeURIComponent(a));
var p=unescape(encodeURIComponent(b)),d=C(a),g=[];b=[];g[15]=b[15]=void 0;16<d.length&&(d=x(d,8*a.length));for(a=0;16>a;a+=1)g[a]=d[a]^909522486,b[a]=d[a]^1549556828;a=x(g.concat(C(p)),512+8*p.length);return k(x(b.concat(a),640))}return b?c?D(b,a):g(D(b,a)):c?m(unescape(encodeURIComponent(a))):g(m(unescape(encodeURIComponent(a))))};m.getSHA1=function(a){var b={hash:function(a){a=unescape(encodeURIComponent(a));var c=[1518500249,1859775393,2400959708,3395469782];a+=String.fromCharCode(128);for(var h=
Math.ceil((a.length/4+2)/16),d=Array(h),u=0;u<h;u++){d[u]=Array(16);for(var l=0;16>l;l++)d[u][l]=a.charCodeAt(64*u+4*l)<<24|a.charCodeAt(64*u+4*l+1)<<16|a.charCodeAt(64*u+4*l+2)<<8|a.charCodeAt(64*u+4*l+3)}d[h-1][14]=8*(a.length-1)/Math.pow(2,32);d[h-1][14]=Math.floor(d[h-1][14]);d[h-1][15]=8*(a.length-1)&4294967295;a=1732584193;l=4023233417;var x=2562383102,k=271733878,C=3285377520,m=Array(80);for(u=0;u<h;u++){for(var g=0;16>g;g++)m[g]=d[u][g];for(g=16;80>g;g++)m[g]=b.ROTL(m[g-3]^m[g-8]^m[g-14]^
m[g-16],1);var D=a;var z=l;var E=x;var p=k;var N=C;for(g=0;80>g;g++){var q=Math.floor(g/20);q=b.ROTL(D,5)+b.f(q,z,E,p)+N+c[q]+m[g]&4294967295;N=p;p=E;E=b.ROTL(z,30);z=D;D=q}a=a+D&4294967295;l=l+z&4294967295;x=x+E&4294967295;k=k+p&4294967295;C=C+N&4294967295}return b.toHexStr(a)+b.toHexStr(l)+b.toHexStr(x)+b.toHexStr(k)+b.toHexStr(C)},f:function(a,b,h,d){switch(a){case 0:return b&h^~b&d;case 1:return b^h^d;case 2:return b&h^b&d^h&d;case 3:return b^h^d}},ROTL:function(a,b){return a<<b|a>>>32-b},toHexStr:function(a){for(var b=
"",c,d=7;0<=d;d--)c=a>>>4*d&15,b+=c.toString(16);return b}};return b.hash(a)};m.joinObject=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")};m.getProtocol=function(){if("undefined"!==typeof m.protocol)return m.protocol;if("http:"==t.location.protocol||"https:"==t.location.protocol)m.protocol=t.location.protocol,m.topWindow=t;else{var a=t;var b=a.location.protocol;var c=0;try{for(;"http:"!=b&&"https:"!=b&&15>c&&a!==a.parent;)a=a.parent,b=a.location.protocol,
c++}catch(e){}"http:"==b||"https:"==b?(m.protocol=b,m.topWindow=a):m.protocol="https:"}return m.protocol};m.getTopWindow=function(){this.topWindow||this.getProtocol();return this.topWindow};m.httpsReplace=function(a){"https:"==m.getProtocol()&&(-1==a.indexOf("hwdata1.aniview.com")&&(a=a.replace("data1.ani-view.com","gbdl.hs.llnwd.net/v1"),a=a.replace("data1.aniview.com","aniview.hs.llnwd.net/d1")),a=a.replace(/^http:\/\//i,"https://"));return a};m.getTrueDomain=function(){function a(a){try{if(!t.location.ancestorOrigins)return;
for(var b=0,d=t.location.ancestorOrigins.length;d>b;b++)a.call(null,t.location.ancestorOrigins[b],b)}catch(u){}return[]}function b(a){var b=[];do try{var d=d?d.parent:t;a.call(null,d,b)}catch(u){return b.push({referrer:null,location:null,isTop:!1}),b}while(d!==t.top);return b}function c(){var c=null;try{var h=b(function(a,b){try{b.push({referrer:a.document.referrer||null,location:a.location.href||null,isTop:a===t.top})}catch(x){b.push({referrer:null,location:null,isTop:a===t.top})}});a(function(a,
b){h[b].ancestor=a});c="";for(var d=h.length-1;0<=d&&(c=h[d].location,!c&&0<d&&(c=h[d-1].referrer,c||(c=h[d-1].ancestor)),!c);d--);}catch(u){}return c}try{return c()}catch(e){return null}};m.getAmpUrl=function(a){if("string"===typeof a){var b=a.indexOf("/amp/");0<b&&40>b&&(gPos=a.indexOf("google."),0<gPos&&gPos<b&&(a="https://"+a.substring(b+5,500)));return a}};m.logLevels={none:0,defaultLevel:1,error:2,info:4,debug:5};m.logLevel=m.logLevels.none;m.writeLog=function(a,b,c){if(a<=this.logLevel)try{c?
console.log(b,c):console.log(b)}catch(e){}};m.reportDuduPixel=function(a,b,c){};m.setFSState=function(a,b){b=b?a.requestFullscreen||a.webkitRequestFullscreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen:a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.mozCancelFullScreen||a.msExitFullscreen;if("function"!==typeof b)return!1;b.call(a);return!0};m.getFSElement=function(a){return a.fullscreenElement||a.webkitFullscreenElement||a.webkitCurrentFullScreenElement||
a.mozFullScreenElement||a.msFullscreenElement};m.getFSEvent=function(){var a=document;return a.exitFullscreen?"fullscreenchange":a.webkitExitFullscreen?"webkitfullscreenchange":a.webkitCancelFullScreen?"webkitfullscreenchange":a.mozCancelFullScreen?"mozfullscreenchange":a.msExitFullscreen?"MSFullscreenChange":null};m.getVideoSignature=function(a,b){a=a.replace(/\https/g,"http");var c=a.toUpperCase();if(-1<c.search(".MP4")||-1<c.search(".FLV")||-1<c.search(".3GP")||-1<c.search(".WMV")||-1<c.search(".WEBM")){if(-1<
a.search("/videoplayback/")&&-1<a.search("/id/")&&-1<a.search("/itag/")&&-1<a.search("/source/")&&-1<a.search("/ip/")){var e=a.search("ip/");a=a.substr(0,e)}e=a.indexOf("90minContentId");-1<e&&((a=a.substring(e+15,e+100))&&2<a.length&&(e=a.indexOf("&"),-1<e&&(a=a.substring(0,e))),a="http://90min.com/"+a+"/"+a+"/"+a+"/"+a);"string"===typeof b&&2<b.length&&(a=b);if(-1<a.indexOf("track.eyeviewads.com")){var h="";e=a.indexOf("madid=");-1<e&&(e+=6,b=a.substring(e,e+100),e=b.indexOf("&"),-1<e&&(h=b.substring(0,
e)),h&&2<h.length&&(a="http://track.eyeviewads.com/madid/"+h+"/"+h+"/"+h+"/"+h+"/"+h))}-1<a.indexOf("eyeviewads")?(b="",-1<c.search(".MP4")?b=".mp4":-1<c.search(".FLV")?b=".flv":-1<c.search(".3GP")&&(b=".3gp"),a=a.split(b),a=a[0]+b):-1<a.indexOf("?")&&(a=a.split("?"),a=a[0]);-1<a.indexOf("toboads.com/vast2/agw.php")&&(b="zzzzzzz",-1<c.search(".MP4")?b=".MP4":-1<c.search(".FLV")?b=".FLV":-1<c.search(".WEBM")?b=".WEBM":-1<c.search(".3GP")&&(b=".3GP"),"zzzzzzz"!=b&&(a=c.split(b),a=a[0]+b))}else-1<a.indexOf("/www.youtube.com/get_video?")&&
(h="",e=a.indexOf("video_id="),-1<e&&(e+=9,b=a.substring(e,e+100),e=b.indexOf("&"),-1<e&&(h=b.substring(0,e)),h&&2<h.length&&(a="http://www.youtube.com/video_id/"+h+"/"+h+"/"+h+"/"+h))),-1<a.indexOf("web.sundaysky.com/create_video")&&(h="",e=a.indexOf("create_video?id="),-1<e&&(e+=16,b=a.substring(e,e+100),e=b.indexOf("&"),-1<e&&(h=b.substring(0,e)),h&&2<h.length&&(a="http://web.sundaysky.com/create_video/video_id/"+h+"/"+h+"/"+h+"/"+h)));c=a;b=0;e="";for(a=0;a<c.length;a++)h=c.charCodeAt(a)*a,b+=
h,0==a%13&&(e+=b.toString(),b=0);e+=b.toString();return e+="_"+c.length};m.getSlotSize=function(a){a=a.getBoundingClientRect();a={width:a.width,height:a.height};var b=t.AV_player.config.width,c=t.AV_player.config.height;a.width=b>a.width?b:a.width;a.height=c>a.height?c:a.height;return a};var r=function(){function a(){var a=u.getVieabilityInfo(h.el,h.wnd),b=a.vertical.value*a.horizontal.value;return{inView:b>e,ratio:b,state:a.vertical.state}}function b(){var b=a();c&&c(b.inView,b.ratio,b.state)}var c=
null,e=.5,h=null,d=!1,u=this;this.checkViewability=function(){b()};this.start=function(a,u,k){if(d)return!1;a:{var l=null,x=t;m&&"function"===typeof m.getViewability&&"function"===typeof m.getUrlParameters&&(x=parent);try{if(l=x.frameElement)for(var g,w=x;w!==t.top;){g=l.ownerDocument;w=g.defaultView||g.parentWindow;if(w===t.top){var z=w;var E=l;break}l=w.frameElement}}catch(p){d=!0;h=null;break a}if(null==l){E="object"==typeof a?a:x.document.getElementById(a);if(!E){d=!0;h=null;break a}z=x}h={el:E,
wnd:z}}if(!h)return!1;k&&(e=k);u&&(h.wnd.addEventListener("resize",b,!0),h.wnd.addEventListener("scroll",b,!0),c=u,setTimeout(b,10));return!0};this.stop=function(){c&&(h.wnd.removeEventListener("resize",b,!0),h.wnd.removeEventListener("scroll",b,!0),c=null)};this.get=function(b,c){return!d&&h?a():{inView:!1,ratio:0,state:"UNKNOWN"}};this.getHorizontalViewability=function(a,b){b=b.innerWidth;var d=a.getBoundingClientRect().left;a=a.getBoundingClientRect().right;var c=a-d;return d>b?{value:0,state:"OUT_RIGHT"}:
0>=a?{value:0,state:"OUT_LEFT"}:0<=d&&a<=b?{value:1,state:"IN_HVIEW"}:0>d&&a>b?{value:b/c,state:"LR_TRUNC"}:0>d&&a<=b?{value:a/c,state:"L_TRUNC"}:0<=d&&a>b?{value:(b-d)/c,state:"R_TRUNC"}:{value:0,state:"OUT"}};this.getVerticalViewability=function(a,b){b=b.innerHeight;var d=a.getBoundingClientRect().top;a=a.getBoundingClientRect().bottom;var c=a-d;return d>b?{value:0,state:"OUT_BOTTOM"}:0>=a?{value:0,state:"OUT_TOP"}:0<=d&&a<=b?{value:1,state:"IN_VVIEW"}:0>d&&a>b?{value:b/c,state:"BT_TRUNC"}:0>d&&
a<=b?{value:a/c,state:"T_TRUNC"}:0<=d&&a>b?{value:(b-d)/c,state:"B_TRUNC"}:{value:0,state:"OUT"}};this.getVieabilityInfo=function(a,b){return{vertical:u.getVerticalViewability(a,b),horizontal:u.getHorizontalViewability(a,b)}}};m.getViewability=function(a){if(this.lastViewabilityCheck&&100>Date.now()-this.lastViewabilityCheck)return this.lastViewability;a||(a=t.AV_player.config.slot);m.viewability||(m.viewability=new r,m.viewability.start(a,void 0,void 0));if(this.lastViewability=this.viewability.get())a=
Math.floor(100*this.lastViewability.ratio),"UNKNOWN"==this.lastViewability.state&&(a=-1),this.lastViewability.perc=a;this.lastViewabilityCheck=Date.now();return this.lastViewability};m.getViewabilityPerc=function(a){var b=-1;try{var c=this.getViewability(a);c&&(b=c.perc)}catch(e){}return b};m.flashInstalled=function(){if("undefined"===typeof this.isFlashInstalled)try{this.isFlashInstalled=1==("undefined"!==typeof navigator.plugins&&"object"===typeof navigator.plugins["Shockwave Flash"]||t.ActiveXObject&&
!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(a){this.isFlashInstalled=!1}return this.isFlashInstalled};m.createCORSRequest=function(a,b,c){var e=new XMLHttpRequest;"withCredentials"in e?(e.open(a,b,!0),1==c&&(e.withCredentials=!0)):"undefined"!=typeof XDomainRequest?(e=new XDomainRequest,e.open(a,b)):e=null;return e};m.trackingBuffer={};m.trackingBufferSize=10;m.trackingBufferTimeout=5;m.bufferTrackingPixel=function(a,b,c,e){this.trackingBuffer[a]||(this.trackingBuffer[a]={timer:0,
data:[]});this.trackingBuffer[a].data.push(c);e||this.trackingBuffer[a].data.length>=m.trackingBufferSize?k(a,b):1==this.trackingBuffer[a].data.length&&(this.trackingBuffer[a].timer=setTimeout(function(){m.trackingBuffer[a].timer=0;k(a,b)},1E3*m.trackingBufferTimeout))};m.findAdServerName=function(a,b){function c(a){a||(a="");return a.trim().toLowerCase()}function e(a,b,c,h){a=a.indexOf(b);return a>c&&a<h?!0:!1}try{a=c(a);b=[{n:"3rdp1",t:"b.measuread.com/tl.js",s:0,e:11}];for(var h=0;h<b.length;h++)if(e(a,
b[h].t,b[h].s,b[h].e))return b[h].n}catch(d){}return""};m.isAutoSound=function(a){return a.autosound&&!m.isMobile()||a.advideoslot&&a.autosound};m.vcmgr={init:function(a){a.av_evts||(a.av_evts=[],a.av_evtscnt=1,a.av_orig_addEventListener=a.addEventListener,a.av_orig_removeEventListener=a.removeEventListener);a.addEventListener=function(a,c,e){"function"===typeof c&&(c.av_evtid=this.av_evtscnt++,this.av_evts.push({evt:a,func:c,opt:e}));return this.av_orig_addEventListener.apply(this,arguments)};a.removeEventListener=
function(a,c,e){if("function"===typeof c&&c.av_evtid)for(var b=0;b<this.av_evts.length;b++)if(c.av_evtid==this.av_evts[b].func.av_evtid){this.av_evts.splice(b,1);break}return this.av_orig_removeEventListener.apply(this,arguments)}},clean:function(a){if(a&&a.av_evts){for(var b=0;b<a.av_evts.length;b++)try{a.av_orig_removeEventListener.call(a,a.av_evts[b].evt,a.av_evts[b].func,a.av_evts[b].opt)}catch(c){}a.av_evts.length=0}},reset:function(a){a&&a.av_evts&&(this.clean(a),a.av_evts=null,a.av_evtscnt=
0,a.av_orig_addEventListener&&(a.addEventListener=a.av_orig_addEventListener,a.av_orig_addEventListener=null),a.av_orig_removeEventListener&&(a.removeEventListener=a.av_orig_removeEventListener,a.av_orig_removeEventListener=null))}};m.getTopWnd=function(a){for(var b=a;b.frameElement;)try{b.frameElement.getBoundingClientRect()&&(b=b.frameElement.ownerDocument.defaultView||b.frameElement.ownerDocument.parentWindow)}catch(c){break}return b||a}})(window);
(function(t){function k(a){return a&&a.complete&&0<a.width&&0<a.height}function m(a,b){function c(a){var b,c=0,d="";for(b=0;b<a.length;b++){var h=a.charCodeAt(b)*b;c+=h;0==b%13&&(d+=c.toString(),c=0)}d+=c.toString();return d+="_"+a.length}a=a.replace(/\https/g,"http");var d=a.toUpperCase();if(-1<d.search(".SWF")||-1<d.search(".MP4")||-1<d.search(".FLV")||-1<d.search(".3GP")||-1<d.search(".WMV")||-1<d.search(".WEBM")){var h="";if(0==a.trim().indexOf("data:"))return a=c("http://pixel.adsafeprotected.com/IASVideo.js?1234");
-1<a.search("/videoplayback/")&&-1<a.search("/id/")&&-1<a.search("/itag/")&&-1<a.search("/source/")&&-1<a.search("/ip/")&&(h=a.search("ip/"),a=a.substr(0,h));if(-1<a.search("rtr.innovid.com/d/")&&-1<a.search("/media/")){h=a.search("rtr.innovid.com/d/")+18;h=a.substr(h,h+50);var e=h.search("/");-1<e&&(h=h.substr(0,e)+"/",a="https://rtr.innovid.com/d/"+h+h+h+h+h)}h=a.indexOf("90minContentId");-1<h&&((a=a.substring(h+15,h+100))&&2<a.length&&(h=a.indexOf("&"),-1<h&&(a=a.substring(0,h))),a="http://90min.com/"+
a+"/"+a+"/"+a+"/"+a);"string"===typeof b&&2<b.length&&(a=b);-1<a.indexOf("track.eyeviewads.com")&&(e="",h=a.indexOf("madid="),-1<h&&(h+=6,b=a.substring(h,h+100),h=b.indexOf("&"),-1<h&&(e=b.substring(0,h)),e&&2<e.length&&(a="http://track.eyeviewads.com/madid/"+e+"/"+e+"/"+e+"/"+e+"/"+e)));-1<a.indexOf("eyeviewads")?(b="",-1<d.search(".MP4")?b=".mp4":-1<d.search(".FLV")?b=".flv":-1<d.search(".3GP")&&(b=".3gp"),a=a.split(b),a=a[0]+b):-1<a.indexOf("?")&&(a=a.split("?"),a=a[0]);-1<a.indexOf("toboads.com/vast2/agw.php")&&
(b="zzzzzzz",-1<d.search(".MP4")?b=".MP4":-1<d.search(".FLV")?b=".FLV":-1<d.search(".WEBM")?b=".WEBM":-1<d.search(".3GP")&&(b=".3GP"),"zzzzzzz"!=b&&(a=d.split(b),a=a[0]+b));a=c(a)}else{-1<a.indexOf("/www.youtube.com/get_video?")&&(e="",h=a.indexOf("video_id="),-1<h&&(h+=9,b=a.substring(h,h+100),h=b.indexOf("&"),-1<h&&(e=b.substring(0,h)),e&&2<e.length&&(a="http://www.youtube.com/video_id/"+e+"/"+e+"/"+e+"/"+e)));-1<a.indexOf("web.sundaysky.com/create_video")&&(e="",h=a.indexOf("create_video?id="),
-1<h&&(h+=16,b=a.substring(h,h+100),h=b.indexOf("&"),-1<h&&(e=b.substring(0,h)),e&&2<e.length&&(a="http://web.sundaysky.com/create_video/video_id/"+e+"/"+e+"/"+e+"/"+e)));if(0==a.trim().indexOf("data:")||-1<a.indexOf(".js?")||-1<a.indexOf("/js/vpaid/")||-1<a.indexOf("/moatwrapper.js#")||a.indexOf(".js")==a.length-3)a="http://pixel.adsafeprotected.com/IASVideo.js?1234";-1<a.indexOf("vam.imposium.com/redirect")&&(d=a.indexOf("?"),-1<d&&(a=a.substring(0,d)));d=a.indexOf("ad.doubleclick.net/ddm");-1<
d&&11>d&&-1<a.indexOf("=text/xml")&&(a="http://pixel.adsafeprotected.com/IASVideo.js?1234");a=c(a);1E3<a.length&&(a=c(a))}return a}function r(b,c,h,e,k){var d;var l=(new Date).getTime();var g=Utils.httpsReplace("http://cdn.aniview.com/videos/json/")+c+"/"+b+".txt?cb="+l;t.AV_player.config.adfoldermode?g=e.trim()+"/id.txt":k&&(g=Utils.httpsReplace("http://"+t.AV_player.config.keydomain+"/")+c+"/"+b+"/id.txt?cb="+l);var u=a("GET",g,0);u.onload=function(){200==u.status?""!=u.responseText?(d=JSON.parse(u.responseText),
d.error?1==d.error||2==d.error||3==d.error?h.failure(d):h.success(d):h.success(d)):h.failure({error:0}):h.failure(null)};u.onerror=function(){h.failure(null)};u.send()}function a(a,b,c){var d=new XMLHttpRequest;"withCredentials"in d?(d.open(a,b,!0),1==c&&(d.withCredentials=!0)):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(a,b)):d=null;return d}function b(a,b){var d=null,h=[];for(d in b){var e=d.substring(0,4);if("get_"==e||"set_"==e){var u=d.substring(4);if(-1==h.indexOf(u)){h.push(u);
e=b["get_"+u];var k=b["set_"+u];if("nodeName"==u||"tagName"==u)try{c(a,u,e,k)}catch(g){}else c(a,u,e,k)}}else a[d]=b[d]}}function c(a,b,c,h,e){void 0!=Object.defineProperty?(e={enumerable:void 0!=e?e:!0,configurable:!0},c&&(e.get=c),h&&(e.set=h),Object.defineProperty(a,b,e)):(c&&void 0!=a.__defineGetter__&&a.__defineGetter__(b,c),h&&void 0!=a.__defineSetter__&&a.__defineSetter__(b,h))}var e=t.AniviewImagePlayer={};e.createAniviewVideoTag=function(a){return Utils.isMobile()?e.isVideoSupported(a)?e.createMobileVideoTag():
e.createTag():document.createElement("video")};e.isVideoSupported=function(a){if(a||t.AV_player&&t.AV_player.config&&t.AV_player.config.nativevideo)if(Utils.isiOS()){if(10<=Utils.getOSVersion().major)return!0}else if(Utils.isAndroid()&&53<=Utils.getChromeVersion())return!0;return!1};e.createMobileVideoTag=function(){var a=document.createElement("video");a.setAttribute("muted",!0);a.setAttribute("playsinline",!0);a.setAttribute("webkit-playsinline",!0);a.origPlay=a.play;a.play=function(){a.fullScreenRequested||
(a.setAttribute("muted",!0),a.setAttribute("playsinline",!0),a.setAttribute("webkit-playsinline",!0));this.pauseState=!1;return a.origPlay.call(a)};a.origPause=a.pause;a.pause=function(){this.pauseState=!0;this.pauseStateTimer&&(clearInterval(this.pauseStateTimer),this.pauseStateTimer=0);return a.origPause.call(a)};a.audioReady=!0;Utils.isiOS()&&(a.addEventListener("webkitbeginfullscreen",function(){a.fullScreenRequested||"function"!==typeof a.webkitExitFullscreen||a.webkitExitFullscreen()}),a.addEventListener("webkitendfullscreen",
function(){a.setAttribute("playsinline",!0);a.setAttribute("webkit-playsinline",!0)}),a.resize=function(b,c,d){"fullscreen"==d&&Utils.isiOS()&&((b=a.paused)||a.pause(),a.removeAttribute("playsinline"),a.removeAttribute("webkit-playsinline"),a.fullScreenRequested=!0,b||a.play())});return a};e.createTag=function(a){function c(){var a=null,b=q.children;if(b&&0<b.length&&(!q.src||""==q.src)){var f="";for(a=0;a<b.length;a++)b[a].src&&(-1<b[a].src.indexOf("wmv")||-1<b[a].src.indexOf("webm")||-1<b[a].src.indexOf("mp4")||
-1<b[a].src.indexOf("flv")||-1<b[a].src.indexOf("3gpp"))&&(f=b[a].src,a=b.length);a=f}a&&""!=a||(a=q.getAttribute("src"));a&&""!=a||(a=q.src);a&&(q.src=a)}function d(){return t.AV_player.config.hd&&y&&"true"==String(y.HD).toLowerCase()}function e(a){Utils.writeLog(Utils.logLevels.debug,"Video Player event: "+q.asid+":"+a);var b="on"+a;if("function"===typeof q[b])q[b]();b=document.createEvent("HTMLEvents");b.initEvent(a,!0,!0);q.dispatchEvent(b)}function w(){if(null!=R&&""!=R)if(ka++,30<ka)e("encodeerror");
else{n=y=null;O=!1;S=!0;L=0;A=ea;J.pause();J.src="";ha&&(V=ha);try{T.getContext("2d").clearRect(0,0,T.width,T.height)}catch(wa){console.error(wa)}"string"===typeof R&&"//"==R.trim().substring(0,2)&&(R="http:"+R.trim());var a=m(R,a);e("waiting");q.VIDEO_FOLDER_ID=function(a,b){var f=1;ia=!0;fa="http://data3.aniview.com/";if("56425b19181f4650718b456c"==a)return"115252";if("55b88d67181f465d3e8b4567"==a)return"41751";for(a=0;a<b.length;a++)f+=b.charCodeAt(a);switch(f%27){case 1:case 4:case 7:case 10:case 13:case 16:case 19:return fa=
"http://data3.aniview.com/","20181";case 2:case 5:case 8:case 11:case 14:case 17:case 20:return"20182";case 3:case 6:case 9:case 12:case 15:case 18:case 21:return"20183";case 22:case 23:case 24:case 25:case 26:case 27:case 0:return"20184"}return"20152"}(t.AV_player.config.publisherid,a);t.AV_player.config.cdnurl1&&(fa=t.AV_player.config.cdnurl1);r(a,q.VIDEO_FOLDER_ID,{success:function(b){y=b;G=d()?{width:512,height:288}:{width:300,height:167};ma=1;e("loadstart");e("durationchange");e("loadedmetadata");
b=t.AV_player.config.publisherid;var f="a";"Content"==q.asid&&(f="c");n=[];for(var c=Utils.httpsReplace(fa),p=0;p<y.total;p++){var g=c+"videos/resources/"+q.VIDEO_FOLDER_ID+"/"+y.id+"/"+(d()?"hd/":"")+"img"+p+".ani";t.AV_player.config.adfoldermode?g=q.src.trim()+"/"+(d()?t.AV_player.config.hdgeneric?"generic/":"hd/":"")+"img"+p+".ani":ia&&(g=Utils.httpsReplace(c)+q.VIDEO_FOLDER_ID+"/"+a+"/"+(d()?t.AV_player.config.hdgeneric?"generic/":"hd/":"")+"img"+(p+1)+".ani?pid="+b+"&type="+f);n.push({url:g,
image:null})}I();p=c+"videos/resources/"+q.VIDEO_FOLDER_ID+"/"+y.id+"/"+y.id+".mp3";t.AV_player.config.adfoldermode?p=q.src.trim()+"/"+y.id+".mp3":ia&&(p=Utils.httpsReplace(c)+q.VIDEO_FOLDER_ID+"/"+y.id+"/"+y.id+".mp3?pid="+b+"&type="+f);J.oncanplaythrough=function(){O||404==this.status||(O=!0,q.audioReady=!0);e("durationchange");e("progress")};if(!ia||ia&&0<y.Mp3Size)J.src=p;b=new XMLHttpRequest;b.open("GET",p,!0);b.onload=function(a){O||404==this.status||(O=!0,q.audioReady=!0,e("progress"))};(!ia||
ia&&0<y.Mp3Size)&&b.send(null);K&&q.play()},failure:function(b){b&&null!=b.error?0==b.error?setTimeout(w,1E3):e("encodeerror"):Y?setTimeout(w,1E3):(Y=!0,C(a))}},q.src,ia)}}function C(a){var b="videoURL="+encodeURIComponent(R)+"&xchangePartner="+q.VIDEO_FOLDER_ID+"&ADID="+a+"&vast=",f=new XMLHttpRequest,p=Utils.httpsReplace("http://addvideo.ani-view.com/addVideo.aspx")+"?pubid="+AV_player.config.publisherid+"&ADID="+a;ia&&(p=Utils.httpsReplace("http://"+t.AV_player.config.adddomain)+"/cdnorigin/prod/addVideo?pubid="+
AV_player.config.publisherid+"&ADID="+a+"&cid="+AV_player.config.channelid+"&asid="+q.asid);f.open("POST",p,!0);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.onload=function(){200==f.status&&setTimeout(w,1E3)};f.send(b)}function I(){if(n&&n.length){var a=Math.floor(L),b=Math.floor(a+4);b>n.length&&(b=n.length);for(;a<b;){var f=n[a];f.image||(f.image=document.createElement("img"),a==n.length-1&&(f.image.av_lastImage=!0),f.image.onload=function(){this.onload=null;this.av_lastImage&&
e("durationchange");P||(P=!0,ma=4,e("canplay"),e("canplaythrough"),e("loadeddata"));e("progress")},f.image.src=f.url);a++}}}function g(){var a=0==H?q.clientWidth:H,b=0==sa?q.clientHeight:sa;a=Math.floor(a);b=Math.floor(b);var f=!1;T.width!=a&&(T.width=a,f=!0);T.height!=b&&(T.height=b,f=!0);f&&e("resize")}function D(a){L!=a&&(L=a,0>L?L=0:L>q.duration&&(L=q.duration),f&&(J.currentTime=L))}function z(a){if(n&&n.length){var b=Math.floor(L);a=Math.floor(b+a);a>n.length&&(a=n.length);for(;b<a;){if(!k(n[b].image))return!1;
b++}return!0}return!1}function E(){return{x:5,y:T.height-5-20,width:T.width-10,height:20}}function p(a){var b=L;V||(b+=.4);if(n&&n.length&&G){var f=Math.floor(b);if(null!=n[f]){var p=n[f].image;if(k(p)&&(t.AV_player.config.hdgeneric&&!U&&(G.width=p.width,G.height=p.height/10,U=!0),b=Math.floor(10*(b-f)),f=f+"_"+b,pa!=f||a)&&(pa=f,b<Math.round(p.height/G.height))){f=Math.min(T.width/G.width,T.height/G.height);a=G.width*f;f*=G.height;if(1==t.AV_player.config.fullframe||ta)a=t.AV_player.config.width,
f=t.AV_player.config.height;T.width<T.height&&(a=T.width,f=T.height);try{0==na&&(na=!0,e("play"),e("playing")),T.getContext("2d").drawImage(p,0,G.height*b,G.width,G.height-1,.5*(T.width-a),.5*(T.height-f),a,f)}catch(za){console.error(za)}}}}}function N(){J.loop=Q;J.playbackRate=A}a||(a="");var q=document.createElement("div");q.addEventListener("mousedown",function(a){if(Z&&0<q.duration){var b=a.pageX-q.offsetLeft;a=a.pageY-q.offsetTop;var f=E();f.x<b&&b<f.x+f.width&&f.y<a&&a<f.y+f.height&&(b=(b-f.x)/
f.width,0>b?b=0:1<b&&(b=1),q.currentTime=b*q.duration)}});var R=null,la=1,V=!0,ha=!1,L=0,ma=0,ca=0,pa=null,S=!0,K=!1,H=0,sa=0,M=0,ra=0,ea=1,A=1,Q=!1,W=null,y=null,O=!1,f=!1,n=null,ja=Date.now(),ka=0,Y=!1,Z=!1,v=0,aa=!1,P=!1,G=null,U=!1,X=0,B=0,na=!1,da=!1;q.__id=Date.now();var F=!1,qa=!1,ta=!1,oa=!1,ia=!1,fa=t.AV_player&&t.AV_player.config.cdnurl,J=document.createElement("audio"),ba=document.createElement("img"),T=document.createElement("canvas"),va=setInterval(c,250);b(q,{startAd:function(){F=!0},
load:function(){c();null==q.src||""==q.src||qa||(qa=!0,ka=0,Y=!1,aa=!0,P=!1,G=null,U=!1,w())},init:function(a){ta=a||!1;R=null;la=1;V=!0;ha=!1;ca=ma=L=0;pa=null;S=!0;K=!1;ra=M=sa=H=0;A=ea=1;Q=!1;y=W=null;f=O=!1;J.pause();J.src="";n=null;ja=Date.now();ka=0;Z=Y=!1;v=0;P=aa=!1;G=null;X&&clearTimeout(X);B=X=0;oa=qa=F=da=na=!1},play:function(){c();null!=q.src&&""!=q.src&&(F?S&&(Utils.writeLog(Utils.logLevels.debug,"Video Player play command: "+this.asid),S=!1,L>=this.duration&&(L=0),f&&O&&!V&&J.play(),
1==na&&(e("play"),e("playing")),this.enterFrame=function(){var a=Date.now(),b=a-ja;V&&(b=100);g();N();I();b*=.001;if(0<q.duration){if(!S){var c;aa?(c=z(4))&&(aa=!1):(c=z(1))||(aa=!0);f&&!V?c?(J.paused&&!J.ended&&J.play(),J.currentTimeLast&&(J.currentTimeLast==J.currentTime&&(B+=b),J.currentTimeLast<J.currentTime&&(B=0)),J.currentTimeLast=J.currentTime,L=J.currentTime+B,L>q.duration&&(L=q.duration)):J.paused||J.pause():(c&&(L+=b*A),f&&V&&(J.currentTime=L-.4))}!S&&L>=q.duration&&(Q?(D(0),q.play()):
(D(q.duration),e("timeupdate"),da=!0,e("ended"),q.pause()));if(S&&0==L&&ba.src){if(k(ba)){var d=Math.min(T.width/ba.width,T.height/ba.height),n=ba.width*d;d*=ba.height;try{T.getContext("2d").drawImage(ba,0,0,ba.width,ba.height,.5*(T.width-n),.5*(T.height-d),n,d)}catch(ua){console.error(ua)}}}else if(p(),Z&&0<q.duration){c=E();try{n=T.getContext("2d");n.fillStyle="#999999";n.fillRect(c.x,c.y,c.width,c.height);for(var l=0;l<q.buffered.length;l++){d=q.buffered.begin(l)/q.duration;var u=q.buffered.end(l)/
q.duration;0>d?d=0:1<d&&(d=1);0>u?u=0:1<u&&(u=1);n.fillStyle="#dddddd";n.fillRect(c.x+c.width*d,c.y,c.width*(u-d),c.height/2)}var G=q.currentTime/q.duration;0>G?G=0:1<G&&(G=1);n.fillStyle="#dd0000";n.fillRect(c.x,c.y+c.height/2,c.width*G,c.height/2)}catch(ua){console.error(ua)}}v+=b;oa||0!=L||(oa=!0,e("timeupdate"));.3<v&&(v=0,ca!=L&&(ca=L,e("timeupdate")))}ja=a;S||(V?X=setTimeout(q.enterFrame,96):h(q.enterFrame))},q.canvasAppended||(q.appendChild(T),q.canvasAppended=!0),this.enterFrame()):Utils.writeLog(Utils.logLevels.debug,
"Video play called before startAd, delaying: "+this.asid))},pause:function(){S||(Utils.writeLog(Utils.logLevels.debug,"Video Player pause command: "+this.asid),S=!0,f&&J.pause(),0<X&&(clearTimeout(X),X=0),e("pause"))},addTextTrack:function(a,b,f){return null},canPlayType:function(a){switch(a){case "video/mp4":case "video/webm":case "video/x-flv":case "video/3gpp":case "video/x-ms-wmv":a="probably";break;default:a=""}return a},get_buffered:function(){var a=[];if(n&&n.length)for(var b=null,f=0;f<n.length;f++)k(n[f].image)?
(b||(b={},b.begin=f,a.push(b)),b.end=f+1):b=null;return{start:function(b){return b<a.length?a[b].begin:0},end:function(b){return b<a.length?a[b].end:0},length:a.length}},get_videoWidth:function(){return M},get_videoHeight:function(){return ra},get_audioTracks:function(){return{begin:function(a){return 0},end:function(a){return O?J.duration:0},length:O?1:0}},get_poster:function(){return ba.src},set_poster:function(a){null==a&&(a="");ba.src!=a&&(ba.src=a)},get_autoplay:function(){return K},set_autoplay:function(a){K=
a},get_controller:function(){return null},get_controls:function(){return Z},set_controls:function(a){Z=a},get_crossOrigin:function(){return null},get_currentSrc:function(){return R},get_currentTime:function(){return L},set_currentTime:function(a){D(a);a!=q.duration&&(da=!1);e("seeking");e("seeked")},get_defaultMuted:function(){return ha},set_defaultMuted:function(a){ha=a},get_defaultPlaybackRate:function(){return ea},set_defaultPlaybackRate:function(a){ea=a},get_duration:function(){if(y){var a=0;
if(n&&n.length){var b=n[n.length-1].image;k(b)&&G&&(b=Math.round(b.height/G.height),0<b&&(a=b/10))}this&&1==this.av_opt_adnxs&&(a=1);return y.total-1+a}return 0},get_ended:function(){return da},get_error:function(){return null},get_loop:function(){return Q},set_loop:function(a){Q=a},get_mediaGroup:function(){return{length:0}},get_volume:function(){return la},set_volume:function(a){1E-5>a&&(a=0);0>a?a=0:1<a&&(a=1);J.volume=la=a;V=0<a?!1:!0;N();t.AV_player.config.nosndrewind&&(f=!0);!O||f||V||da||(f=
!0,this.currentTime=0,this.pause(),this.play());f&&(V?(J.paused||J.pause(),L=J.currentTime+.4):J.paused&&(J.currentTime=Math.floor(10*(L-.4))/10,S||da||J.play()));e("volumechange")},get_muted:function(){return V},set_muted:function(a){V=a;N();t.AV_player.config.nosndrewind&&(f=!0);!O||f||V||da||(f=!0,this.currentTime=0,this.pause(),this.play());f&&(V?(J.paused||J.pause(),L=J.currentTime+.4):J.paused&&(J.currentTime=L-.4,S||da||J.play()))},get_networkState:function(){return 0},get_paused:function(){return S},
get_playbackRate:function(){return A},set_playbackRate:function(a){A!=a&&(A=a,e("ratechange"))},get_played:function(){return 0==L?{length:0}:{start:function(a){if(0==a)return 0},end:function(a){if(0==a)return L},length:1}},get_preload:function(){return"auto"},set_preload:function(a){},get_readyState:function(){return ma},get_seekable:function(){return{length:0}},get_seeking:function(){return!1},get_src:function(){return R},set_src:function(a){R!=a&&(Utils.writeLog(Utils.logLevels.debug,"Video Player set src: "+
this.asid+":"+a),R=a,null!=R&&""!=R?(clearInterval(va),qa=!1,this.load()):qa=!1)},get_startDate:function(){return W},get_textTracks:function(){return{length:0}},get_videoTracks:function(){var a=this;return{begin:function(a){return 0},end:function(b){return a.duration},length:0<this.duration?1:0}},get_width:function(){return H},set_width:function(a){H=a},get_height:function(){return sa},set_height:function(a){sa=a},get_nodeName:function(){return"VIDEO"},get_tagName:function(){return"VIDEO"}});q.resize=
function(a,b,f){try{q.paused&&(g(),p(!0))}catch(ya){}};return q};e.replaceTag=function(a){if(a&&a.parentNode){var b=this.createTag();b.id=a.id;b.volume=a.volume;b.muted=a.muted;b.autoplay=a.autoplay;b.controls=a.controls;b.loop=a.loop;b.poster=a.poster;b.style.cssText=a.style.cssText;b.src=a.src;a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a);return b}return a};var h=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(a){t.setTimeout(a,
1E3/60)}}()})(window);
(function(t){function k(a,c){"56d404b3181f467b5a8b4567"!==t.AV_player.config.publisherid?a.className.match(new RegExp("(\\s|^)"+c+"(\\s|$)"))||(a.className+=" "+c):a.classList.add(c)}function m(a,c){"56d404b3181f467b5a8b4567"!==t.AV_player.config.publisherid?a.className.match(new RegExp("(\\s|^)"+c+"(\\s|$)"))&&(a.className=a.className.replace(new RegExp("(\\s|^)"+c+"(\\s|$)")," ")):a.classList.remove(c)}var r=Utils.isMobile(),a=t.AnivewPlayerGUI=function(a){this.config=a;t.AV_PlayerGui=this;if(null==
a)throw Error("AnivewPlayerGUI: not found 'config'");if(null==a.container)throw Error("AnivewPlayerGUI: not found 'config.container'");this.container=a.container;this.slotDoc=this.container.ownerDocument;this.gui=Utils.getElementById(this.container,"gui");this.slot=Utils.getElementById(this.container,"slot");this.videoslot=Utils.getElementById(this.container,"videoslot");this.preloader=Utils.getElementById(this.container,"preloader");this.timelineProgress=Utils.getElementById(this.container,"timeline-progress");
this.timelineBuffer=Utils.getElementById(this.container,"timeline-buffer");this.playPause=Utils.getElementById(this.container,"play-pause");this.bigPlay=Utils.getElementById(this.container,"big-play");this.fullscreen=Utils.getElementById(this.container,"fullscreen");this.sound=Utils.getElementById(this.container,"sound");this.timer=Utils.getElementById(this.container,"timer");this.skip=Utils.getElementById(this.container,"skip-btn");this.close=Utils.getElementById(this.container,"close-btn");this.share=
Utils.getElementById(this.container,"share");this.phone=Utils.getElementById(this.container,"phone");this.phoneNum=Utils.getElementById(this.container,"phone-num");this.aniview=Utils.getElementById(this.container,"aniview-credit");this.timeline=Utils.getElementById(this.container,"timeline");this.timelineProgress=Utils.getElementById(this.container,"timeline-progress");this.timelineMoveto=Utils.getElementById(this.container,"timeline-moveto");this.timelineBuffer=Utils.getElementById(this.container,
"timeline-buffer");this.buttons=Utils.getElementById(this.container,"buttons");0<this.config.skipTimer&&(this.skipTimerInitValue=this.config.skipTimer);this.init();this.showPreloader(this.config.showpreloader)};a.VERSION="1.0.2";a.prototype.config=null;a.prototype.lastframe=!1;a.prototype.container=null;a.prototype.player=null;a.prototype.paused=!1;a.prototype.muted=!1;a.prototype.videoslot=null;a.prototype.preloader=null;a.prototype.timelineProgress=null;a.prototype.timelineBuffer=null;a.prototype.playPause=
null;a.prototype.bigPlay=null;a.prototype.fullscreen=null;a.prototype.sound=null;a.prototype.skip=null;a.prototype.close=null;a.prototype.share=null;a.prototype.phone=null;a.prototype.timer=null;a.prototype.aniview=null;a.prototype.timeline=null;a.prototype.timelineProgress=null;a.prototype.timelineBuffer=null;a.prototype.buttons=null;a.prototype.endTimer=0;a.prototype.showPreloader=function(a){a=this.config.showpreloader&&a;this.preloader&&(this.preloader.style.display=a?"block":"none")};a.prototype.dispose=
function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null);this.skipTimeoutId&&(clearInterval(this.skipTimeoutId),this.skipTimeoutId=null);this.preloaderTimeoutId&&(clearInterval(this.preloaderTimeoutId),this.preloaderTimeoutId=null);for(var a in this)this.hasOwnProperty(a)&&(this[a]=null)};a.prototype.startSkipTimer=function(a,c){this.config.skipTimer=a;(this.config.skip||this.config.close)&&this.checkSkipTimer(c)};a.prototype.init=function(){var a=this;this.container.className=
"";this.bigPlay.style.display="none";this.config.phone&&(this.phoneNum.textContent=this.config.phone);this.config.hideControls&&k(this.container,"hide-controls");Utils.isMobile()||k(this.container,"desktop");null==this.config.responsive&&(this.config.responsive=!0);null!=this.config.width&&null!=this.config.height&&(this.config.responsive=!1);this.config.responsive&&k(this.container,"responsive");Utils.isMobile()&&Utils.isHighDensity()&&k(this.container,"two-x");this.config.skip&&this.config.skipText&&
(this.skip.textContent=this.config.skipText);this.config.lastframe&&(this.lastframe=this.config.lastframe);this.config.timelineMode?k(this.timeline,"av-"+this.config.timelineMode):k(this.timeline,"av-bottom");this.playPause.onclick=function(){a.player&&a.player.ready&&(a.player.userPaused=a.paused?!1:!0);a.playPauseClick()};this.sound.onclick=function(){a.soundClick()};this.fullscreen.onclick=function(){a.fullscreenClick()};this.share.onclick=function(){a.shareClick()};this.phone.onclick=function(){a.phoneClick()};
this.close.onclick=function(){a.closeClick()};this.skip.onclick=function(){a.skipClick()};this.aniview.onclick=function(){a.aniviewClick()};this.timeline.onclick=function(b){a.timelineClick(b)};this.timeline.onmousemove=function(b){a.timelineMouseMove(b)};this.update();this.intervalId=setInterval(function(){a.update()},70)};a.prototype.timelineMouseMove=function(a){var b=this.getVideo();this.config.timelineChange&&b&&0<b.duration&&(a=a.pageX-b.offsetLeft,b=this.timeline.getBoundingClientRect(),a=
(a-b.left)/b.width,0>a?a=0:1<a&&(a=1),this.setValue(this.timelineMoveto,a))};a.prototype.timelineClick=function(a){var b=this.getVideo();if(this.config.timelineChange&&b&&0<b.duration){a=a.pageX-b.offsetLeft;var e=this.timeline.getBoundingClientRect();a=(a-e.left)/e.width;0>a?a=0:1<a&&(a=1);b.currentTime=a*b.duration}};a.prototype.getVideo=function(){var a=this.findVideo(this.videoslot);a||(a=this.findVideo(this.slot));return a};a.prototype.findVideo=function(a){var b=null,e;for(e in a.childNodes)if(b=
a.childNodes[e],b=0<b.duration&&null!=b.canPlayType?b:this.findVideo(b))break;return b};a.prototype.setPlayer=function(a,c,e){null==a&&this.player&&"AVcontent"==this.player.id||("undefined"===typeof c&&(c=!0),this.player=a,this.ad=e,this.paused=!1,this.muted=c,this.skipTimerStarted=!1)};a.prototype.getPlayer=function(){return this.player};a.prototype.getDuration=function(){try{return this.vidReady&&this.player&&this.player.ready?this.player.adDuration:0}catch(b){return 0}};a.prototype.getCurrentTime=
function(){try{return this.vidReady&&this.player&&this.player.ready?this.getDuration()-this.player.adRemainingTime:0}catch(b){return 0}};a.prototype.getRemainingTime=function(){try{return this.vidReady&&this.player&&this.player.ready?this.player.adRemainingTime:0}catch(b){return 0}};a.prototype.checkSkipTimer=function(a){var b=this;this.skipTimerStarted=!0;0<this.config.skipTimer&&(this.timer.textContent=this.config.skipTimer,this.paused||0>=this.getCurrentTime()?this.skipTimeoutId=setTimeout(function(){b.checkSkipTimer(a)},
100):(this.config.skipTimer--,0==this.config.skipTimer&&"function"===typeof a&&a(),this.skipTimeoutId=setTimeout(function(){b.checkSkipTimer(a)},1E3)))};a.prototype.aniviewClick=function(){t.AV_player.config.logoclick&&t.open("https://www.aniview.com/?utm_source=av-player")};a.prototype.closeClick=function(){var a=t.AV_player.config.closeevent;try{t.AV_player.stopAd=!0;if("function"===typeof t.AV_FlashOpen.onAdClosed)t.AV_FlashOpen.onAdClosed(!a);!a&&this.player&&this.player.ready&&this.player.pauseAd()}catch(c){console.log("closeClick",
c)}a||null==this.container.parentNode||this.container.parentNode.removeChild(this.container)};a.prototype.skipClick=function(){console.log("skip");try{if(this.player&&this.player.ready&&(this.player.skipping=!0,this.player.adVolume=0,this.player.pauseAd(),this.player.adSkippableState?this.player.skipAd():this.player.stopAd(),"function"===typeof t.AV_FlashOpen.onAdSkipped))t.AV_FlashOpen.onAdSkipped();this.skipTimerStarted=!1}catch(b){console.log("ckipClick",b)}};a.prototype.phoneClick=function(){console.log("call phone "+
this.config.phone);t.location.href="tel://"+this.config.phone};a.prototype.shareClick=function(){console.log("show share")};a.prototype.playClick=function(){try{this.player&&this.player.ready&&(this.player.resumeAd(),this.paused=!1)}catch(b){}};a.prototype.pauseClick=function(){try{this.player&&this.player.ready&&(this.player.pauseAd(),this.paused=!0)}catch(b){}};a.prototype.playPauseClick=function(){try{this.player&&this.player.ready&&(this.paused?(this.player.resumeAd(),this.paused=!1):(this.player.pauseAd(),
this.paused=!0))}catch(b){}};a.prototype.soundClick=function(){try{this.player&&this.player.ready&&(this.muted?(this.ad&&(this.ad.sndEnabled=!0,this.ad.player&&(this.ad.player.sndEnabled=!0)),this.player.adVolume=1,this.player.volume=1,this.player.muted=!1,"function"===typeof this.player.setContentVolume&&this.player.setContentVolume(1),this.muted=!1):(t.AV_player.config.autosound=!1,this.player.adVolume=0,this.player.volume=0,"function"===typeof this.player.setContentVolume&&this.player.setContentVolume(0),
this.muted=!0))}catch(b){}};a.prototype.setValue=function(a,c){0>c?c=0:1<c&&(c=1);a.style.width=100*c+"%"};a.prototype.fullscreenClick=function(){if(t.AV_player.config.contentplayer){if(t.AV_player.thePlayer&&"function"===typeof t.AV_player.thePlayer.onFullScreenRequest)t.AV_player.thePlayer.onFullScreenRequest(!this.isFullscreen())}else document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():
document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&
document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)};a.prototype.isFullscreen=function(){return this.slotDoc.fullScreenElement||this.slotDoc.mozFullScreenElement||this.slotDoc.webkitFullscreenElement||this.slotDoc.msFullscreenElement};a.prototype.getBuffer=function(a){return a+.1};a.prototype.controls=function(a){a?m(this.container,"hide-controls"):k(this.container,"hide-controls")};a.prototype.update=function(){var a=this.player&&(0<this.player.duration&&null!=this.player.canPlayType||
"Content"==this.player.asid),c=this.getDuration(),e=this.getCurrentTime(),h=this.getRemainingTime();this.vidReady=a||this.player&&this.player.__private__&&this.player.__private__.player&&this.player.__private__.player.impressionSet;"loaded"!=this.videoslot.className&&0<this.getBuffer(e)&&(this.videoslot.className="loaded");this.paused?(this.endTimer=0,1<c&&e>=c||this.player&&this.player.replay?(this.playPause.className="replay",this.lastframe||(this.videoslot.className="av-hidden")):this.playPause.className=
"play"):this.vidReady&&this.player&&1<c&&0<=h&&(e>=c||this.player.replay)?(this.endTimer++,100<this.endTimer&&(this.playPause.className="replay",this.paused=!0)):this.playPause.className="pause";this.sound.firstChild.className=this.muted?"off":"on";if(this.isFullscreen())this.fullscreen.className="on","full"!=t.AV_player.config.fsmode&&(this.container.style.position="absolute",this.container.style.left="0px",this.container.style.top="0px",this.container.style.width=screen.width+"px",this.container.style.height=
screen.height+"px");else{this.fullscreen.className="off";this.container.style.position="";this.container.style.left="";this.container.style.top="";var d=0,u=0;this.config.responsive?(d=this.container.clientWidth,u=this.container.clientHeight):(this.config.width&&(d=this.config.width),this.config.height&&(u=this.config.height));10<d/u&&(u=Math.round(d/10));this.container.style.width=d?d+"px":"";this.container.style.height=u?u+"px":""}this.videoslot.style.width=""==this.container.style.width?""+this.container.clientWidth+
"px":this.container.style.width;this.videoslot.style.height=""==this.container.style.height?""+this.container.clientHeight+"px":this.container.style.height;d=!1;!r&&(.1<e||this.player&&0<h)?d=!0:this.player&&"function"===typeof this.player.isAudioReady?d=this.player.isAudioReady():1<e&&(d=!0);this.fullscreen.style.display=this.config.fullscreen?"inline":"none";this.share.style.display=this.config.share?"inline":"none";this.phone.style.display=this.config.phone?"inline":"none";this.sound.style.display=
this.config.sound&&d?"inline":"none";this.playPause.style.display=this.config.playPause?"inline":"none";this.aniview.style.display=this.config.logo?"inline":"none";h=0<this.config.skipTimer;this.skip.style.display=!a&&!h&&this.config.skip&&this.skipTimerStarted?"inline":"none";this.close.style.display=this.config.close?"inline":"none";this.timer.style.display=!a&&h&&(this.config.close||this.config.skip)&&this.skipTimerInitValue!=this.config.skipTimer?"inline":"none";"none"!=this.timer.style.display&&
"none"!=this.close.style.display&&(this.timer.style.left=""+(this.close.clientWidth+2)+"px");this.setValue(this.timelineProgress,e/c);this.setValue(this.timelineBuffer,this.getBuffer(e)/c)};a.prototype.resize=function(a,c){this.config.width=a;this.config.height=c;this.container.style.width=""+a+"px";this.container.style.height=""+c+"px";if(150>c){a=c/150;this.playPause.style.webkitTransform=this.playPause.style.transform="scale("+a+","+a+")";this.sound.style.webkitTransform=this.sound.style.transform=
"scale("+a+","+a+")";if(c=this.buttons.querySelector("#left"))c.style.left=""+Math.floor(13*a)+"px",c.style.bottom=""+Math.floor(11*a)+"px";if(c=this.buttons.querySelector("#right"))c.style.right=""+Math.floor(13*a)+"px",c.style.bottom=""+Math.floor(11*a)+"px";this.timeline&&"overlay"==this.config.timelineMode&&(this.timeline.style.bottom=""+Math.floor(50*a)+"px");this.config.skip&&(this.skip.style.bottom=""+Math.floor(60*a)+"px",this.skip.style.height=""+Math.floor(32*a)+"px",this.skip.style.fontSize=
""+Math.floor(14*a)+"px",this.skip.style.lineHeight=""+Math.floor(32*a)+"px",this.skip.style.padding="0 0")}else{this.playPause.style.webkitTransform=this.playPause.style.transform="";this.sound.style.webkitTransform=this.sound.style.transform="";if(c=this.buttons.querySelector("#left"))c.style.left="",c.style.bottom="";if(c=this.buttons.querySelector("#right"))c.style.right="",c.style.bottom="";this.timeline&&"overlay"==this.config.timelineMode&&(this.timeline.style.bottom="");this.config.skip&&
(this.skip.style.bottom="",this.skip.style.height="",this.skip.style.fontSize="",this.skip.style.lineHeight="",this.skip.style.padding="")}};a.prototype.showTimeline=function(a){if(a){a="av-"+this.config.timelineMode;var b="av-hidden"}else b="av-"+this.config.timelineMode,a="av-hidden";m(this.timeline,b);k(this.timeline,a)}})(window);
(function(t){"object"===typeof exports&&"undefined"!==typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).AV_VASTPlayer=t()})(function(){return function k(m,r,a){function b(e,d){if(!r[e]){if(!m[e]){var h="function"==typeof require&&require;if(!d&&h)return h(e,!0);if(c)return c(e,!0);d=Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d;}d=r[e]=
{exports:{}};m[e][0].call(d.exports,function(a){var c=m[e][1][a];return b(c?c:a)},d,d.exports,k,m,r,a)}return r[e].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)b(a[e]);return b}({1:[function(k,m,r){m.exports=k("./lib/AV_VASTPlayer")},{"./lib/AV_VASTPlayer":5}],2:[function(k,m,r){function a(a,b,c){b.on(a,function(){for(var b=[],e=arguments.length;e--;)b[e]=arguments[e];c.emit.apply(c,[a].concat(b))})}function b(b,c,d){d.forEach(function(e){0<c.listeners(e).length&&a(e,b,
c)});c.on("newListener",function(e){-1<d.indexOf(e)&&1>c.listeners(e).length&&a(e,b,c)})}function c(a){this.events=a.slice();this.__private__={target:null,source:null}}c.prototype.from=function(a){this.__private__.source=a;this.__private__.target&&b(a,this.__private__.target,this.events);return this};c.prototype.to=function(a){this.__private__.target=a;this.__private__.source&&b(this.__private__.source,a,this.events);return this};m.exports=c},{}],3:[function(k,m,r){function a(a){var e=this;b.call(this,
Math.floor(a.duration||0));this.video=a;[c.PLAYING,c.PAUSE,c.TIMEUPDATE,c.ENDED].forEach(function(b){return a.addEventListener(b,function(){return e.tick(b==c.ENDED)},!1)})}var b=k("./VideoTracker");r=k("util").inherits;var c=k("./enums/HTML_MEDIA_EVENTS");r(a,b);a.prototype._getState=function(){return{playing:!this.video.paused,currentTime:this.video.currentTime}};m.exports=a},{"./VideoTracker":7,"./enums/HTML_MEDIA_EVENTS":8,util:25}],4:[function(k,m,r){function a(a){return a}function b(a,b,c,e,
k){try{(a||[]).forEach(function(a){try{if(2==a.t){var d=document.createElement("script");d.src=a.uri;k&&k.appendChild(d)}else{var h=Utils.flashInstalled();if("https:"==window.location.protocol&&h&&window.AV_player.config.flashsslproxy&&window.AV_player.useFlashProxy){var g=b(a.uri);setTimeout(function(){"undefined"!==typeof g&&g&&5<g.length&&(g=g.trim(),window.AniFlashProxy.request(g,"GET",function(){}))},10)}else(new ("complete"==c&&"1"==e?parent:window).Image).src=b(a.uri)}}catch(D){}})}catch(w){}}
function c(b,c){this.pixels=b.reduce(function(a,b){(a[b.event]||(a[b.event]=[])).push({uri:b.uri,t:b.t?b.t:1});return a},{});this.__private__={mapper:c||a}}var e=k("./enums/VPAID_EVENTS");c.prototype.track=function(c){function d(a){if(!r)try{r=c.adDuration,(!r||0>=r)&&a&&(r=c.adRemainingTime),0>r&&(r=0)}catch(D){r=0}return r}function h(c,e,d){function g(b){return m((e||a)(b))}return function(){d&&!d()||b(k[c],g,c,this&&this.tgt,this&&this.container)}}function l(a){a=a.replace("[AV_VIEWABILITY]",Utils.getViewabilityPerc(window.AV_player.config.slot));
return a.replace("[AV_ADDURATION]",d(!0))}var k=this.pixels,m=this.__private__.mapper,C=0;try{C=c.adVolume}catch(g){}var r=0;c.fireType=function(a){h(a,function(a){return a.replace("[AV_VIEWABILITY]",Utils.getViewabilityPerc(window.AV_player.config.slot))})()};c.on(e.AdSkipped,h("skip"));c.on(e.AdStarted,h("creativeView"));c.on(e.AdVolumeChange,h("unmute",null,function(){try{return 0===C&&0<c.adVolume}catch(g){}}));c.on(e.AdVolumeChange,h("mute",null,function(){try{return 0<C&&0===c.adVolume}catch(g){}}));
c.on(e.AdImpression,h("impression",function(a){return l(a)},function(){c.impEvtSent=!0;d();return!0}));c.on(e.AdVideoStart,h("start",null,function(){try{if(c.stickyImpression&&!c.impEvtSent){var a=h("impression");a&&a();c.impEvtSent=!0}}catch(D){}return!0}));c.on(e.AdVideoFirstQuartile,h("firstQuartile",function(a){return l(a)}));c.on(e.AdVideoMidpoint,h("midpoint",function(a){return l(a)}));c.on(e.AdVideoThirdQuartile,h("thirdQuartile",function(a){return l(a)}));c.on(e.AdVideoComplete,h("complete",
function(a){return l(a)}));c.on(e.AdClickThru,h("clickThrough"));c.on(e.AdUserAcceptInvitation,h("acceptInvitationLinear"));c.on(e.AdUserMinimize,h("collapse"));c.on(e.AdUserClose,h("closeLinear"));c.on(e.AdPaused,h("pause"));c.on(e.AdPlaying,h("resume"));c.on(e.AdError,h("error",function(a){return a.replace(/\[ERRORCODE\]/g,901)}));c.on(e.AdVolumeChange,function(){try{C=c.adVolume}catch(g){}})};m.exports=c},{"./enums/VPAID_EVENTS":10}],5:[function(k,m,r){function a(){var b={},c=arguments.length,
g,e;for(g=0;g<c;g++){var d=arguments[g]||{};for(e in d){var h=d[e];void 0===b[e]&&(b[e]=h);"object"===typeof h&&(b[e]=a(b[e],h))}}return b}function b(a){return a}function c(){return Error("AV_VASTPlayer not ready.")}function e(a){return function(){var b=this,p=this.__private__.player;return this.ready?p[a].apply(p,arguments).then(function(){return b}):z.reject(c())}}function h(a){return{get:function(){if(!this.ready)throw c();return this.__private__.player[a]},set:function(b){if(!this.ready)throw c();
return this.__private__.player[a]=b}}}function d(c,e,d){var p=this;u.call(this);this.__private__={container:c,config:a(d,{vast:{resolveWrappers:!0,maxRedirects:8,withCredentials:!0},tracking:{mapper:b}}),vast:null,ready:!1,player:null};this.on(g.AdClickThru,function(a,b,c){a=a||p.vast.get("ads[0].creatives[0].videoClicks.clickThrough");c&&a&&!e&&window.open(a)})}var u=k("events").EventEmitter;r=k("util").inherits;var l=k("vastacular").VAST,x=k("./players/JavaScriptVPAID"),w=k("./players/FlashVPAID"),
C=k("./players/HTMLVideo"),I=k("./enums/MIME"),g=k("./enums/VPAID_EVENTS"),D=k("./EventProxy"),z=k("lie"),E=k("./PixelReporter");r(d,u);Object.defineProperties(d.prototype,{container:{get:function(){return this.__private__.container}},config:{get:function(){return this.__private__.config}},vast:{get:function(){return this.__private__.vast}},ready:{get:function(){return this.__private__.ready}},adRemainingTime:h("adRemainingTime"),adDuration:h("adDuration"),adVolume:h("adVolume"),adSkippableState:h("adSkippableState")});
d.prototype.dispatchTrackingPixel=function(a){var b=document.createElement("img");b.src=a+"&cb="+Date.now();b.style.display="none";b.style.width="1";document.body.appendChild(b)};d.prototype.mergeTrackers=function(a,b,c){function p(a){return a.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g,"")}if(b)for(var g=0;g<b.length;g++)"click"==b[g].e&&(b[g].e="clickThrough"),a.push({event:b[g].e,t:b[g].t?b[g].t:1,uri:b[g].url});if(c.trackers)for(g=0;g<c.trackers.length;g++)"click"==c.trackers[g].e&&(c.trackers[g].e=
"clickThrough"),a.push({event:c.trackers[g].e,t:c.trackers[g].t?c.trackers[g].t:1,uri:c.trackers[g].url});b="&cb="+Date.now();c.impressionTrackingPixel&&a.push({event:"impression",uri:p(c.impressionTrackingPixel)+"&ad=[AV_ADDURATION]&vi=[AV_VIEWABILITY]"+b});c.trackingPixel&&(c=p(c.trackingPixel),a.push({event:"clickThrough",uri:c+"click"+b}),a.push({event:"firstQuartile",uri:c+"firstQuartile&ad=[AV_ADDURATION]&vi=[AV_VIEWABILITY]"+b}),a.push({event:"midpoint",uri:c+"midpoint&ad=[AV_ADDURATION]&vi=[AV_VIEWABILITY]"+
b}),a.push({event:"thirdQuartile",uri:c+"thirdQuartile&ad=[AV_ADDURATION]&vi=[AV_VIEWABILITY]"+b}),a.push({event:"complete",uri:c+"complete&ad=[AV_ADDURATION]&vi=[AV_VIEWABILITY]"+b}),a.push({event:"start",uri:c+"start"+b}),a.push({event:"pause",uri:c+"pause"+b}),a.push({event:"resume",uri:c+"resume"+b}),a.push({event:"mute",uri:c+"mute"+b}),a.push({event:"unmute",uri:c+"unmute"+b}),a.push({event:"close",uri:c+"close"+b}),a.push({event:"creativeView",uri:c+"creativeView"+b}),a.push({event:"fullscreen",
uri:c+"fullscreen"+b}),a.push({event:"sec3",uri:c+"sec3&vi=[AV_VIEWABILITY]"+b}),a.push({event:"sec10",uri:c+"sec10&vi=[AV_VIEWABILITY]"+b}));return a};d.prototype.detectFlash=function(){var a,b=!1;if(window.navigator&&window.navigator.plugins&&0<window.navigator.plugins.length)window.navigator.mimeTypes&&(a=window.navigator.mimeTypes["application/x-shockwave-flash"]),a&&a.enabledPlugin&&a.enabledPlugin.description&&(b=!0);else{try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(R){c=
{activeXError:!0}}c.activeXError||(b=!0)}return b};d.prototype.load=function(a,b,c,e,h){var p=this,q=this.config.vast,k=this,u=a.fixedUrl||a.url;a.playerSettings&&a.playerSettings.nc&&(q.withCredentials=!1);c=c||[];var m=[];if("undefined"===typeof b||null==b||"undefined"===typeof b.js)b={vpaidPriority:"js",swf:!0,js:!0,html5:!0};a.type=a.type.toLowerCase();"vastxml"==a.type&&(u=a.vastxml);"pl"==a.type&&(u=a.template);var N=b.vpaidPriority;a.vpp&&(1==a.vpp?N="js":2==a.vpp&&(N="swf"));return l.fetch(u,
q,a.clickThroughUrl,a.type,function(a,b){m="object"===typeof b?b.raw:m},a).then(function(e){var q=function(){var a=e.filter("ads[0].creatives[0].mediaFiles",function(a){return("video/mp4"===a.type||"video/webm"===a.type||(Utils.isMobile()?"video/x-flv"===a.type:!1)||"video/3gpp"===a.type||"video/x-ms-wmv"===a.type)&&a.uri&&"rtmp"!=a.uri.substring(0,4)}),c=e.filter("ads[0].creatives[0].mediaFiles",function(a){return(a.type===I.JAVASCRIPT||"application/x-javascript"===a.type)&&"string"===typeof a.apiFramework&&
"VPAID"==a.apiFramework.toUpperCase()}),g=e.filter("ads[0].creatives[0].mediaFiles",function(a){return a.type===I.FLASH&&"string"===typeof a.apiFramework&&"VPAID"==a.apiFramework.toUpperCase()}),h=[];b.nljs&&(h=e.filter("ads[0].creatives[0].ads[0].resources",function(a){return a.creativeType===I.JAVASCRIPT||"application/x-javascript"===a.creativeType}));if(b.html5&&0<a.length)return{player:new C(p.container),mediaFiles:a};if(b.js&&"js"==N&&(!window.AV_player.config.flashsslproxy||!window.AV_player.useFlashProxy)&&
0<c.length)return{player:new x(p.container),mediaFiles:c};if(b.swf&&0<g.length&&p.detectFlash())return{player:new w(p.container,d.vpaidSWFLocation),mediaFiles:g};if(b.js&&0<c.length)return{player:new x(p.container),mediaFiles:c};if(b.nljs&&0<h.length)return h[0].uri=h[0].data,{player:new x(p.container),mediaFiles:h};throw TypeError("no valid media");}(),l=e.get("ads[0].creatives[0].parameters"),u=[].concat(e.map("ads[0].impressions",function(a){return{event:"impression",uri:a.uri}}),e.map("ads[0].errors",
function(a){return{event:"error",uri:a}}),e.get("ads[0].creatives[0].trackingEvents"),e.map("ads[0].creatives[0].videoClicks.clickTrackings",function(a){return{event:"clickThrough",uri:a}}));a.asid||"s2s"!=a.type||(a.asid=e.get("ads[0].extensions[0].extension[0].tag.data.tags[0].asid"),a.priority=e.get("ads[0].extensions[0].extension[0].tag.data.tags[0].priority"));u=p.mergeTrackers(u,c,a);var m=q.player;q=q.mediaFiles;var z=new D(g);m.reporter=new E(u,p.config.tracking.mapper);m.timeouts.loadTimeout=
a.loadTimeout||m.timeouts.loadTimeout;m.timeouts.initAdTimeout=a.initAdTimeout||a.tagTimeout;m.timeouts.startAdTimeout=a.startAdTimeout||a.tagTimeout;m.tgt=h;z.from(m).to(p);p.__private__.vast=e;p.__private__.player=m;p.emit("AdBid",m,q,l,k,a);m.dispatchWaterfallApiEvent("bid",m.asid,{vast:e.raw})}).then(function(){p.__private__.ready=!0;p.emit("ready");return p}).catch(function(b){"function"===typeof e&&e("vasterror",a.asid,{vast:m,message:"object"===typeof b?b.message:""});p.emit("error",b);throw b;
})};d.prototype.startAd=e("startAd");d.prototype.stopAd=e("stopAd");d.prototype.pauseAd=e("pauseAd");d.prototype.resumeAd=e("resumeAd");d.prototype.skipAd=e("skipAd");d.prototype.getAdSkippableState=e("getAdSkippableState");d.prototype.seekAd=e("seekAd");d.vpaidSWFLocation="https://cdn.jsdelivr.net/vast-player/0.2.9/vast-player--vpaid.swf";m.exports=d},{"./EventProxy":2,"./PixelReporter":4,"./enums/MIME":9,"./enums/VPAID_EVENTS":10,"./players/FlashVPAID":12,"./players/HTMLVideo":13,"./players/JavaScriptVPAID":14,
events:18,lie:26,util:25,vastacular:30}],6:[function(k,m,r){function a(a){a=""+a;var b=a.split(".").map(parseFloat);this.string=a;this.major=b[0];this.minor=b[1];this.patch=b[2];Object.freeze(this)}a.prototype.toString=function(){return this.string};m.exports=a},{}],7:[function(k,m,r){function a(a,b){b.fired[a]||(b.fired[a]=!0,b.emit(a))}function b(a){c.apply(this,arguments);this.duration=a;this.seconds=Array.apply([],Array(a)).map(function(){return!1});this.fired=[e.AdVideoStart,e.AdVideoFirstQuartile,
e.AdVideoMidpoint,e.AdVideoThirdQuartile,e.AdVideoComplete].reduce(function(a,b){a[b]=!1;return a},{})}var c=k("events").EventEmitter;r=k("util").inherits;var e=k("./enums/VPAID_EVENTS");r(b,c);b.prototype.tick=function(b){function c(a){return h.currentTime>=k[a-1]?!0:!1}var h=this._getState(),l=Math.round(h.currentTime)-1,k=[1,2,3,4].map(function(a){return 10>this.duration?Math.floor(this.video.duration/4*a*10)/10:Math.floor(this.duration/4*a)},this);h.playing&&a(e.AdVideoStart,this);-1<l&&(this.seconds[l]=
!0);c(1)&&a(e.AdVideoFirstQuartile,this);c(2)&&a(e.AdVideoMidpoint,this);c(3)&&a(e.AdVideoThirdQuartile,this);(c(4)||b)&&a(e.AdVideoComplete,this)};m.exports=b},{"./enums/VPAID_EVENTS":10,events:18,util:25}],8:[function(k,m,r){k="abort canplay canplaythrough durationchange emptied encrypted ended error interruptbegin interruptend loadeddata loadedmetadata loadstart mozaudioavailable pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");k.forEach(function(a){this[a.toUpperCase()]=
a},k);Object.freeze(k);m.exports=k},{}],9:[function(k,m,r){k={JAVASCRIPT:"application/javascript",FLASH:"application/x-shockwave-flash"};Object.freeze(k);m.exports=k},{}],10:[function(k,m,r){var a="AdLoaded AdStarted AdStopped AdSkipped AdSkippableStateChange AdSizeChange AdLinearChange AdDurationChange AdExpandedChange AdRemainingTimeChange AdVolumeChange AdImpression AdVideoStart AdVideoFirstQuartile AdVideoMidpoint AdVideoThirdQuartile AdVideoComplete AdClickThru AdInteraction AdUserAcceptInvitation AdUserMinimize AdUserClose AdPaused AdPlaying AdLog AdBid AdError".split(" ");
a.forEach(function(b){a[b]=b});Object.freeze(a);m.exports=a},{}],11:[function(k,m,r){var a=k("./window"),b=document.createElement("video"),c=AniviewImagePlayer.createAniviewVideoTag(),e=k("./enums/MIME");r.isDesktop=!/Android|Silk|Mobile|PlayBook/.test(a.navigator.userAgent);r.canPlay=function(h){var d=a.navigator.mimeTypes,k=a.ActiveXObject;switch(h){case e.FLASH:try{return new k("ShockwaveFlash.ShockwaveFlash"),2}catch(l){return d&&d[e.FLASH]?2:0}case e.JAVASCRIPT:case "application/x-javascript":return 2;
default:d=c;if(window.Utils&&!window.Utils.isMobile()||window.AV_player&&window.AV_player.config&&window.AV_player.config.nativevideo)d=b;if(d.canPlayType)switch(d.canPlayType(h)){case "probably":return 2;case "maybe":return 1}}return 0};Object.freeze(r)},{"./enums/MIME":9,"./window":17}],12:[function(k,m,r){function a(a,c){b.apply(this,arguments);this.dispatchWaterfallApiEvent=function(){};this.swfURI=c;this.object=null;this.active=!0;this.timeouts={loadTimeout:1E4,initAdTimeout:4E4,startAdTimeout:3E4};
!(this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)||/CriOS/.test(navigator.userAgent))||"5856b4b128a061375a59c793"!=window.AV_player.config.channelid&&"57b014fc0857bb21508b45bb"!=window.AV_player.config.channelid||(this.noscale=!0);this.noscale=!0}var b=k("./VPAID");r=k("util").inherits;var c=k("lie"),e=k("../uuid"),h=k("querystring"),d=k("../enums/VPAID_EVENTS"),u=k("../VPAIDVersion"),l=k("VPAID_ERRORS");r(a,b);a.prototype.load=function(a,b,k,m){var g=this,x=
a[0].uri;g.trackingPixel=m;var z=function(){function a(){if(!v&&I.document.getElementsByTagName("body")[0]){try{var a=A.createElement("span");a.style.display="none";var b=A.getElementsByTagName("body")[0].appendChild(a);b.parentNode.removeChild(b)}catch(F){return}v=!0;b=y.length;for(a=0;a<b;a++)y[a]()}}function b(a){v?a():y[y.length]=a}function c(){var a=A.getElementsByTagName("body")[0],b=A.createElement("object");b.setAttribute("style","visibility: hidden;");b.setAttribute("type","application/x-shockwave-flash");
var f=a.appendChild(b);if(f){var c=0;(function oa(){if("undefined"!=typeof f.GetVariable)try{var p=f.GetVariable("$version");p&&(p=p.split(" ")[1].split(","),B.pv=[parseInt(p[0],10),parseInt(p[1],10),parseInt(p[2],10)])}catch(fa){B.pv=[8,0,0]}else if(10>c){c++;setTimeout(oa,10);return}a.removeChild(b);f=null;g()})()}else g()}function g(){var a=O.length;if(0<a)for(var b=0;b<a;b++){var f=O[b].id,c=O[b].callbackFn,g={success:!1,id:f};if(0<B.pv[0]){var p=u(f);if(p)if(!r(O[b].swfVersion)||B.wk&&312>B.wk)if(O[b].expressInstall&&
d()){g={};g.data=O[b].expressInstall;g.width=p.getAttribute("width")||"0";g.height=p.getAttribute("height")||"0";p.getAttribute("class")&&(g.styleclass=p.getAttribute("class"));p.getAttribute("align")&&(g.align=p.getAttribute("align"));var n={};p=p.getElementsByTagName("param");for(var q=p.length,G=0;G<q;G++)"movie"!=p[G].getAttribute("name").toLowerCase()&&(n[p[G].getAttribute("name")]=p[G].getAttribute("value"));h(g,n,f,c)}else f=p,B.ie&&4!=f.readyState?(f.style.display="none",n=A.createElement("div"),
f.parentNode.insertBefore(n,f),n.parentNode.replaceChild(l(f),n),E(f)):f.parentNode.replaceChild(l(f),f),c&&c(g);else w(f,!0),c&&(g.success=!0,g.ref=e(f),g.id=f,c(g))}else w(f,!0),c&&((f=e(f))&&"undefined"!=typeof f.SetVariable&&(g.success=!0,g.ref=f,g.id=f.id),c(g))}}function e(a){var b=null;(a=u(a))&&"OBJECT"===a.nodeName.toUpperCase()&&(b="undefined"!==typeof a.SetVariable?a:a.getElementsByTagName("object")[0]||a);return b}function d(){return!aa&&r("6.0.65")&&(B.win||B.mac)&&!(B.wk&&312>B.wk)}
function h(a,b,f,c){var g=u(f);f=m(f);aa=!0;Y=c||null;Z={success:!1,id:f};if(g){"OBJECT"==g.nodeName.toUpperCase()?(ja=l(g),ka=null):(ja=g,ka=f);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";c=B.ie?"ActiveX":"PlugIn";c="MMredirectURL="+encodeURIComponent(I.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+c+"&MMdoctitle="+encodeURIComponent(A.title.slice(0,
47)+" - Flash Player Installation");b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+c):c;B.ie&&4!=g.readyState&&(c=A.createElement("div"),f+="SWFObjectNew",c.setAttribute("id",f),g.parentNode.insertBefore(c,g),g.style.display="none",E(g));k(a,b,f)}}function l(a){var b=A.createElement("div");if(B.win&&B.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var f=a.length,c=0;c<f;c++)1==a[c].nodeType&&"PARAM"==a[c].nodeName||8==a[c].nodeType||b.appendChild(a[c].cloneNode(!0));
return b}function k(a,b,c){var g=u(c);c=m(c);if(B.wk&&312>B.wk)return p;if(g){var p=B.ie?A.createElement("div"):A.createElement("object");var e;"undefined"==typeof a.id&&(a.id=c);for(q in b)if(b.hasOwnProperty(q)&&"movie"!==q.toLowerCase()){c=p;var d=q,h=b[q],n=A.createElement("param");n.setAttribute("name",d);n.setAttribute("value",h);c.appendChild(n)}if(B.ie){b=a.data;p=p.innerHTML;var q=A.createElement("div");q.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+
b+"'>"+p+"</object>";p=q.firstChild}for(e in a)a.hasOwnProperty(e)&&(b=e.toLowerCase(),"styleclass"===b?p.setAttribute("class",a[e]):"classid"!==b&&"data"!==b&&p.setAttribute(e,a[e]));B.ie?f[f.length]=a.id:(p.setAttribute("type","application/x-shockwave-flash"),p.setAttribute("data",a.data));g.parentNode.replaceChild(p,g)}return p}function E(a){var b=u(a);b&&"OBJECT"==b.nodeName.toUpperCase()&&(B.ie?(b.style.display="none",function qa(){if(4==b.readyState){for(var a in b)"function"==typeof b[a]&&
(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(qa,10)}()):b.parentNode.removeChild(b))}function m(a){return a&&a.nodeType&&1===a.nodeType?a.id:a}function u(a){if(a&&a.nodeType&&1===a.nodeType)return a;var b=null;try{b=A.getElementById(a)}catch(F){}return b}function x(a,b,f){a.attachEvent(b,f);n[n.length]=[a,b,f]}function r(a){var b=B.pv;a=(a+"").split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==
a[1]&&b[2]>=a[2]?!0:!1}function C(a,b,f,c){var g=A.getElementsByTagName("head")[0];g&&(f="string"==typeof f?f:"screen",c&&(G=P=null),P&&G==f||(c=A.createElement("style"),c.setAttribute("type","text/css"),c.setAttribute("media",f),P=g.appendChild(c),B.ie&&"undefined"!=typeof A.styleSheets&&0<A.styleSheets.length&&(P=A.styleSheets[A.styleSheets.length-1]),G=f),P&&("undefined"!=typeof P.addRule?P.addRule(a,b):"undefined"!=typeof A.createTextNode&&P.appendChild(A.createTextNode(a+" {"+b+"}"))))}function w(a,
b){if(U){b=b?"visible":"hidden";var f=u(a);v&&f?f.style.visibility=b:"string"===typeof a&&C("#"+a,"visibility:"+b)}}function D(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var I=window.AV_player.slotWindow,A=I.document,Q=navigator,W=!1,y=[],O=[],f=[],n=[],ja,ka,Y,Z,v=!1,aa=!1,P,G,U=!0,X=!1,B=function(){var a="undefined"!=typeof A.getElementById&&"undefined"!=typeof A.getElementsByTagName&&"undefined"!=typeof A.createElement,b=Q.userAgent.toLowerCase(),
f=Q.platform.toLowerCase(),c=f?/win/.test(f):/win/.test(b);f=f?/mac/.test(f):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var g="Microsoft Internet Explorer"===Q.appName,p=[0,0,0],e=null;if("undefined"!=typeof Q.plugins&&"object"==typeof Q.plugins["Shockwave Flash"])(e=Q.plugins["Shockwave Flash"].description)&&"undefined"!=typeof Q.mimeTypes&&Q.mimeTypes["application/x-shockwave-flash"]&&Q.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&
(W=!0,g=!1,e=e.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),p[0]=parseInt(e.replace(/^(.*)\..*$/,"$1"),10),p[1]=parseInt(e.replace(/^.*\.(.*)\s.*$/,"$1"),10),p[2]=/[a-zA-Z]/.test(e)?parseInt(e.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof I.ActiveXObject)try{if(e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))g=!0,e=e.split(" ")[1].split(","),p=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}catch(fa){}return{w3:a,pv:p,wk:b,ie:g,win:c,mac:f}}();(function(){B.w3&&
(("undefined"!=typeof A.readyState&&("complete"===A.readyState||"interactive"===A.readyState)||"undefined"==typeof A.readyState&&(A.getElementsByTagName("body")[0]||A.body))&&a(),v||("undefined"!=typeof A.addEventListener&&A.addEventListener("DOMContentLoaded",a,!1),B.ie&&(A.attachEvent("onreadystatechange",function da(){"complete"==A.readyState&&(A.detachEvent("onreadystatechange",da),a())}),I==top&&function F(){if(!v){try{A.documentElement.doScroll("left")}catch(qa){setTimeout(F,0);return}a()}}()),
B.wk&&function da(){v||(/loaded|complete/.test(A.readyState)?a():setTimeout(da,0))}()))})();y[0]=function(){W?c():g()};(function(){B.ie&&window.attachEvent("onunload",function(){for(var a=n.length,b=0;b<a;b++)n[b][0].detachEvent(n[b][1],n[b][2]);a=f.length;for(b=0;b<a;b++)E(f[b]);for(var c in B)B[c]=null;B=null;for(var g in z)z[g]=null;z=null})})();return{registerObject:function(a,b,f,c){if(B.w3&&a&&b){var g={};g.id=a;g.swfVersion=b;g.expressInstall=f;g.callbackFn=c;O[O.length]=g;w(a,!1)}else c&&
c({success:!1,id:a})},getObjectById:function(a){if(B.w3)return e(a)},embedSWF:function(a,f,c,g,p,e,n,q,l,G){var E=m(f),P={success:!1,id:E};B.w3&&!(B.wk&&312>B.wk)&&a&&f&&c&&g&&p?(w(E,!1),b(function(){c+="";g+="";var b={};if(l&&"object"===typeof l)for(var B in l)b[B]=l[B];b.data=a;b.width=c;b.height=g;B={};if(q&&"object"===typeof q)for(var m in q)B[m]=q[m];if(n&&"object"===typeof n)for(var U in n)if(n.hasOwnProperty(U)){m=X?encodeURIComponent(U):U;var u=X?encodeURIComponent(n[U]):n[U];B.flashvars=
"undefined"!=typeof B.flashvars?B.flashvars+("&"+m+"="+u):m+"="+u}if(r(p))U=k(b,B,f),b.id==E&&w(E,!0),P.success=!0,P.ref=U,P.id=U.id;else{if(e&&d()){b.data=e;h(b,B,f,G);return}w(E,!0)}G&&G(P)})):G&&G(P)},switchOffAutoHideShow:function(){U=!1},enableUriEncoding:function(a){X="undefined"===typeof a?!0:a},ua:B,getFlashPlayerVersion:function(){return{major:B.pv[0],minor:B.pv[1],release:B.pv[2]}},hasFlashPlayerVersion:r,createSWF:function(a,b,f){if(B.w3)return k(a,b,f)},showExpressInstall:function(a,b,
f,c){B.w3&&d()&&h(a,b,f,c)},removeSWF:function(a){B.w3&&E(a)},createCSS:function(a,b,f,c){B.w3&&C(a,b,f,c)},addDomLoadEvent:b,addLoadEvent:function(a){if("undefined"!=typeof I.addEventListener)I.addEventListener("load",a,!1);else if("undefined"!=typeof A.addEventListener)A.addEventListener("load",a,!1);else if("undefined"!=typeof I.attachEvent)x(I,"onload",a);else if("function"==typeof I.onload){var b=I.onload;I.onload=function(){b();a()}}else I.onload=a},getQueryParamValue:function(a){var b=A.location.search||
A.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return D(b);b=b.split("&");for(var f=0;f<b.length;f++)if(b[f].substring(0,b[f].indexOf("="))==a)return D(b[f].substring(b[f].indexOf("=")+1))}return""},expressInstallCallback:function(){if(aa){var a=u("SWFObjectExprInst");a&&ja&&(a.parentNode.replaceChild(ja,a),ka&&(w(ka,!0),B.ie&&(ja.style.display="block")),Y&&Y(Z));aa=!1}},version:"2.3"}}(),E=a[0].bitrate;return new c(function(a,c){var p="vastPlayerCallback"+e(20),k=h.stringify({vpaidURI:x.trim(),
eventCallback:p});window.vastPlayerCallback=function(a){};g.cleanup=function(a){g.object&&g.object.parentNode===g.container&&g.container.removeChild(g.object);g.api=null;g.object=null;delete window[p];g.cleanTimers();a&&c(a)};var m=window.AV_player.slotWindow.document.createElement("object");m.id="aniJStoFlashPlayer"+Date.now();var N={vpaidURI:encodeURIComponent(x.trim()),eventCallback:p},w={wmode:"opaque",movie:g.swfURI,play:!1,loop:!1,scale:"noscale",salign:"lt",allowScriptAccess:"always"},r="100%",
C="100%",D="";if(!Utils.isMobile()&&"chrome"==Utils.getBrowser()&&1==window.AV_player.config.flashscale){var I=window.AV_player.config.width,S=window.AV_player.config.height,K=1,H=1;if(600>I||500>S)K=H=Math.min(I/600,S/500),r=I/K+"px",C=S/H+"px",D="-webkit-transform: scale("+K+", "+H+"); transform: scale("+K+", "+H+"); -webkit-transform-origin: left top 0px; transform-origin: left top 0px; visibility: visible; opacity: 1;"}D={style:"width="+r+";height="+C+";border=none;opacity=0;"+D};window.AV_player.slotWindow[p]=
function(a){try{switch(Utils.writeLog(Utils.logLevels.debug,"FlashVpaid event "+a.type+":"+g.asid),a.type){case d.AdClickThru:return g.emit(a.type,a.url,a.Id,a.playerHandles);case d.AdInteraction:case d.AdLog:return g.emit(a.type,a.Id);case d.AdError:return g.emit(a.type,a.message);case "VPAIDInterfaceReady":return g.emit(a.type);case d.AdLoaded:return g.emit(a.type);case d.AdStarted:return g.emit(a.type);case d.AdStopped:if(g.active)return g.emit(a.type);break;case d.AdUserClose:return g.emit(d.AdSkipped);
default:return g.emit(a.type)}}catch(M){}};g.once("VPAIDInterfaceReady",function(){clearTimeout(g.timeouts.loadTimer);g.timeouts.loadTimer=0;g.container.style.top="";g.container.style.width=""+window.AV_player.config.width+"px";g.container.style.height=""+window.AV_player.config.height+"px";var a=m.getBoundingClientRect(),p=g.vpaidVersion=new u(m.handshakeVersion("2.0"));if(2<p.major)return c(Error("VPAID version "+p+" is not supported."));g.on("VPAIDInterfaceResize",function(){var a=m.getBoundingClientRect();
g.resizeAd(a.width,a.height,"normal")});setTimeout(function(){g.timeouts.initAdTimer=setTimeout(function(){g.stateError=l.noError;g.fireTrackingPixel(g.trackingPixel+l.vpaidInitAdTimeout);Utils.writeLog(Utils.logLevels.debug,"FlashVpaid initAd timeout:"+g.asid);g.dispatchWaterfallApiEvent(l.vpaidInitAdTimeout,g.asid);g.active=!1;g.stopAd();g.emit(d.AdError,l.vpaidInitAdTimeout)},g.timeouts.initAdTimeout);window.AV_player.slotWindow.focus();Utils.writeLog(Utils.logLevels.debug,"FlashVpaid command initAd: "+
g.asid);g.timeouts.initAdTime=Date.now();g.fireTrackingPixel(g.trackingPixel+"initAd",!0);g.stateError=l.vpaidInitAdError;try{m.initAd(a.width,a.height,"normal",E,b,null),g.dispatchWaterfallApiEvent("initAd",g.asid)}catch(ra){}window.AV_player.slotWindow.focus()},10)});g.once(d.AdLoaded,function(){g.fireTrackingPixel(g.trackingPixel+d.AdLoaded+"&ti="+(Date.now()-g.timeouts.initAdTime));g.dispatchWaterfallApiEvent(d.AdLoaded,g.asid);g.timeouts.startAdTime=Date.now();g.api=m;m.style.opacity="1";clearTimeout(g.timeouts.initAdTimer);
g.timeouts.initAdTimer=0;a(g)});g.once(d.AdError,function(a){g.stateError!=l.noError&&g.fireTrackingPixel(g.trackingPixel+g.stateError);g.cleanup(Error(a))});g.once(d.AdStopped,g.cleanup);g.container.appendChild(m);Utils.writeLog(Utils.logLevels.debug,"FlashVpaid command load: "+g.asid);g.noscale&&(g.container.style.top="-100000px",g.swfURI=window.AV_player.config.basejsurl+"player.swf");z.embedSWF(g.swfURI+"?"+k,m.id,r,C,"9",window.AV_player.config.basejsurl+"expressInstall.swf",N,w,D,function(a){a.success&&
(m=g.object=a.ref)});g.timeouts.loadTimer=setTimeout(function(){g.stateError=l.noError;g.fireTrackingPixel(g.trackingPixel+l.vpaidLoadTimeout);Utils.writeLog(Utils.logLevels.debug,"FlashVpaid load timeout:"+g.asid);g.dispatchWaterfallApiEvent(l.vpaidLoadTimeout,g.asid);g.active=!1;g.stopAd();g.emit(d.AdError,l.vpaidLoadTimeout)},g.timeouts.loadTimeout)})};a.prototype.start=function(){var a=this;a.stateError=l.vpaidStartAdError;a.once(d.AdImpression,function(){a.fireTrackingPixel(a.trackingPixel+d.AdImpression+
"&ti="+(Date.now()-a.timeouts.startAdTime),!1,!0);clearTimeout(a.timeouts.startAdTimer);a.timeouts.startAdTimer=0;a.stateError=l.vpaidPlayError;if(a.api){var b=a.api.getBoundingClientRect();a.resizeAd(b.width,b.height,"normal")}});a.timeouts.startAdTimer=setTimeout(function(){a.stateError=l.noError;a.fireTrackingPixel(a.trackingPixel+l.vpaidStartAdTimeout);Utils.writeLog(Utils.logLevels.debug,"FlashVpaid startAd timeout:"+a.asid);a.dispatchWaterfallApiEvent(l.vpaidStartAdTimeout,a.asid);a.active=
!1;a.stopAd();a.emit(d.AdError,l.vpaidStartAdTimeout)},a.timeouts.startAdTimeout);Utils.writeLog(Utils.logLevels.debug,"FlashVpaid command startAd: "+a.asid);a.timeouts.startAdTime=Date.now();a.fireTrackingPixel(a.trackingPixel+"startAd",!0);try{a.adVolume=0}catch(w){}a.startAd();a.dispatchWaterfallApiEvent("startAd",a.asid)};m.exports=a},{"../VPAIDVersion":6,"../enums/VPAID_EVENTS":10,"../uuid":16,"./VPAID":15,lie:26,querystring:23,util:25,VPAID_ERRORS:48}],13:[function(k,m,r){function a(a,b,c){return a.addEventListener(b,
c,!1)}function b(b,c,g){return a(b,c,function N(){b.removeEventListener(c,N,!1);return g.apply(this,arguments)})}function c(a,b){function c(){return Error("The <video> has not been loaded.")}return function(){if(!this.video){if(b)return u.reject(c());throw c();}return a.apply(this,arguments)}}function e(a,b){var c=b.width;a=a.map(function(a){return{mediaFile:a,playability:l(a.type)}}).filter(function(a){return 0<a.playability}).sort(x("-playability","-mediaFile.bitrate"));b=a.map(function(a){return Math.abs(c-
(a.mediaFile.width?a.mediaFile.width:300))});a=a[b.indexOf(Math.min.apply(Math,b))];return!a||1>a.playability?null:a.mediaFile}function h(a){this.container=a;this.video=null;this.dispatchWaterfallApiEvent=function(){};this.timeouts={loadTimeout:5E3,initAdTimeout:2E4,startAdTimeout:2E4};this.__private__={hasPlayed:!1}}r=k("events").EventEmitter;var d=k("util").inherits,u=k("lie"),l=k("../environment").canPlay,x=k("sort-by"),w=k("../enums/VPAID_EVENTS"),C=k("../enums/HTML_MEDIA_EVENTS"),I=k("../HTMLVideoTracker"),
g=k("../EventProxy");d(h,r);Object.defineProperties(h.prototype,{adRemainingTime:{get:c(function(){return this.video.duration-this.video.currentTime})},adDuration:{get:c(function(){return this.video.duration})},adVolume:{get:c(function(){return this.video.muted?0:this.video.volume}),set:c(function(a){this.video.volume=a;this.video.muted=0>=a})},adSkippableState:{get:c(function(){return!0})}});h.prototype.load=function(c,d,h,p,l,q,k){var m=this;return new u(function(p,d){Utils.vcmgr.clean(q);var h=
q?q:AniviewImagePlayer.createAniviewVideoTag();m.video=h;var l=e(c,m.container.getBoundingClientRect());m.container.style.top="0px";h.asid=m.asid;if(!l)return d(Error("There are no playable <MediaFile>s."));h.setAttribute("webkit-playsinline",!0);h.setAttribute("playsinline",!0);Utils.isMobile()||q||(h.muted=!0,h.volume=0);h.preload="auto";h.style.display="none";h.style.visibility="hidden";h.style.width="100%";h.style.height="100%";h.style.objectFit="contain";b(h,C.LOADEDMETADATA,function(){var b=
new I(h);(new g(w)).from(b).to(m);m.video=h;p(m);m.emit(w.AdLoaded);a(h,C.DURATIONCHANGE,function(){m.emit(w.AdDurationChange)});a(h,C.VOLUMECHANGE,function(){m.emit(w.AdVolumeChange)})});b(h,"encodeerror",function(){var a=h.error,b="";a&&a.message&&(b=a.message);m.emit(w.mediaPlayError,b);d(a)});b(h,"error",function(){var a=h.error,b="";a&&a.message&&(b=a.message);m.emit(w.AdError,b);d(a)});b(h,C.PLAYING,function(){h.style.visibility="visible";m.__private__.hasPlayed=!0;m.emit(w.AdImpression)});
b(h,C.ENDED,function(){});var k=h;q&&Utils.isiOS()&&(k=document.createElement("div"),k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style.width="100%",k.style.height="100%",k.style.zIndex="1",m.container.appendChild(k));a(k,"click",function(){m.emit(w.AdClickThru,null,null,!0)});q&&(q.isContent=!0);m.container.appendChild(h);h.src=l.uri;h.load()})};h.prototype.startAd=c(function(){var a=this,c=this.video;return this.__private__.hasPlayed?u.reject(Error("The ad has already been started.")):
new u(function(g){b(c,C.PLAYING,function(){g(a);a.emit(w.AdStarted)});c.style.display="block";return c.play()})},!0);h.prototype.start=function(){"function"===typeof this.video.startAd&&this.video.startAd();try{this.video.isContent||(this.adVolume=0)}catch(D){}this.startAd()};h.prototype.stopAd=c(function(){this.emit(w.AdStopped);return u.resolve(this)},!0);h.prototype.skipAd=c(function(){this.emit(w.AdSkipped);return u.resolve(this)},!0);h.prototype.pauseAd=c(function(){var a=this,c=this.video;return this.video.paused?
u.resolve(this):new u(function(g){b(c,C.PAUSE,function(){g(a);a.emit(w.AdPaused)});return c.pause()})},!0);h.prototype.resumeAd=c(function(){var a=this,c=this.video;return this.__private__.hasPlayed?this.video.paused?new u(function(g){b(c,C.PLAY,function(){g(a);a.emit(w.AdPlaying)});return c.play()}):u.resolve(this):u.reject(Error("The ad has not been started yet."))},!0);h.prototype.resizeAd=c(function(a,b,c){this.video.style.width=""+a+"px";this.video.width=a;this.video.style.height=""+b+"px";this.video.height=
b},!0);h.prototype.seekAd=c(function(a){this.video.currentTime=a},!0);m.exports=h},{"../EventProxy":2,"../HTMLVideoTracker":3,"../enums/HTML_MEDIA_EVENTS":8,"../enums/VPAID_EVENTS":10,"../environment":11,events:18,lie:26,"sort-by":28,util:25}],14:[function(k,m,r){function a(){b.apply(this,arguments);this.stateError=d.vpaidGeneralError;this.dispatchWaterfallApiEvent=function(){};this.frame=null;this.timeouts={loadTimeout:1E4,initAdTimeout:2E4,startAdTimeout:2E4};this.subscriptions=[]}r=k("util").inherits;
var b=k("./VPAID"),c=k("lie"),e=k("../enums/VPAID_EVENTS");k("../environment");var h=k("../VPAIDVersion"),d=k("VPAID_ERRORS"),u=function(a){function b(b){e[b]=function(){return a[b].apply(a,arguments)}}function c(){a.setAdVolume(0);setTimeout(function(){a.setAdVolume(0);a.startAd();a.setAdVolume(0)},10)}for(var e=this,h=new function(){var a={};this.subscribe=function(b,c,g){a[c]||(a[c]=[]);a[c].push({callback:b,context:g})};this.unsubscribe=function(b,c){if(a[c])for(var g=0;g<a[c].length;g++)if(a[c][g].callback===
b){a[c].splice(g,1);break}};this.dispatch=function(b,c,g,e){if(a[b])for(var p=0;p<a[b].length;p++)if(a[b][p]&&"function"===typeof a[b][p].callback)try{a[b][p].callback.call(a[b][p].context,c,g,e)}catch(V){}}},g="handshakeVersion getAdLinear stopAd getAdVolume setAdVolume resizeAd pauseAd resumeAd expandAd getAdExpanded getAdSkippableState collapseAd skipAd getAdWidth getAdHeight getSkippableRemainingTime getAdRemainingTime getAdDuration getAdCompanions getIcons getAdIcons".split(" "),d=0;d<g.length;d++)b(g[d]);
var l=null;this.initAd=function(){l=arguments;setTimeout(function(){h.dispatch("AdLoaded")},10)};this.startAd=function(){l&&(a.subscribe(c,"AdLoaded"),a.initAd.apply(a,l))};this.subscribe=function(b,c,g){"AdLoaded"==c?h.subscribe(b,c,g):a.subscribe(b,c,g)};this.unsubscribe=function(b,g){"AdLoaded"==g?(h.unsubscribe(b,g),a.unsubscribe(c,"AdLoaded")):a.unsubscribe(b,g)}};r(a,b);a.prototype.load=function(a,b,k,m,r,g,D,z){var l=this,p=this.uri=a[0].uri,N=a[0].bitrate;l.trackingPixel=m;l.tagType=D;return new c(function(a,
c){function q(a,b){function f(){!l.sndEnabled&&!c&&!this.muted&&0<this.volume&&(c=!0,this.volume=0,c=!1)}var c=!1;a.volume=0;if(b)for(b=0;b<Q.length;b++)if(Q[b].el===a)return;Q.push({el:a,listener:f,evt:"volumechange"});a.addEventListener("volumechange",f)}function m(a){if("function"===typeof a.querySelectorAll&&!Utils.isMobile()&&!window.AV_player.config.autosound){a=a.querySelectorAll("video");for(var b=0;b<a.length;b++)q(a[b],!0)}}function C(){W&&(clearInterval(W),W=0)}function w(a){window.AV_player.config.autosound||
(W=setInterval(function(){if(l.sndEnabled)C();else if("function"===typeof a.getElementsByTagName&&!Utils.isMobile())for(var b=a.getElementsByTagName("embed"),c=0;c<b.length;c++)if(b[c]&&"string"===typeof b[c].src&&-1<b[c].src.indexOf("//redir.adap.tv/redir/client/VPAIDLoader.swf"))try{b[c].__adaptv___vpaidloader___set_adVolume(0)}catch(ja){}},150))}function x(a){a.origAppendChild=a.appendChild;a.appendChild=function(b){if("IFRAME"==b.nodeName&&"string"===typeof b.src&&0==b.src.indexOf("http")&&-1==
b.src.indexOf("ads.pubmatic.com")){var f=b.src;f=f.replace("http://","aniph/http___");f=f.replace("https://","aniph/https___");f="https://urlhandler.aniview.com/api/"+f+(-1==f.indexOf("?")?"?":"&")+"urlhandler=;urlhandler";b.src=f}"DIV"==b.nodeName&&x(b);return a.origAppendChild.call(a,b)}}function D(a,b,c,g){function f(a,f){if(b&&b[f]&&b[f].list){for(var c=g.getHostName(a),p=!1,e=0;e<b[f].list.length;e++)if(-1<c.indexOf(b[f].list[e])){p=!0;break}if(p){if(b[f].track)try{var h=encodeURIComponent(a);
for(e=0;e<b[f].track.length;e++){var l=b[f].track[e].replace("AVC_BLKURL",h);(new Image).src=l}}catch(fa){}g.writeLog(g.logLevels.defaultLevel,"URL blocked: "+f+":"+a);return!0}if(-1<a.indexOf("/mad_united.js"))return!0}return!1}function p(a){return a&&"SCRIPT"==a.nodeName&&"string"===typeof a.src?f(a.src.toLowerCase(),"script"):!1}function e(){try{this.contentWindow.cav_fl_set||(this.contentWindow.cav_fl_set=!0,D(this.contentWindow,b))}catch(na){}}g||(g=Utils);if(b){if(b.script&&b.script.list){var h=
a.Element.prototype.appendChild,l=a.Element.prototype.insertBefore,d=function(a){try{if(p(a))return null}catch(da){}return h.apply(this,arguments)},n=function(a,b){try{if(p(a))return null}catch(F){}return l.apply(this,arguments)};try{a.Element.prototype.appendChild=d,a.Element.prototype.insertBefore=n}catch(na){}}if(b.vast&&b.vast.list){var k=a.XMLHttpRequest.prototype.open;d=function(a,c,g,p,e){try{"string"===typeof c&&f(c,"vast")&&(arguments[1]=b.vast.redirUrl||"https://play.aniview.com/block.txt")}catch(oa){}return k.apply(this,
arguments)};try{a.XMLHttpRequest.prototype.open=d}catch(na){}}if(c)return}if(!c){if(window.AV_player.config.customwndopen){var m=a.open;a.open=function(b){if(arguments&&0<arguments.length&&"string"===typeof arguments[0]){var f="&";-1==arguments[0].indexOf("?")&&(f="?");arguments[0]+=f+"avclickopt=aniview.com"}m.apply(a,arguments)}}var B=a.document.createElement;a.document.createElement=function(b,f){f=B.call(a.document,b,f);"string"===typeof b&&("VIDEO"!=b.toUpperCase()||Utils.isMobile()||window.AV_player.config.autosound||
q(f),"IFRAME"==b.toUpperCase()&&(f.addEventListener("load",e),Q.push({el:f,listener:e,evt:"load"})));return f}}}function I(a,b){var f=window.AV_player.slotWindow;if(b&&f&&!f.AV_startIframeListener)try{var c=document.createElement("script");c.innerText=D.toString();c.innerText=c.innerText.replace(/(\r\n|\n|\r)/gm,"");c.innerText=c.innerText.replace("function "+D.name,"function AV_startIframeListener");f.document.body.appendChild(c);var g=JSON.parse(JSON.stringify(b));f.AV_startIframeListener(f,g,!0,
Utils)}catch(Y){}D(a,b)}function R(){K=H.contentWindow.getVPAIDAd();k.opt2&&(K=new u(K));if(Utils.isMobile()&&-1<p.trim().toLowerCase().indexOf("b.measuread.com/tl.js")&&(H.style.display="none",K=new u(K),Utils.isAndroid())){var g=M.addEventListener;M.addEventListener=function(a,b){if("click"==a&&"function"===typeof b){var f=b.toString().indexOf(".style.background");-1<f&&20>f&&setTimeout(function(){"function"===typeof M.click&&M.click()},10)}g.apply(M,arguments)}}var f=Utils.getSlotSize(M),n=l.vpaidVersion=
new h(K.handshakeVersion("2.0"));clearTimeout(l.timeouts.loadTimer);l.timeouts.loadTimer=0;if(2<n.major)return c(Error("VPAID version "+n+" is not supported."));H.contentWindow.addEventListener("resize",function(){if(!window.AV_player.isFullScreen){var a=Utils.getSlotSize(M);l.resizeAd(a.width,a.height,"normal")}},!1);e.forEach(function(a){var b=function(){try{Utils.writeLog(Utils.logLevels.debug,"JSVpaid event "+a+":"+l.asid);for(var b=Array(arguments.length),f=arguments.length;f--;)b[f]=arguments[f];
return a==e.AdUserClose?l.emit.apply(l,[e.AdSkipped].concat(b)):l.emit.apply(l,[a].concat(b))}catch(U){}};l.subscriptions.push({event:a,func:b});return K.subscribe(b,a)});l.once(e.AdLoaded,function(){l.fireTrackingPixel(l.trackingPixel+e.AdLoaded+"&ti="+(Date.now()-l.timeouts.initAdTime));l.dispatchWaterfallApiEvent(e.AdLoaded,l.asid);l.timeouts.startAdTime=Date.now();l.frame&&(l.slot.style.width="100%",l.slot.style.height="100%");!window.AV_player.config.noifsnd||Utils.isMobile()||window.AV_player.config.autosound||
m(l.slot);H.style.opacity="1";l.api=K;clearTimeout(l.timeouts.initAdTimer);l.timeouts.initAdTimer=0;a(l);if(0==p.trim().indexOf("https://b.measuread.com"))try{l.startAdCalled||(0==window.AV_player.config.autoplay&&(setTimeout(function(){l.startAdCalled||l.pauseAd();l.adVolume=0},10),setTimeout(function(){l.startAdCalled||l.pauseAd()},250),setTimeout(function(){l.startAdCalled||l.pauseAd()},1E3)),l.pauseAd(),l.adVolume=0)}catch(v){}});if(k.opt2)try{var r=window.atob("ZnVuY3Rpb24gaW5pdFBhcnNlKCl7dmFyIG9yaWdQYXJzZT13aW5kb3cuSlNPTi5wYXJzZTt3aW5kb3cuSlNPTi5wYXJzZT1mdW5jdGlvbigpe3ZhciByZXNKc29uPW9yaWdQYXJzZS5hcHBseSh3aW5kb3cuSlNPTixhcmd1bWVudHMpO3RyeXtpZihyZXNKc29uJiZyZXNKc29uLnNpdGUmJnJlc0pzb24uc2l0ZS5idHBzKSByZXNKc29uLnNpdGUuYnRwcz1mYWxzZTt9Y2F0Y2goZXhwKXt9OyByZXR1cm4gcmVzSnNvbjt9fQ=="),
z=document.createElement("script");z.innerText=r;l.frame.contentWindow.document.body.appendChild(z);l.frame.contentWindow.initParse()}catch(v){l.frame.contentWindow.debuggeron=!0}l.once(e.AdError,function(a){l.stateError!=d.noError&&l.fireTrackingPixel(l.trackingPixel+l.stateError);l.dispatchWaterfallApiEvent(l.stateError,l.asid,{msg:a});l.cleanup(Error(a))});l.once(e.AdStarted,function(a){l.adStarted=!0});l.once(e.AdStopped,l.cleanup);n={slot:M,videoSlot:A,videoSlotCanAutoPlay:!0};-1<p.indexOf(".adap.tv")&&
window.navigator&&window.navigator.userAgent.toLowerCase().match(/(ipad|iphone|ipod)/g)&&(n.clickSlot=M);-1<p.indexOf(".adap.tv")&&window.navigator&&window.navigator.userAgent.toLowerCase().match(/(android)/g)&&(n.clickSlot=M,n.slot=null);if(-1<p.indexOf(".videologygroup.com/admanager/sbs/vpaidjs")&&Utils.isMobile()){if("function"===typeof K.setAdVolume){var D=K.setAdVolume;K.setAdVolume=function(a){0==a&&(a=1E-10);D.call(K,a)}}H.style.display="none";H.contentWindow.sbh5api&&"function"===typeof H.contentWindow.sbh5api.validateVideoSlot&&
(H.contentWindow.sbh5api.validateVideoSlot=function(){return!0})}-1<p.indexOf(".stickyadstv.com/mustang")&&(n.slot=null,""!=n.videoSlot.src&&(n.videoSlot.src=""),n.poster=!0,l.once(e.AdImpression,function(a){l.stickyImpression=!0}),A.parentNode.removeChild(A),H.contentWindow.document.body.appendChild(A),Utils.isMobile()&&(n.maxDelta=1E6));-1<p.indexOf("acdn.adnxs.com")&&(Utils.isiOS()&&(n.videoSlot.av_opt_adnxs=!0),H.style.display="none");(y||!Utils.isMobile()&&!window.AV_player.config.autosound||
window.AV_player.config.customwndopen)&&I(H.contentWindow,y);!window.AV_player.config.noifsnd||Utils.isMobile()||window.AV_player.config.autosound||(x(M),l.on(e.AdVideoStart,function(){m(M)}),l.on(e.AdImpression,function(){setTimeout(function(){C();l.stopSRScan()},3E3);m(M)}));window.AV_player.config.autosound||q(A);l.timeouts.initAdTimer=setTimeout(function(){l.stateError=d.noError;l.fireTrackingPixel(l.trackingPixel+d.vpaidInitAdTimeout);Utils.writeLog(Utils.logLevels.debug,"JSVpaid initAd timeout:"+
l.asid);l.dispatchWaterfallApiEvent(d.vpaidInitAdTimeout,l.asid);l.emit(e.AdError,d.vpaidInitAdTimeout)},l.timeouts.initAdTimeout);l.stateError=d.vpaidInitAdError;Utils.writeLog(Utils.logLevels.debug,"JSVpaid command initAd: "+l.asid);l.timeouts.initAdTime=Date.now();l.fireTrackingPixel(l.trackingPixel+"initAd",!0);M.parentNode.origAppendChild=M.parentNode.appendChild;M.parentNode.appendChild=function(a){return a===M?M:M.parentNode.origAppendChild.call(M.parentNode,a)};!window.AV_player.config.noifsnd||
Utils.isMobile()||window.AV_player.config.autosound||w(l.slot);Utils.vcmgr.clean(n.videoSlot);l.ima&&(n.imaWindow=window,n.imaLang=window.AV_player.config.imalang,n.imaAutoplay=window.AV_player.config.imaautoplay,n.imaMuted=window.AV_player.config.imamuted,n.imaiOSSkip=window.AV_player.config.imaiosskip);try{K.initAd(f.width,f.height,"normal",N,{AdParameters:b},n),l.dispatchWaterfallApiEvent("initAd",l.asid)}catch(v){l.stateError=d.noError,l.fireTrackingPixel(l.trackingPixel+d.vpaidInitAdError),Utils.writeLog(Utils.logLevels.debug,
"JSVpaid initAd exception:"+l.asid),l.dispatchWaterfallApiEvent(d.vpaidInitAdError,l.asid),l.emit(e.AdError,d.vpaidInitAdError)}try{if(k.opt2&&l.frame.contentWindow.topWindowWithAccess&&l.frame.contentWindow.topWindowWithAccess.lkqd&&l.frame.contentWindow.topWindowWithAccess.lkqd.instances&&0<l.frame.contentWindow.topWindowWithAccess.lkqd.instances.length){var R=l.frame.contentWindow.topWindowWithAccess.lkqd.instances;for(f=0;f<R.length;f++)R[f].stop=Date.now()}}catch(v){}}var K,H=document.createElement("iframe"),
E=document.createElement("script"),M=r||document.createElement("div"),ra=!1;if(Utils.isMobile()){var ea=p.indexOf(".sascdn.com/");-1<ea&&20>ea&&(ra=!0)}var A=g||AniviewImagePlayer.createAniviewVideoTag(ra),Q=[];M.style.width="100%";M.style.height="100%";l.slot=M;l.video=A;A.asid=l.asid;Utils.isMobile()||window.AV_player.config.autosound||(A.muted=!0,A.volume=0);"function"===typeof M.scrollIntoView&&(M.scrollIntoView=function(){},A.scrollIntoView=function(){});var W=0;l.stopSRScan=function(){l.srinterval&&
(clearInterval(l.srinterval),l.srinterval=0);l.sndInterval&&(clearInterval(l.sndInterval),l.sndInterval=0)};var y=null;window.AV_player.waterfall&&window.AV_player.waterfall.data&&window.AV_player.waterfall.data.block&&(y=window.AV_player.waterfall.data.block);l.cleanup=function(a){if(l.frame)try{for(var b=0;b<Q.length;b++)Q[b].el.removeEventListener(Q[b].evt,Q[b].listener);Q=[]}catch(n){}l.cleanupSubscriptions();l.api=null;l.cleanTimers();C();l.stopSRScan();a&&c(a)};l.cleanupSubscriptions=function(){try{K&&
l.subscriptions.forEach(function(a){K.unsubscribe(a.func,a.event)})}catch(O){}l.subscriptions=[]};H.src="about:blank";H.style.width="100%";H.style.height="100%";H.style.display="block";H.style.opacity="0";H.style.position="absolute";H.style.top="0px";H.style.border="none";H.scrolling="no";A.setAttribute("webkit-playsinline","true");A.setAttribute("playsinline","true");A.style.display="block";A.style.width="100%";A.style.height="100%";A.style.objectFit="contain";A.style.position="absolute";A.style.top=
"0px";r?H.style.display="none":(l.container.style.top="",l.container.appendChild(M),M.appendChild(A));!z||"pl"!=z.type||3!=z.platform&&6!=z.platform||(l.ima=!0,H.style.display="none");l.frame=H;Utils.writeLog(Utils.logLevels.debug,"JSVpaid command loadIframe: "+l.asid);M.appendChild(H);H.contentWindow.document.open().write('<body onload="window.avCallback();">');H.contentWindow.avCallback=function(){E.src=p;E.onload=R;E.onerror=function(){l.fireTrackingPixel(l.trackingPixel+d.vpaidLoadError);Utils.writeLog(Utils.logLevels.debug,
"JSVpaid load Error:"+l.asid);l.dispatchWaterfallApiEvent(d.vpaidLoadError,l.asid);l.emit(e.AdError,d.vpaidLoadError)};Utils.writeLog(Utils.logLevels.debug,"JSVpaid command loadScript: "+l.asid);H.contentWindow.document.body.appendChild(E);H.contentWindow.document.body.style.margin="0"};H.contentWindow.document.close();H.contentDocument.body.addEventListener("click",function(){Utils.writeLog(Utils.logLevels.debug,"Iframe clicked:"+l.asid);var a=document.createEvent("HTMLEvents");a.initEvent("click",
!0,!0);A.dispatchEvent(a)});l.timeouts.loadTimer=setTimeout(function(){l.stateError=d.noError;l.fireTrackingPixel(l.trackingPixel+d.vpaidLoadTimeout);Utils.writeLog(Utils.logLevels.debug,"JSVpaid load timeout:"+l.asid);l.dispatchWaterfallApiEvent(d.vpaidLoadTimeout,l.asid);l.emit(e.AdError,d.vpaidLoadTimeout)},l.timeouts.loadTimeout)})};a.prototype.start=function(){var a=this;a.startAdCalled=!0;a.stateError=d.vpaidStartAdError;var b=e.AdImpression;a.stickyImpression&&(b=e.AdVideoStart);a.once(b,function(){a.fireTrackingPixel(a.trackingPixel+
e.AdImpression+"&ti="+(Date.now()-a.timeouts.startAdTime),!1,!0);clearTimeout(a.timeouts.startAdTimer);a.timeouts.startAdTimer=0;a.stateError=d.vpaidPlayError;a.sndInterval&&(clearInterval(a.sndInterval),a.sndInterval=0);try{a.video&&(a.ima||""==a.video.src||""==a.video.getAttribute("src"))&&2<a.slot.children.length&&(a.video.style.zIndex="-1",a.frame.style.zIndex="-1")}catch(w){}});a.timeouts.startAdTimer=setTimeout(function(){a.stateError=d.noError;a.fireTrackingPixel(a.trackingPixel+d.vpaidStartAdTimeout);
Utils.writeLog(Utils.logLevels.debug,"JSVpaid startAd timeout:"+a.asid);a.dispatchWaterfallApiEvent(d.vpaidStartAdTimeout,a.asid);a.stopAd();a.emit(e.AdError,d.vpaidStartAdTimeout)},a.timeouts.startAdTimeout);a.video.addEventListener("encodeerror",function(){"googima"!=a.tagType&&a.emit(e.AdError,d.mediaPlayError)},!1);Utils.writeLog(Utils.logLevels.debug,"JSVpaid command startAd: "+a.asid);a.timeouts.startAdTime=Date.now();a.fireTrackingPixel(a.trackingPixel+"startAd",!0);try{window.AV_player.config.autosound||
(a.adVolume=0)}catch(w){}window.AV_player.config.noifsnd&&!Utils.isMobile()&&!window.AV_player.config.autosound&&-1<this.uri.indexOf("streamrail.com")&&(a.srinterval=setInterval(function(){var b;try{a.sndEnabled?a.stopSRScan():(b=a.api._waterfallManager)&&(b=b._currentIntegrator)&&(b=b.tech)&&(b=b.vpaidHTMLClient)&&(b=b._adUnit)&&(b=b._creative)&&(b=b._waterfallManager)&&(b=b._currentIntegrator)&&(b=b.tech)&&(b=b.vpaidHTMLClient)&&(b=b._adUnit)&&(b=b._creative)&&(b.setAdVolume(0)||0<b.getAdVolume()&&
(b.setAdVolume(1E-5)||b.setAdVolume(0)))}catch(C){}},150));Utils.isMobile()||window.AV_player.config.autosound||a.sndEnabled||(a.sndInterval=setInterval(function(){try{a.sndEnabled?a.stopSRScan():a.adVolume=0}catch(w){}},150));"function"===typeof a.video.startAd&&a.video.startAd();a.adStarted?a.resumeAd():a.startAd();a.dispatchWaterfallApiEvent("startAd",a.asid)};a.prototype.setAdVolumeExt=function(a){this.video.muted=!(0<a)};m.exports=a},{"../VPAIDVersion":6,"../enums/VPAID_EVENTS":10,"../environment":11,
"./VPAID":15,lie:26,util:25,VPAID_ERRORS:48}],15:[function(k,m,r){function a(a,b){return function(){function c(){"function"===typeof k[a+"Ext"]&&k[a+"Ext"].apply(k,h);return d[a].apply(d,h)}var h=arguments,d=this.api,k=this;if(!b){if(!d)throw Error("Ad has not been loaded.");return c()}return new e(function(a,e){if(!d)return e(Error("Ad has not been loaded."));k.once(b,function(){a(k)});return c()})}}function b(a){this.container=a;this.vpaidVersion=this.api=null;this.fireVpaidEvents=window.AV_player.config.tmf.vpaid}
r=k("util").inherits;var c=k("events").EventEmitter,e=k("lie");k=k("../enums/VPAID_EVENTS");r(b,c);Object.defineProperties(b.prototype,{adLinear:{get:a("getAdLinear")},adWidth:{get:a("getAdWidth")},adHeight:{get:a("getAdHeight")},adExpanded:{get:a("getAdExpanded")},adSkippableState:{get:a("getAdSkippableState")},adRemainingTime:{get:a("getAdRemainingTime")},adDuration:{get:a("getAdDuration")},adVolume:{get:a("getAdVolume"),set:a("setAdVolume")},adCompanions:{get:a("getAdCompanions")},adIcons:{get:a("getAdIcons")}});
b.prototype.cleanTimers=function(){this.timeouts.loadTimer&&clearTimeout(this.timeouts.loadTimer);this.timeouts.initAdTimer&&clearTimeout(this.timeouts.initAdTimer);this.timeouts.startAdTimer&&clearTimeout(this.timeouts.startAdTimer);this.timeouts.startAdTimer=this.timeouts.initAdTimer=this.timeouts.loadTimer=0};b.prototype.load=function(){throw Error("VPAID subclass must implement load() method.");};b.prototype.resizeAd=a("resizeAd",k.AdSizeChange);b.prototype.startAd=a("startAd",k.AdStarted);b.prototype.stopAd=
a("stopAd",k.AdStopped);b.prototype.pauseAd=a("pauseAd",k.AdPaused);b.prototype.resumeAd=a("resumeAd",k.AdPlaying);b.prototype.expandAd=a("expandAd",k.AdExpandedChange);b.prototype.collapseAd=a("collapseAd",k.AdExpandedChange);b.prototype.skipAd=a("skipAd",k.AdSkipped);b.prototype.seekAd=function(a){return!1};b.prototype.fireTrackingPixel=function(a,b,c){(this.fireVpaidEvents||c)&&50<a.length&&(b&&(a+="&vi="+Utils.getViewabilityPerc()),(new Image).src=a+"&cb="+Date.now())};m.exports=b},{"../enums/VPAID_EVENTS":10,
events:18,lie:26,util:25}],16:[function(k,m,r){m.exports=function(a){for(var b="";a--;)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return b}},{}],17:[function(k,m,r){m.exports=window},{}],18:[function(k,m,r){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function b(a){return"function"===typeof a}function c(a){return"object"===typeof a&&null!==a}m.exports=a;a.EventEmitter=a;a.prototype._events=void 0;
a.prototype._maxListeners=void 0;a.defaultMaxListeners=50;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var e;this._events||(this._events={});if("error"===a&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){var d=arguments[1];if(d instanceof Error)throw d;throw TypeError('Uncaught, unspecified "error" event.');}var k=this._events[a];
if(void 0===k)return!1;if(b(k))switch(arguments.length){case 1:k.call(this);break;case 2:k.call(this,arguments[1]);break;case 3:k.call(this,arguments[1],arguments[2]);break;default:d=arguments.length;var l=Array(d-1);for(e=1;e<d;e++)l[e-1]=arguments[e];k.apply(this,l)}else if(c(k)){d=arguments.length;l=Array(d-1);for(e=1;e<d;e++)l[e-1]=arguments[e];k=k.slice();d=k.length;for(e=0;e<d;e++)k[e].apply(this,l)}return!0};a.prototype.addListener=function(e,h){if(!b(h))throw TypeError("listener must be a function");
this._events||(this._events={});this._events.newListener&&this.emit("newListener",e,b(h.listener)?h.listener:h);this._events[e]?c(this._events[e])?this._events[e].push(h):this._events[e]=[this._events[e],h]:this._events[e]=h;c(this._events[e])&&!this._events[e].warned&&(h=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<h&&this._events[e].length>h&&(this._events[e].warned=!0,console.log("warning: EventEmitter maxListeners passed %d listeners added. ",this._events[e].length));
return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,c){function e(){this.removeListener(a,e);h||(h=!0,c.apply(this,arguments))}if(!b(c))throw TypeError("listener must be a function");var h=!1;e.listener=c;this.on(a,e);return this};a.prototype.removeListener=function(a,h){if(!b(h))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;var e=this._events[a];var k=e.length;var l=-1;if(e===h||b(e.listener)&&e.listener===h)delete this._events[a],
this._events.removeListener&&this.emit("removeListener",a,h);else if(c(e)){for(;0<k--;)if(e[k]===h||e[k].listener&&e[k].listener===h){l=k;break}if(0>l)return this;1===e.length?(e.length=0,delete this._events[a]):e.splice(l,1);this._events.removeListener&&this.emit("removeListener",a,h)}return this};a.prototype.removeAllListeners=function(a){if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(c in this._events)"removeListener"!==
c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");this._events={};return this}var c=this._events[a];if(b(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.listenerCount=function(a,c){return a._events&&a._events[c]?b(a._events[c])?1:a._events[c].length:0}},{}],19:[function(k,
m,r){m.exports="function"===typeof Object.create?function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a}},{}],20:[function(k,m,r){function a(){d=!1;u.length?h=u.concat(h):l=-1;h.length&&b()}function b(){if(!d){var b=setTimeout(a);d=!0;for(var c=h.length;c;){u=h;for(h=[];++l<c;)u&&u[l].run();l=-1;c=h.length}u=null;
d=!1;clearTimeout(b)}}function c(a,b){this.fun=a;this.array=b}function e(){}k=m.exports={};var h=[],d=!1,u,l=-1;k.nextTick=function(a){var e=Array(arguments.length-1);if(1<arguments.length)for(var l=1;l<arguments.length;l++)e[l-1]=arguments[l];h.push(new c(a,e));1!==h.length||d||setTimeout(b,0)};c.prototype.run=function(){this.fun.apply(null,this.array)};k.title="browser";k.browser=!0;k.env={};k.argv=[];k.version="";k.versions={};k.on=e;k.addListener=e;k.once=e;k.off=e;k.removeListener=e;k.removeAllListeners=
e;k.emit=e;k.binding=function(a){throw Error("process.binding is not supported");};k.cwd=function(){return"/"};k.chdir=function(a){throw Error("process.chdir is not supported");};k.umask=function(){return 0}},{}],21:[function(k,m,r){m.exports=function(b,c,e,h){e=e||"=";var d={};if("string"!==typeof b||0===b.length)return d;var k=/\+/g;b=b.split(c||"&");c=1E3;h&&"number"===typeof h.maxKeys&&(c=h.maxKeys);h=b.length;0<c&&h>c&&(h=c);for(c=0;c<h;++c){var l=b[c].replace(k,"%20"),m=l.indexOf(e);if(0<=m){var r=
l.substr(0,m);l=l.substr(m+1)}else r=l,l="";r=decodeURIComponent(r);l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(d,r)?a(d[r])?d[r].push(l):d[r]=[d[r],l]:d[r]=l}return d};var a=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],22:[function(k,m,r){function a(a,b){if(a.map)return a.map(b);for(var c=[],e=0;e<a.length;e++)c.push(b(a[e],e));return c}var b=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";
case "number":return isFinite(a)?a:"";default:return""}};m.exports=function(h,d,k,l){d=d||"&";k=k||"=";null===h&&(h=void 0);return"object"===typeof h?a(e(h),function(e){var l=encodeURIComponent(b(e))+k;return c(h[e])?a(h[e],function(a){return l+encodeURIComponent(b(a))}).join(d):l+encodeURIComponent(b(h[e]))}).join(d):l?encodeURIComponent(b(l))+k+encodeURIComponent(b(h)):""};var c=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=Object.keys||function(a){var b=
[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],23:[function(k,m,r){r.decode=r.parse=k("./decode");r.encode=r.stringify=k("./encode")},{"./decode":21,"./encode":22}],24:[function(k,m,r){m.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===typeof a.fill&&"function"===typeof a.readUInt8}},{}],25:[function(k,m,r){(function(a,b){function c(a,b){var c={seen:[],stylize:h};3<=arguments.length&&(c.depth=arguments[2]);4<=arguments.length&&
(c.colors=arguments[3]);D(b)?c.showHidden=b:b&&r._extend(c,b);p(c.showHidden)&&(c.showHidden=!1);p(c.depth)&&(c.depth=2);p(c.colors)&&(c.colors=!1);p(c.customInspect)&&(c.customInspect=!0);c.colors&&(c.stylize=e);return m(c,a,c.depth)}function e(a,b){return(b=c.styles[b])?"\u001b["+c.colors[b][0]+"m"+a+"\u001b["+c.colors[b][1]+"m":a}function h(a,b){return a}function d(a){var b={};a.forEach(function(a,c){b[a]=!0});return b}function m(a,b,c){if(a.customInspect&&b&&V(b.inspect)&&b.inspect!==r.inspect&&
(!b.constructor||b.constructor.prototype!==b)){var p=b.inspect(c,a);E(p)||(p=m(a,p,c));return p}if(p=l(a,b))return p;var e=Object.keys(b),h=d(e);a.showHidden&&(e=Object.getOwnPropertyNames(b));if(la(b)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return x(b);if(0===e.length){if(V(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(N(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(R(b))return a.stylize(Date.prototype.toString.call(b),"date");if(la(b))return x(b)}p=
"";var q=!1,k=["{","}"];g(b)&&(q=!0,k=["[","]"]);V(b)&&(p=" [Function"+(b.name?": "+b.name:"")+"]");N(b)&&(p=" "+RegExp.prototype.toString.call(b));R(b)&&(p=" "+Date.prototype.toUTCString.call(b));la(b)&&(p=" "+x(b));if(0===e.length&&(!q||0==b.length))return k[0]+p+k[1];if(0>c)return N(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);e=q?w(a,b,c,h,e):e.map(function(g){return C(a,b,c,h,g,q)});a.seen.pop();return I(e,p,k)}function l(a,b){if(p(b))return a.stylize("undefined",
"undefined");if(E(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(z(b))return a.stylize(""+b,"number");if(D(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function x(a){return"["+Error.prototype.toString.call(a)+"]"}function w(a,b,c,g,p){for(var e=[],d=0,h=b.length;d<h;++d)Object.prototype.hasOwnProperty.call(b,String(d))?e.push(C(a,b,c,g,String(d),!0)):e.push("");p.forEach(function(p){p.match(/^\d+$/)||
e.push(C(a,b,c,g,p,!0))});return e}function C(a,b,c,g,e,d){var h,l;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?l=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(l=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(g,e)||(h="["+e+"]");l||(0>a.seen.indexOf(b.value)?(l=null===c?m(a,b.value,null):m(a,b.value,c-1),-1<l.indexOf("\n")&&(l=d?l.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+l.split("\n").map(function(a){return"   "+
a}).join("\n"))):l=a.stylize("[Circular]","special"));if(p(h)){if(d&&e.match(/^\d+$/))return l;h=JSON.stringify(""+e);h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=a.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=a.stylize(h,"string"))}return h+": "+l}function I(a,b,c){var g=0;return 60<a.reduce(function(a,b){g++;0<=b.indexOf("\n")&&g++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+
" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function g(a){return Array.isArray(a)}function D(a){return"boolean"===typeof a}function z(a){return"number"===typeof a}function E(a){return"string"===typeof a}function p(a){return void 0===a}function N(a){return q(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function q(a){return"object"===typeof a&&null!==a}function R(a){return q(a)&&"[object Date]"===Object.prototype.toString.call(a)}function la(a){return q(a)&&("[object Error]"===Object.prototype.toString.call(a)||
a instanceof Error)}function V(a){return"function"===typeof a}function ha(a){return 10>a?"0"+a.toString(10):a.toString(10)}function L(){var a=new Date,b=[ha(a.getHours()),ha(a.getMinutes()),ha(a.getSeconds())].join(":");return[a.getDate(),S[a.getMonth()],b].join(" ")}var ma=/%[sdj%]/g;r.format=function(a){if(!E(a)){for(var b=[],g=0;g<arguments.length;g++)b.push(c(arguments[g]));return b.join(" ")}g=1;var e=arguments,p=e.length;b=String(a).replace(ma,function(a){if("%%"===a)return"%";if(g>=p)return a;
switch(a){case "%s":return String(e[g++]);case "%d":return Number(e[g++]);case "%j":try{return JSON.stringify(e[g++])}catch(Q){return"[Circular]"}default:return a}});for(var d=e[g];g<p;d=e[++g])b=null!==d&&q(d)?b+(" "+c(d)):b+(" "+d);return b};r.deprecate=function(c,g){if(p(b.process))return function(){return r.deprecate(c,g).apply(this,arguments)};if(!0===a.noDeprecation)return c;var e=!1;return function(){if(!e){if(a.throwDeprecation)throw Error(g);a.traceDeprecation?console.trace(g):console.error(g);
e=!0}return c.apply(this,arguments)}};var ca={},pa;r.debuglog=function(b){p(pa)&&(pa=a.env.NODE_DEBUG||"");b=b.toUpperCase();if(!ca[b])if((new RegExp("\\b"+b+"\\b","i")).test(pa)){var c=a.pid;ca[b]=function(){var a=r.format.apply(r,arguments);console.error("%s %d: %s",b,c,a)}}else ca[b]=function(){};return ca[b]};r.inspect=c;c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],
yellow:[33,39]};c.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};r.isArray=g;r.isBoolean=D;r.isNull=function(a){return null===a};r.isNullOrUndefined=function(a){return null==a};r.isNumber=z;r.isString=E;r.isSymbol=function(a){return"symbol"===typeof a};r.isUndefined=p;r.isRegExp=N;r.isObject=q;r.isDate=R;r.isError=la;r.isFunction=V;r.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||
"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};r.isBuffer=k("./support/isBuffer");var S="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");r.log=function(){console.log("%s - %s",L(),r.format.apply(r,arguments))};r.inherits=k("inherits");r._extend=function(a,b){if(!b||!q(b))return a;for(var c=Object.keys(b),g=c.length;g--;)a[c[g]]=b[c[g]];return a}}).call(this,k("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{})},{"./support/isBuffer":24,_process:20,inherits:19}],26:[function(k,m,r){function a(){}function b(b){if("function"!==typeof b)throw new TypeError("resolver must be a function");this.state=I;this.queue=[];this.outcome=void 0;b!==a&&d(this,b)}function c(a,b,c){this.promise=a;"function"===typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"===typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function e(a,b,c){l(function(){try{var g=b(c)}catch(p){return x.reject(a,
p)}g===a?x.reject(a,new TypeError("Cannot resolve promise with itself")):x.resolve(a,g)})}function h(a){var b=a&&a.then;if(a&&"object"===typeof a&&"function"===typeof b)return function(){b.apply(a,arguments)}}function d(a,b){function c(b){e||(e=!0,x.reject(a,b))}function g(b){e||(e=!0,x.resolve(a,b))}var e=!1,d=u(function(){b(g,c)});"error"===d.status&&c(d.value)}function u(a,b){var c={};try{c.value=a(b),c.status="success"}catch(E){c.status="error",c.value=E}return c}var l=k("immediate"),x={},w=["REJECTED"],
C=["FULFILLED"],I=["PENDING"];m.exports=r=b;b.prototype["catch"]=function(a){return this.then(null,a)};b.prototype.then=function(b,d){if("function"!==typeof b&&this.state===C||"function"!==typeof d&&this.state===w)return this;var g=new this.constructor(a);this.state!==I?e(g,this.state===C?b:d,this.outcome):this.queue.push(new c(g,b,d));return g};c.prototype.callFulfilled=function(a){x.resolve(this.promise,a)};c.prototype.otherCallFulfilled=function(a){e(this.promise,this.onFulfilled,a)};c.prototype.callRejected=
function(a){x.reject(this.promise,a)};c.prototype.otherCallRejected=function(a){e(this.promise,this.onRejected,a)};x.resolve=function(a,b){var c=u(h,b);if("error"===c.status)return x.reject(a,c.value);if(c=c.value)d(a,c);else{a.state=C;a.outcome=b;c=-1;for(var g=a.queue.length;++c<g;)a.queue[c].callFulfilled(b)}return a};x.reject=function(a,b){a.state=w;a.outcome=b;for(var c=-1,g=a.queue.length;++c<g;)a.queue[c].callRejected(b);return a};r.resolve=function(b){return b instanceof this?b:x.resolve(new this(a),
b)};r.reject=function(b){var c=new this(a);return x.reject(c,b)};r.all=function(b){function c(a,b){g.resolve(a).then(function(a){d[b]=a;++h!==e||p||(p=!0,x.resolve(k,d))},function(a){p||(p=!0,x.reject(k,a))})}var g=this;if("[object Array]"!==Object.prototype.toString.call(b))return this.reject(new TypeError("must be an array"));var e=b.length,p=!1;if(!e)return this.resolve([]);for(var d=Array(e),h=0,l=-1,k=new this(a);++l<e;)c(b[l],l);return k};r.race=function(b){function c(a){g.resolve(a).then(function(a){p||
(p=!0,x.resolve(h,a))},function(a){p||(p=!0,x.reject(h,a))})}var g=this;if("[object Array]"!==Object.prototype.toString.call(b))return this.reject(new TypeError("must be an array"));var e=b.length,p=!1;if(!e)return this.resolve([]);for(var d=-1,h=new this(a);++d<e;)c(b[d]);return h}},{immediate:27}],27:[function(k,m,r){(function(a){function b(){l=!0;for(var a,b,c=r.length;c;){b=r;r=[];for(a=-1;++a<c;)b[a]();c=r.length}l=!1}var c=a.MutationObserver||a.WebKitMutationObserver;if(c){var e=0;c=new c(b);
var h=a.document.createTextNode("");c.observe(h,{characterData:!0});var d=function(){h.data=e=++e%2}}else if(a.setImmediate||"undefined"===typeof a.MessageChannel)d="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var c=a.document.createElement("script");c.onreadystatechange=function(){b();c.onreadystatechange=null;c.parentNode.removeChild(c);c=null};a.document.documentElement.appendChild(c)}:function(){setTimeout(b,0)};else{var k=new a.MessageChannel;k.port1.onmessage=
b;d=function(){k.port2.postMessage(0)}}var l,r=[];m.exports=function(a){1!==r.push(a)||l||d()}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],28:[function(k,m,r){var a=k("object-path");var b=function(b){var c=1;"-"===b[0]&&(c=-1,b=b.substr(1));return function(e,d){var h;a.get(e,b)<a.get(d,b)&&(h=-1);a.get(e,b)>a.get(d,b)&&(h=1);a.get(e,b)===a.get(d,b)&&(h=0);return h*c}};m.exports=function(){var a=arguments;return function(c,
h){for(var e=a.length,k=0,l=0;0===k&&l<e;)k=b(a[l])(c,h),l++;return k}}},{"object-path":29}],29:[function(k,m,r){(function(a,b){"object"===typeof m&&"object"===typeof m.exports?m.exports=b():a.objectPath=b()})(this,function(){function a(a){if(!a)return!0;if(!e(a)||0!==a.length)for(var b in a)if(m.call(a,b))return!1;return!0}function b(a){return"number"===typeof a||"[object Number]"===l.call(a)}function c(a){return"string"===typeof a||"[object String]"===l.call(a)}function e(a){return"object"===typeof a&&
"number"===typeof a.length&&"[object Array]"===l.call(a)}function h(a){var b=parseInt(a);return b.toString()===a?b:a}function d(e,l,g,k){b(l)&&(l=[l]);if(a(l))return e;if(c(l))return d(e,l.split("."),g,k);var m=h(l[0]);if(1===l.length)return l=e[m],void 0!==l&&k||(e[m]=g),l;void 0===e[m]&&(b(m)?e[m]=[]:e[m]={});return d(e[m],l.slice(1),g,k)}function k(d,l){b(l)&&(l=[l]);if(!a(d)){if(a(l))return d;if(c(l))return k(d,l.split("."));var g=h(l[0]),m=d[g];if(1===l.length)void 0!==m&&(e(d)?d.splice(g,1):
delete d[g]);else if(void 0!==d[g])return k(d[g],l.slice(1));return d}}var l=Object.prototype.toString,m=Object.prototype.hasOwnProperty,r={ensureExists:function(a,b,c){return d(a,b,c,!0)},set:function(a,b,c,e){return d(a,b,c,e)},insert:function(a,b,c,d){var g=r.get(a,b);d=~~d;e(g)||(g=[],r.set(a,b,g));g.splice(d,0,c)},empty:function(d,h){if(a(h))return d;if(!a(d)){var g,k;if(!(g=r.get(d,h)))return d;if(c(g))return r.set(d,h,"");if("boolean"===typeof g||"[object Boolean]"===l.call(g))return r.set(d,
h,!1);if(b(g))return r.set(d,h,0);if(e(g))g.length=0;else if("object"===typeof g&&"[object Object]"===l.call(g))for(k in g)m.call(g,k)&&delete g[k];else return r.set(d,h,null)}},push:function(a,b){var c=r.get(a,b);e(c)||(c=[],r.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var e,g=0,d=b.length;g<d;g++)if(void 0!==(e=r.get(a,b[g])))return e;return c},get:function(e,d,g){b(d)&&(d=[d]);if(a(d))return e;if(a(e))return g;if(c(d))return r.get(e,d.split("."),
g);var l=h(d[0]);return 1===d.length?void 0===e[l]?g:e[l]:r.get(e[l],d.slice(1),g)},del:function(a,b){return k(a,b)}};return r})},{}],30:[function(k,m,r){r.VAST=k("./lib/VAST")},{"./lib/VAST":31}],31:[function(k,m,r){function a(){}function b(a){h(a,this,!0);this.raw=[];this.ads.forEach(function(a){d({system:{version:null},errors:[]},a);a.creatives.forEach(function(a){d({id:null,sequence:null,adID:null},a);I[a.type](a)});C[a.type](a)});this.__private__={wrappers:[],inlines:[]}}var c=k("lie"),e=k("superagent"),
h=k("./utils/copy"),d=k("./utils/defaults"),u=k("./utils/extend"),l=k("./utils/nodeify_promise"),x=Array.prototype.push,w=k("./xml_from_vast"),C={inline:function(a){d({description:null,survey:null},a)},wrapper:function(){}},I={linear:function(a){d({trackingEvents:[],parameters:null,videoClicks:null},a);(a.mediaFiles||[]).forEach(function(a){d({id:null,bitrate:null,scalable:null,maintainAspectRatio:null,apiFramework:null},a)})},companions:function(a){a.companions.forEach(function(a){d({expandedWidth:null,
expandedHeight:null,apiFramework:null,trackingEvents:[],clickThrough:null,altText:null,parameters:null},a)})},nonLinear:function(a){d({trackingEvents:[]},a);a.ads.forEach(function(a){d({id:null,expandedWidth:null,expandedHeight:null,scalable:null,maintainAspectRatio:null,minSuggestedDuration:null,apiFramework:null,clickThrough:null,parameters:null},a)})}};Object.defineProperties(b.prototype,{wrappers:{get:function(){var a=this.__private__.wrappers;a.length=0;x.apply(a,this.filter("ads",function(a){return"wrapper"===
a.type}));return a}},inlines:{get:function(){var a=this.__private__.inlines;a.length=0;x.apply(a,this.filter("ads",function(a){return"inline"===a.type}));return a}}});b.prototype.get=function(a){return((a||"").match(/[^\[\]\.]+/g)||[]).reduce(function(a,b){return(a||void 0)&&a[b]},this)};b.prototype.set=function(a,b){function c(a,b){switch(a.input.charAt(b)){case ".":return Object;case "[":return Array;case "]":return c(a,b+1);default:return null}}var e=function(){for(var b=/[^\[\]\.]+/g,e=[],g;g=
b.exec(a);)e.push({token:g[0],type:c(g,g.index+g[0].length)});return e}(),g=e.pop();e=e.reduce(function(a,b){return a[b.token]||(a[b.token]=new b.type)},this);if(!a)throw Error("prop must be specified.");return e[g.token]=b};b.prototype.map=function(a,b){a=this.get(a)||[];var c=a.length,e=[];if(!(a instanceof Array))return e;for(var g=0;g<c;g++)e.push(b.call(this,a[g],g,a));return e};b.prototype.filter=function(a,b){a=this.get(a)||[];var c=a.length,e=[];if(!(a instanceof Array))return e;for(var g=
0;g<c;g++)b.call(this,a[g],g,a)&&e.push(a[g]);return e};b.prototype.find=function(a,b){a=this.get(a)||[];var c=a.length;if(a instanceof Array)for(var e=0;e<c;e++)if(b.call(this,a[e],e,a))return a[e]};b.prototype.toPOJO=function(){var a=JSON.parse(JSON.stringify(this));delete a.__private__;return a};b.prototype.copy=function(){return new this.constructor(this.toPOJO())};b.prototype.resolveWrappers=function(a,b){function g(a,b){function c(a){return function(b){return b.type===a}}var e=function(a){return{linear:a.filter(c("linear")),
companions:a.filter(c("companions")),nonLinear:a.filter(c("nonLinear"))}}(a.creatives);d(a.impressions,b.impressions);d(a.errors,b.errors);d(a.extensions,b.extensions);b.creatives.forEach(function(a){d(e[a.type].shift()||{},a)});x.apply(b.creatives,"wrapper"!==b.type?[]:["linear","companions","nonLinear"].reduce(function(a,b){return a.concat(e[b])},[]));return b}var h=isNaN(a)?Infinity:a,p="function"===typeof a?a:b,k=this.constructor,q=this,m=this;return 0===h?c.reject(Error("Too many redirects were made.")):
l(c.all(this.map("wrappers",function(a){return c.resolve(e.get(a.vastAdTagURI)).then(function(b){m.raw.push(b.text);return{wrapper:a,response:k.pojoFromXML(b.text).ads}})})).then(function(a){var b=a.map(function(a){return a.wrapper}),c=a.map(function(a){return a.response});a=new k(u(q.toPOJO(),{ads:q.map("ads",function(a){var e=b.indexOf(a),p=b[e];return(e=c[e])?e.map(g.bind(null,p)):[a]}).reduce(function(a,b){return a.concat(b)})}));a.raw=q.raw;return a}).then(function(a){return 0<a.get("wrappers.length")?
a.resolveWrappers(h-1,p):a}),function(a,b){b||(b=m);p(a,b)})};b.prototype.toXML=function(){var a=this.validate();if(!a.valid)throw Error("VAST is invalid: "+a.reasons.join(", "));return w(this)};b.prototype.validate=function(){function b(a){d.get(a)||p.push(a+" is required")}function c(a){0<d.get(a+".length")||p.push(a+" must contain at least one value")}function e(a,e){e.exists.map(a).forEach(b);e.atLeastOne.map(a).forEach(c)}var d=this,p=[],h={inline:function(b){var c={linear:function(a){e(a,{exists:["duration"],
atLeastOne:["mediaFiles"]})},companions:function(a){d.get(a("companions")).forEach(function(b,c){e(function(b){return a("companions["+c+"]."+b)},{exists:[],atLeastOne:["resources"]})})},nonLinear:function(a){d.get(a("ads")).forEach(function(b,c){e(function(b){return a("ads["+c+"]."+b)},{exists:[],atLeastOne:["resources"]})})}};e(b,{exists:["title"],atLeastOne:["creatives"]});d.get(b("creatives")).forEach(function(g,p){function d(a){return b("creatives["+p+"]."+a)}e(d,{exists:["type"],atLeastOne:[]});
(c[g.type]||a)(d)})},wrapper:function(a){e(a,{exists:["vastAdTagURI"],atLeastOne:[]})}};e(function(a){return a},{exists:[],atLeastOne:["ads"]});this.get("ads").forEach(function(b,c){function g(a){return"ads["+c+"]."+a}e(g,{exists:["type","system.name"],atLeastOne:["impressions"]});(h[b.type]||a)(g)});return{valid:0===p.length,reasons:0===p.length?null:p}};b.pojoFromXML=k("./pojo_from_xml");b.fetch=function(a,b,d,h,p,k){var g="object"===typeof b?b||{}:{},m=this;"https://adsdk"==a.substring(0,13)&&
(h="vpaid");if("video"==h||"vastxml"==h||"vpaid"==h||"pl"==h)return b="","video"==h?b='<VAST version="2.0"><Ad id="aniview"><InLine><AdSystem>aniview</AdSystem><AdTitle>aniview</AdTitle><Creatives><Creative><Linear><Duration></Duration><VideoClicks><ClickThrough id="aniview"><![CDATA['+d.trim()+']]\x3e</ClickThrough></VideoClicks><MediaFiles><MediaFile height="360" width="480" bitrate="527" type="video/mp4" delivery="progressive"><![CDATA['+a+"]]\x3e</MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>":
"vpaid"==h?(a=a.substring(14,1E3),d=a.indexOf("?"),-1<d&&(d=a.substring(0,d),"spotx"==d&&(b="https://aniview.hs.llnwd.net/d1/script/6.1/sdk/spotx.js",a=a.substring(d.length+1,1E3),d=a.indexOf("&cbb="),-1<d&&(a=a.substring(0,d)),a=decodeURIComponent(a),b='<VAST version="2.0"><Ad id="aniview"><InLine><AdSystem>aniview</AdSystem><AdTitle>aniview</AdTitle><Creatives><Creative><Linear><Duration></Duration><AdParameters><![CDATA['+a+']]\x3e</AdParameters><MediaFiles><MediaFile height="360" width="480" type="application/javascript" apiFramework="VPAID"><![CDATA['+
b+"]]\x3e</MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>"))):"pl"==h?(b=window.AV_player.config.basejsurl+"sdk/"+k.platform+".js",a=decodeURIComponent(a),b='<VAST version="2.0"><Ad id="aniview"><InLine><AdSystem>aniview</AdSystem><AdTitle>aniview</AdTitle><Creatives><Creative><Linear><Duration></Duration><AdParameters><![CDATA['+a+']]\x3e</AdParameters><MediaFiles><MediaFile height="360" width="480" type="application/javascript" apiFramework="VPAID"><![CDATA['+b+"]]\x3e</MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>"):
b=a,a=new m(m.pojoFromXML(b)),a.raw.push(b),g.resolveWrappers?a.resolveWrappers(g.maxRedirects,p):a;a=e.get(a).set(g.headers||{});b.withCredentials||(a._withCredentials=!1);return l(c.resolve(a).then(function(a){var b=new m(m.pojoFromXML(a.text));b.raw.push(a.text);return g.resolveWrappers?b.resolveWrappers(g.maxRedirects,p):b}),p)};m.exports=b},{"./pojo_from_xml":32,"./utils/copy":34,"./utils/defaults":35,"./utils/extend":36,"./utils/nodeify_promise":37,"./xml_from_vast":44,lie:26,superagent:45}],
32:[function(k,m,r){function a(a){return a[0]||{attributes:{}}}function b(a){return a.find("StaticResource,IFrameResource,HTMLResource").map(function(a){return{type:a.tag.replace(/Resource$/,"").toLowerCase(),creativeType:a.attributes.creativeType,data:a.value}})}var c=k("./utils/parse_xml"),e=k("./utils/timestamp_to_seconds"),h=k("./utils/string_to_boolean"),d=k("./utils/extend"),u=k("./utils/trim_object"),l=k("./utils/numberify"),x={linear:function(b){var c=a(b.find("Duration")),g=b.find("Tracking"),
d=a(b.find("AdParameters")),k=b.find("VideoClicks")[0];b=b.find("MediaFile");return{type:"linear",duration:e(c.value)||void 0,trackingEvents:g.map(function(a){return{event:a.attributes.event,uri:a.value}}),parameters:d.value,videoClicks:k&&function(){var b=a(k.find("ClickThrough")),c=k.find("ClickTracking"),e=k.find("CustomClick");return{clickThrough:b.value,clickTrackings:c.map(function(a){return a.value}),customClicks:e.map(function(a){return{id:a.attributes.id,uri:a.value}})}}(),mediaFiles:b.map(function(a){var b=
a.attributes;return{id:b.id,delivery:b.delivery,type:b.type,uri:a.value,bitrate:l(b.bitrate),width:l(b.width),height:l(b.height),scalable:h(b.scalable),maintainAspectRatio:h(b.maintainAspectRatio),apiFramework:b.apiFramework}})}},companions:function(c){return{type:"companions",companions:c.find("Companion").map(function(c){var e=c.find("Tracking"),d=a(c.find("CompanionClickThrough")),h=a(c.find("AltText")),k=a(c.find("AdParameters"));return{id:c.attributes.id,width:l(c.attributes.width),height:l(c.attributes.height),
expandedWidth:l(c.attributes.expandedWidth),expandedHeight:l(c.attributes.expandedHeight),apiFramework:c.attributes.apiFramework,resources:b(c),trackingEvents:e.map(function(a){return{event:a.attributes.event,uri:a.value}}),clickThrough:d.value,altText:h.value,parameters:k.value}})}},nonLinear:function(c){var d=c.find("NonLinear");c=c.find("Tracking");return{type:"nonLinear",ads:d.map(function(c){var d=a(c.find("NonLinearClickThrough")),g=a(c.find("AdParameters"));return{id:c.attributes.id,width:l(c.attributes.width),
height:l(c.attributes.height),expandedWidth:l(c.attributes.expandedWidth),expandedHeight:l(c.attributes.expandedHeight),scalable:h(c.attributes.scalable),maintainAspectRatio:h(c.attributes.maintainAspectRatio),minSuggestedDuration:e(c.attributes.minSuggestedDuration)||void 0,apiFramework:c.attributes.apiFramework,resources:b(c),clickThrough:d.value,parameters:g.value}}),trackingEvents:c.map(function(a){return{event:a.attributes.event,uri:a.value}})}}},w={inline:function(b){var c=a(b.find("AdTitle")),
e=a(b.find("Description"));b=a(b.find("Survey"));return{type:"inline",title:c.value,description:e.value,survey:b.value}},wrapper:function(b){return{type:"wrapper",vastAdTagURI:a(b.find("VASTAdTagURI")).value}}};m.exports=function(b){var e=c(b);if(!e("VAST")[0])throw Error("["+b+"] is not a valid VAST document.");return u({version:a(e("VAST")).attributes.version,ads:e("Ad").map(function(b){var c=a(b.find("Wrapper,InLine")).tag.toLowerCase(),e=a(b.find("AdSystem")),g=b.find("Error"),p=b.find("Impression"),
h=b.find("Creative"),k=b.find("Extensions");return d({id:b.attributes.id,system:{name:e.value,version:e.attributes.version},errors:g.map(function(a){return a.value}),impressions:p.map(function(a){return{uri:a.value,id:a.attributes.id}}),creatives:h.map(function(b){var c=function(){switch(a(b.find("Linear,CompanionAds,NonLinearAds")).tag){case "Linear":return"linear";case "CompanionAds":return"companions";case "NonLinearAds":return"nonLinear";default:return null}}();if(null!=c)return d({id:b.attributes.id,
sequence:l(b.attributes.sequence),adID:b.attributes.AdID},x[c](b))}),extensions:k.map(function(a){try{return{extension:a.children().map(function(a){if("aniview"==a.attributes.type)return{type:a.attributes.type,tag:JSON.parse(a.children()[0].value)}})}}catch(la){}return null})},w[c](b))})},!0)}},{"./utils/extend":36,"./utils/numberify":38,"./utils/parse_xml":39,"./utils/string_to_boolean":41,"./utils/timestamp_to_seconds":42,"./utils/trim_object":43}],33:[function(k,m,r){function a(a){return null!==
a&&void 0!==a}function b(a){return void 0!==a?String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function c(a){for(var b="";a--;)b+=" ";return b}function e(a){return(void 0!==a?function(a){for(var b=[],c=/]]\x3e/g,e=0,d,g;d=c.exec(a);)g=d.index+2,b.push(d.input.substring(e,g)),e=g;b.push(a.substring(e,a.length));return b}(String(a)):[""]).reduce(function(a,b){return a+"<![CDATA["+b+"]]\x3e"},"")}function h(a){return a.cdata?e(a.value):
b(a.value)}function d(e,l,k){var m=e.tag,r=e.attributes||{},u=Object.keys(r),g=e.value,x=0<(e.children||[]).length;u=u.every(function(b){return a(r[b])})&&0<u.length;g=a(g)||x||u;u=c(l);var z="<"+m+Object.keys(r).reduce(function(c,e){return k&&!a(r[e])?c:c+" "+e+'="'+b(r[e])+'"'},"")+">";m="</"+m+">";return!k||g||e.required?x?[u+z].concat(e.children.reduce(function(a,b){return a.concat(d(b,l+4,k))},[]),[u+m]):[u+z+h(e)+m]:[]}m.exports=function(a,b){return['<?xml version="1.0" encoding="UTF-8"?>'].concat(d(a,
0,b)).join("\n")}},{}],34:[function(k,m,r){function a(a,b,e){return Object.keys(a).reduce(function(b,d){b[d]=e?c(a[d],null,!0):a[d];return b},b||{})}function b(a,b,k){b=b||[];e.apply(b,k?a.map(function(a){return c(a,null,!0)}):a);return b}function c(c,e,k){var d=("object"===typeof e||null)&&e;e="boolean"===typeof e?e:k;return Object(c)!==c?c:c instanceof Array?b(c,d,e):a(c,d,e)}var e=Array.prototype.push;m.exports=c},{}],35:[function(k,m,r){function a(a){return Object(a)===a}function b(a){return a instanceof
Array}var c=Array.prototype.push;m.exports=function h(d,k){return[d,k].every(b)?(c.apply(k,d.filter(function(a){return 0>k.indexOf(a)})),k):Object.keys(d).reduce(function(b,c){[d[c],b[c]].every(a)&&h(d[c],b[c]);c in b||(b[c]=d[c]);return b},k)}},{}],36:[function(k,m,r){m.exports=function(){return Array.prototype.slice.call(arguments).reduce(function(a,b){return Object.keys(b||{}).reduce(function(a,e){a[e]=b[e];return a},a)},{})}},{}],37:[function(k,m,r){m.exports=function(a,b){if("function"!==typeof b)return a;
a.then(function(a){b(null,a)},function(a){b(a)});return a}},{}],38:[function(k,m,r){m.exports=function(a){if(/string|number|boolean/.test(typeof a))return isNaN(a)?void 0:Number(a)}},{}],39:[function(k,m,r){function a(d){return{tag:d.tagName,value:0<d.childElementCount?null:d.textContent,attributes:e.call(d.attributes,function(a,b){a[b.name]=b.value;return a},{}),find:function(c){return b.call(d.querySelectorAll(c),a)},children:function(){return c.call(d.childNodes,function(a){return a instanceof
Element}).map(a)}}}var b=Array.prototype.map,c=Array.prototype.filter,e=Array.prototype.reduce,h=new DOMParser;m.exports=function(c){var e=h.parseFromString(c,"application/xml");try{if(e&&e.children){var d=e.getElementsByTagName("parsererror");d&&0<d.length&&(c=c.replace(/[^A-Za-z 0-9 \.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g,""),e=h.parseFromString(c,"application/xml"))}}catch(x){}return function(c){return b.call(e.querySelectorAll(c),a)}}},{}],40:[function(k,m,r){function a(a){return(9<
a?"":"0")+a.toString()}m.exports=function(b){return Number(b)!==b?null:[Math.floor(b/60/60),Math.floor(b/60%60),Math.floor(b%60%60)].map(a).join(":")}},{}],41:[function(k,m,r){m.exports=function(a){switch((a||"").toLowerCase()){case "true":return!0;case "false":return!1}}},{}],42:[function(k,m,r){m.exports=function(a){return(a=(a||"").match(/^(\d\d):(\d\d):(\d\d)$/))&&a.slice(1,4).map(parseFloat).reduce(function(a,c,e){return a+c*Math.pow(60,Math.abs(e-2))},0)}},{}],43:[function(k,m,r){m.exports=
function b(c,e){return Object(c)!==c?c:Object.keys(c).reduce(function(h,d){e&&c[d]instanceof Array?h[d]=c[d].filter(function(b){return void 0!==b}).map(function(c){return b(c,!0)}):e&&c[d]instanceof Object?h[d]=b(c[d],!0):void 0!==c[d]&&(h[d]=c[d]);return h},{})}},{}],44:[function(k,m,r){function a(a){return{tag:"TrackingEvents",children:a.map(function(a){return{tag:"Tracking",attributes:{event:a.event},value:a.uri,cdata:!0}})}}function b(a){return a.map(function(a){a:{switch(a.type){case "static":var b=
"StaticResource";break a;case "iframe":b="IFrameResource";break a;case "html":b="HTMLResource";break a}b=void 0}return{tag:b,attributes:{creativeType:a.creativeType},value:a.data,cdata:!0}})}function c(a){return{tag:"AdParameters",value:a.parameters}}var e=k("./utils/seconds_to_timestamp"),h=k("./utils/compile_xml"),d={linear:function(b){return{tag:"Linear",children:[{tag:"Duration",value:e(b.duration)},a(b.trackingEvents),c(b)].concat(b.videoClicks?[{tag:"VideoClicks",children:[{tag:"ClickThrough",
value:b.videoClicks.clickThrough,cdata:!0}].concat(b.videoClicks.clickTrackings.map(function(a){return{tag:"ClickTracking",value:a,cdata:!0}}),b.videoClicks.customClicks.map(function(a){return{tag:"CustomClick",attributes:{id:a.id},value:a.uri,cdata:!0}}))}]:[],[{tag:"MediaFiles",children:b.mediaFiles.map(function(a){return{tag:"MediaFile",attributes:{id:a.id,width:a.width,height:a.height,bitrate:a.bitrate,type:a.type,delivery:a.delivery,scalable:a.scalable,maintainAspectRatio:a.maintainAspectRatio,
apiFramework:a.apiFramework},value:a.uri,cdata:!0}})}])}},companions:function(e){return{tag:"CompanionAds",children:e.companions.map(function(e){return{tag:"Companion",attributes:{id:e.id,width:e.width,height:e.height,expandedWidth:e.expandedWidth,expandedHeight:e.expandedHeight,apiFramework:e.apiFramework},children:b(e.resources).concat([a(e.trackingEvents),{tag:"CompanionClickThrough",value:e.clickThrough,cdata:!0},{tag:"AltText",value:e.altText},c(e)])}})}},nonLinear:function(d){return{tag:"NonLinearAds",
children:d.ads.map(function(a){return{tag:"NonLinear",attributes:{id:a.id,width:a.width,height:a.height,expandedWidth:a.expandedWidth,expandedHeight:a.expandedHeight,scalable:a.scalable,maintainAspectRatio:a.maintainAspectRatio,minSuggestedDuration:e(a.minSuggestedDuration),apiFramework:a.apiFramework},children:b(a.resources).concat([{tag:"NonLinearClickThrough",value:a.clickThrough,cdata:!0},c(a)])}}).concat([a(d.trackingEvents)])}}};m.exports=function(a){return h({tag:"VAST",attributes:{version:a.get("version")},
children:a.map("ads",function(a){var b={id:a.id};a:{switch(a.type){case "inline":var c="InLine";break a;case "wrapper":c="Wrapper";break a}c=void 0}return{tag:"Ad",attributes:b,children:[{tag:c,children:[{tag:"AdSystem",attributes:{version:a.system.version},value:a.system.name},{tag:"AdTitle",value:a.title},{tag:"Description",value:a.description},{tag:"Survey",value:a.survey,cdata:!0},{tag:"VASTAdTagURI",value:a.vastAdTagURI,cdata:!0}].concat(a.errors.map(function(a){return{tag:"Error",value:a,cdata:!0}}),
a.impressions.map(function(a){return{tag:"Impression",value:a.uri,cdata:!0,attributes:{id:a.id}}}),[{tag:"Creatives",children:a.creatives.map(function(a){return{tag:"Creative",attributes:{id:a.id,sequence:a.sequence,AdID:a.adID},children:[d[a.type](a)]}}),required:!0}])}]}})},!0)}},{"./utils/compile_xml":33,"./utils/seconds_to_timestamp":40}],45:[function(k,m,r){function a(){}function b(a){switch({}.toString.call(a)){case "[object File]":case "[object Blob]":case "[object FormData]":return!0;default:return!1}}
function c(){var a=this;this.readyState=this.status=0;this.responseText=this.utl=this.method="";this.aborted=!1;this.open=function(b,c){a.method=b;c=c.replace("https","http");a.url=c};this.send=function(){a.aborted||window.AniFlashProxy.request(a.url,a.method,function(b){a.aborted||"function"!=typeof a.onload||a.aborted||(a.responseText=b,a.readyState=4,a.status=200,a.onload())},function(b){a.aborted||"function"!=typeof a.onflashproxyerror||a.aborted||(a.responseText="",a.onflashproxyerror())})};
this.abort=function(){a.aborted=!0}}function e(a){if(a!==Object(a))return a;var b=[],c;for(c in a)null!=a[c]&&h(b,c,a[c]);return b.join("&")}function h(a,b,c){if(Array.isArray(c))return c.forEach(function(c){h(a,b,c)});a.push(encodeURIComponent(b)+"="+encodeURIComponent(c))}function d(a){var b={};a=a.split("&");for(var c,e=0,d=a.length;e<d;++e)c=a[e],c=c.split("="),b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return b}function u(a){return g(a.split(/ *; */),function(a,b){var c=b.split(/ *= */);
b=c.shift();c=c.shift();b&&c&&(a[b]=c);return a},{})}function l(a,b){this.req=a;this.xhr=this.req.xhr;this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"===typeof this.xhr.responseType?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;if("function"==typeof this.xhr.getAllResponseHeaders){a=this.xhr.getAllResponseHeaders().split(/\r?\n/);b={};a.pop();for(var c=0,e=a.length;c<e;++c){var d=a[c];var g=d.indexOf(":");var p=d.slice(0,
g).toLowerCase();g=E(d.slice(g+1));b[p]=g}this.header=this.headers=b}else this.statusText="OK",this.header={};this.setStatusProperties("undefined"===typeof this.xhr.status?200:this.xhr.status);this.header["content-type"]="function"==typeof this.xhr.getResponseHeader?this.xhr.getResponseHeader("content-type"):this.xhr.contentType;this.setHeaderProperties(this.header);this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function x(a,b){var c=this;I.call(this);
this._query=this._query||[];this.method=a;this.url=b;this._withCredentials=!0;this.header={};this._header={};this.on("end",function(){var a=null,b=null;try{b=new l(c)}catch(ha){return a=Error("Parser is unable to parse the response"),a.parse=!0,a.original=ha,a.rawResponse=c.xhr&&c.xhr.responseText?c.xhr.responseText:null,c.callback(a)}c.emit("response",b);if(a||200<=b.status&&300>b.status)return c.callback(a,b);var e=Error(b.statusText||"Unsuccessful HTTP response");e.original=a;e.response=b;e.status=
b.status;c.callback(e,b)})}function w(a,b){return"function"==typeof b?(new x("GET",a)).end(b):1==arguments.length?new x("GET",a):new x(a,b)}function C(a,b){a=w("DELETE",a);b&&a.end(b);return a}var I=k("emitter"),g=k("reduce");var D="undefined"!==typeof window?window:"undefined"!==typeof self?self:this;if("undefined"==typeof window.AniFlashProxy){var z=window.AniFlashProxy={};z.swfUrl=null;z.container=null;z.requests=null;z.flash=null;z.inited=!1}z.request=function(a,b,c,e){this.init();var d=Date.now()+
"_"+Math.random();this.requests.push({id:d,url:a,method:b,callbackComplete:c,callbackError:e});this.load();return d};z.init=function(){z.swfUrl=window.AV_player.config.basejsurl+"proxy.swf";this.container=window.AV_player.slotWindow.document.body;window.AV_player.slotWindow.AniFlashProxy=window.AniFlashProxy;if(!this.swfUrl)throw Error("AniFlashProxy.swfUrl invalid");if(!this.container)throw Error("AniFlashProxy.container invalid");this.requests||(this.requests=[],this.initFlash())};z.initFlash=function(){var a=
this;var b=document.getElementById("AV_proxyFlash");b||(b=document.createElement("object"),b.id="AV_proxyFlash",this.container.appendChild(b));var c=function(){function a(){if(!G&&C.document.getElementsByTagName("body")[0]){try{var a=y.createElement("span");a.style.display="none";var b=y.getElementsByTagName("body")[0].appendChild(a);b.parentNode.removeChild(b)}catch(oa){return}G=!0;b=n.length;for(a=0;a<b;a++)n[a]()}}function b(a){G?a():n[n.length]=a}function e(){var a=y.getElementsByTagName("body")[0],
b=y.createElement("object");b.setAttribute("style","visibility: hidden;");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var f=0;(function J(){if("undefined"!=typeof c.GetVariable)try{var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),F.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}catch(T){F.pv=[8,0,0]}else if(10>f){f++;setTimeout(J,10);return}a.removeChild(b);c=null;d()})()}else d()}function d(){var a=D.length;if(0<a)for(var b=0;b<
a;b++){var c=D[b].id,f=D[b].callbackFn,e={success:!1,id:c};if(0<F.pv[0]){var d=r(c);if(d)if(!N(D[b].swfVersion)||F.wk&&312>F.wk)if(D[b].expressInstall&&p()){e={};e.data=D[b].expressInstall;e.width=d.getAttribute("width")||"0";e.height=d.getAttribute("height")||"0";d.getAttribute("class")&&(e.styleclass=d.getAttribute("class"));d.getAttribute("align")&&(e.align=d.getAttribute("align"));var B={};d=d.getElementsByTagName("param");for(var n=d.length,l=0;l<n;l++)"movie"!=d[l].getAttribute("name").toLowerCase()&&
(B[d[l].getAttribute("name")]=d[l].getAttribute("value"));h(e,B,c,f)}else c=d,F.ie&&4!=c.readyState?(c.style.display="none",B=y.createElement("div"),c.parentNode.insertBefore(B,c),B.parentNode.replaceChild(k(c),B),m(c)):c.parentNode.replaceChild(k(c),c),f&&f(e);else w(c,!0),f&&(e.success=!0,e.ref=g(c),e.id=c,f(e))}else w(c,!0),f&&((c=g(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c,e.id=c.id),f(e))}}function g(a){var b=null;(a=r(a))&&"OBJECT"===a.nodeName.toUpperCase()&&(b="undefined"!==
typeof a.SetVariable?a:a.getElementsByTagName("object")[0]||a);return b}function p(){return!U&&N("6.0.65")&&(F.win||F.mac)&&!(F.wk&&312>F.wk)}function h(a,b,c,f){var e=r(c);c=q(c);U=!0;aa=f||null;P={success:!1,id:c};if(e){"OBJECT"==e.nodeName.toUpperCase()?(Z=k(e),v=null):(Z=e,v=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";f=F.ie?
"ActiveX":"PlugIn";f="MMredirectURL="+encodeURIComponent(C.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(y.title.slice(0,47)+" - Flash Player Installation");b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+f):f;F.ie&&4!=e.readyState&&(f=y.createElement("div"),c+="SWFObjectNew",f.setAttribute("id",c),e.parentNode.insertBefore(f,e),e.style.display="none",m(e));l(a,b,c)}}function k(a){var b=y.createElement("div");if(F.win&&F.ie)b.innerHTML=
a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,f=0;f<c;f++)1==a[f].nodeType&&"PARAM"==a[f].nodeName||8==a[f].nodeType||b.appendChild(a[f].cloneNode(!0));return b}function l(a,b,c){var f=r(c);c=q(c);if(F.wk&&312>F.wk)return e;if(f){var e=F.ie?y.createElement("div"):y.createElement("object");var d;"undefined"==typeof a.id&&(a.id=c);for(k in b)if(b.hasOwnProperty(k)&&"movie"!==k.toLowerCase()){c=e;var g=k,p=b[k],h=y.createElement("param");h.setAttribute("name",
g);h.setAttribute("value",p);c.appendChild(h)}if(F.ie){b=a.data;e=e.innerHTML;var k=y.createElement("div");k.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+b+"'>"+e+"</object>";e=k.firstChild}for(d in a)a.hasOwnProperty(d)&&(b=d.toLowerCase(),"styleclass"===b?e.setAttribute("class",a[d]):"classid"!==b&&"data"!==b&&e.setAttribute(d,a[d]));F.ie?I[I.length]=a.id:(e.setAttribute("type","application/x-shockwave-flash"),e.setAttribute("data",a.data));
f.parentNode.replaceChild(e,f)}return e}function m(a){var b=r(a);b&&"OBJECT"==b.nodeName.toUpperCase()&&(F.ie?(b.style.display="none",function ia(){if(4==b.readyState){for(var a in b)"function"==typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(ia,10)}()):b.parentNode.removeChild(b))}function q(a){return a&&a.nodeType&&1===a.nodeType?a.id:a}function r(a){if(a&&a.nodeType&&1===a.nodeType)return a;var b=null;try{b=y.getElementById(a)}catch(oa){}return b}function u(a,b,c){a.attachEvent(b,
c);Y[Y.length]=[a,b,c]}function N(a){var b=F.pv;a=(a+"").split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function x(a,b,c,f){var e=y.getElementsByTagName("head")[0];e&&(c="string"==typeof c?c:"screen",f&&(B=X=null),X&&B==c||(f=y.createElement("style"),f.setAttribute("type","text/css"),f.setAttribute("media",c),X=e.appendChild(f),F.ie&&"undefined"!=typeof y.styleSheets&&0<y.styleSheets.length&&
(X=y.styleSheets[y.styleSheets.length-1]),B=c),X&&("undefined"!=typeof X.addRule?X.addRule(a,b):"undefined"!=typeof y.createTextNode&&X.appendChild(y.createTextNode(a+" {"+b+"}"))))}function w(a,b){if(na){b=b?"visible":"hidden";var c=r(a);G&&c?c.style.visibility=b:"string"===typeof a&&x("#"+a,"visibility:"+b)}}function z(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var C=window.AV_player.slotWindow,y=C.document,E=navigator,f=!1,n=[],D=[],I=
[],Y=[],Z,v,aa,P,G=!1,U=!1,X,B,na=!0,da=!1,F=function(){var a="undefined"!=typeof y.getElementById&&"undefined"!=typeof y.getElementsByTagName&&"undefined"!=typeof y.createElement,b=E.userAgent.toLowerCase(),c=E.platform.toLowerCase(),e=c?/win/.test(c):/win/.test(b);c=c?/mac/.test(c):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var d="Microsoft Internet Explorer"===E.appName,g=[0,0,0],p=null;if("undefined"!=typeof E.plugins&&"object"==typeof E.plugins["Shockwave Flash"])(p=
E.plugins["Shockwave Flash"].description)&&"undefined"!=typeof E.mimeTypes&&E.mimeTypes["application/x-shockwave-flash"]&&E.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(f=!0,d=!1,p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(p.replace(/^(.*)\..*$/,"$1"),10),g[1]=parseInt(p.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(p)?parseInt(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof C.ActiveXObject)try{if(p=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))d=
!0,p=p.split(" ")[1].split(","),g=[parseInt(p[0],10),parseInt(p[1],10),parseInt(p[2],10)]}catch(T){}return{w3:a,pv:g,wk:b,ie:d,win:e,mac:c}}();(function(){F.w3&&(("undefined"!=typeof y.readyState&&("complete"===y.readyState||"interactive"===y.readyState)||"undefined"==typeof y.readyState&&(y.getElementsByTagName("body")[0]||y.body))&&a(),G||("undefined"!=typeof y.addEventListener&&y.addEventListener("DOMContentLoaded",a,!1),F.ie&&(y.attachEvent("onreadystatechange",function ta(){"complete"==y.readyState&&
(y.detachEvent("onreadystatechange",ta),a())}),C==top&&function oa(){if(!G){try{y.documentElement.doScroll("left")}catch(ia){setTimeout(oa,0);return}a()}}()),F.wk&&function ta(){G||(/loaded|complete/.test(y.readyState)?a():setTimeout(ta,0))}()))})();n[0]=function(){f?e():d()};(function(){F.ie&&window.attachEvent("onunload",function(){for(var a=Y.length,b=0;b<a;b++)Y[b][0].detachEvent(Y[b][1],Y[b][2]);a=I.length;for(b=0;b<a;b++)m(I[b]);for(var f in F)F[f]=null;F=null;for(var e in c)c[e]=null;c=null})})();
return{registerObject:function(a,b,c,f){if(F.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=f;D[D.length]=e;w(a,!1)}else f&&f({success:!1,id:a})},getObjectById:function(a){if(F.w3)return g(a)},embedSWF:function(a,c,f,e,d,g,k,B,n,m){var G=q(c),U={success:!1,id:G};F.w3&&!(F.wk&&312>F.wk)&&a&&c&&f&&e&&d?(w(G,!1),b(function(){f+="";e+="";var b={};if(n&&"object"===typeof n)for(var q in n)b[q]=n[q];b.data=a;b.width=f;b.height=e;q={};if(B&&"object"===typeof B)for(var P in B)q[P]=
B[P];if(k&&"object"===typeof k)for(var r in k)if(k.hasOwnProperty(r)){P=da?encodeURIComponent(r):r;var u=da?encodeURIComponent(k[r]):k[r];q.flashvars="undefined"!=typeof q.flashvars?q.flashvars+("&"+P+"="+u):P+"="+u}if(N(d))r=l(b,q,c),b.id==G&&w(G,!0),U.success=!0,U.ref=r,U.id=r.id;else{if(g&&p()){b.data=g;h(b,q,c,m);return}w(G,!0)}m&&m(U)})):m&&m(U)},switchOffAutoHideShow:function(){na=!1},enableUriEncoding:function(a){da="undefined"===typeof a?!0:a},ua:F,getFlashPlayerVersion:function(){return{major:F.pv[0],
minor:F.pv[1],release:F.pv[2]}},hasFlashPlayerVersion:N,createSWF:function(a,b,c){if(F.w3)return l(a,b,c)},showExpressInstall:function(a,b,c,f){F.w3&&p()&&h(a,b,c,f)},removeSWF:function(a){F.w3&&m(a)},createCSS:function(a,b,c,f){F.w3&&x(a,b,c,f)},addDomLoadEvent:b,addLoadEvent:function(a){if("undefined"!=typeof C.addEventListener)C.addEventListener("load",a,!1);else if("undefined"!=typeof y.addEventListener)y.addEventListener("load",a,!1);else if("undefined"!=typeof C.attachEvent)u(C,"onload",a);
else if("function"==typeof C.onload){var b=C.onload;C.onload=function(){b();a()}}else C.onload=a},getQueryParamValue:function(a){var b=y.location.search||y.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return z(b);b=b.split("&");for(var c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return z(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=r("SWFObjectExprInst");a&&Z&&(a.parentNode.replaceChild(Z,a),v&&(w(v,!0),F.ie&&(Z.style.display=
"block")),aa&&aa(P));U=!1}},version:"2.3"}}();b={vpaidURI:encodeURIComponent(this.swfUrl.trim())};c.embedSWF(this.swfUrl,"AV_proxyFlash","100%","100%","9",window.AV_player.config.basejsurl+"expressInstall.swf",b,{wmode:"transparent",movie:this.swfUrl,play:!1,loop:!1,scale:"noscale",salign:"lt",allowScriptAccess:"always"},{style:'display=block;width=0;height=0;border="none";opacity=0;'},function(b){b.success&&(a.flash=b.ref)})};z.initComplete=function(){var a=this;this.inited=!0;setTimeout(function(){a.load()},
10)};z.requestSecurityError=function(a,b){var c=this.removeRequestById(b);c&&c.callbackError&&c.callbackError(a,b)};z.requestIOError=function(a,b){var c=this.removeRequestById(b);c&&c.callbackError&&c.callbackError(a,b)};z.requestComplete=function(a,b){var c=this.removeRequestById(b);c&&c.callbackComplete&&c.callbackComplete(a,b)};z.removeRequestById=function(a){if(a=this.getRequestById(a)){var b=this.requests.indexOf(a);-1!=b&&this.requests.splice(b,1)}return a};z.getRequestById=function(a){for(var b in this.requests){var c=
this.requests[b];if(c.id==a)return c}return null};z.load=function(){if(this.flash&&this.inited)for(var a in this.requests){var b=this.requests[a];b.started||(b.started=!0,this.flash.request(b.url,b.method,b.id))}};w.getXHR=function(){var a="undefined"!==typeof navigator.plugins&&"object"===typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if("https:"==window.location.protocol&&a&&window.AV_player.config.flashsslproxy&&window.AV_player.useFlashProxy)return new c;
a=new XMLHttpRequest;return"withCredentials"in a?a:"undefined"!=typeof XDomainRequest?new XDomainRequest:null};var E="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};w.serializeObject=e;w.parseString=d;w.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};w.serialize={"application/x-www-form-urlencoded":e,"application/json":JSON.stringify};
w.parse={"application/x-www-form-urlencoded":d,"application/json":JSON.parse};l.prototype.get=function(a){return this.header[a.toLowerCase()]};l.prototype.setHeaderProperties=function(a){a=this.header["content-type"]||"";this.type=a.split(/ *; */).shift();a=u(a);for(var b in a)this[b]=a[b]};l.prototype.parseBody=function(a){var b=w.parse[this.type];return b&&a&&(a.length||a instanceof Object)?b(a):null};l.prototype.setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=this.statusCode=
a;this.statusType=b;this.info=1==b;this.ok=2==b;this.clientError=4==b;this.serverError=5==b;this.error=4==b||5==b?this.toError():!1;this.accepted=202==a;this.noContent=204==a;this.badRequest=400==a;this.unauthorized=401==a;this.notAcceptable=406==a;this.notFound=404==a;this.forbidden=403==a};l.prototype.toError=function(){var a=this.req,b=a.method;a=a.url;var c=Error("cannot "+b+" "+a+" ("+this.status+")");c.status=this.status;c.method=b;c.url=a;return c};w.Response=l;I(x.prototype);x.prototype.use=
function(a){a(this);return this};x.prototype.timeout=function(a){this._timeout=a;return this};x.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};x.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("end"),this};x.prototype.set=function(a,b){if(a===Object(a)){for(var c in a)this.set(c,a[c]);return this}this._header[a.toLowerCase()]=b;this.header[a]=b;return this};x.prototype.unset=function(a){delete this._header[a.toLowerCase()];
delete this.header[a];return this};x.prototype.getHeader=function(a){return this._header[a.toLowerCase()]};x.prototype.type=function(a){this.set("Content-Type",w.types[a]||a);return this};x.prototype.parse=function(a){this._parser=a;return this};x.prototype.accept=function(a){this.set("Accept",w.types[a]||a);return this};x.prototype.auth=function(a,b){a=btoa(a+":"+b);this.set("Authorization","Basic "+a);return this};x.prototype.query=function(a){"string"!=typeof a&&(a=e(a));a&&this._query.push(a);
return this};x.prototype.field=function(a,b){this._formData||(this._formData=new D.FormData);this._formData.append(a,b);return this};x.prototype.attach=function(a,b,c){this._formData||(this._formData=new D.FormData);this._formData.append(a,b,c||b.name);return this};x.prototype.send=function(a){var c=a===Object(a),e=this.getHeader("Content-Type"),d;if(d=c)d=this._data,d=d===Object(d);if(d)for(var g in a)this._data[g]=a[g];else"string"==typeof a?(e||this.type("form"),e=this.getHeader("Content-Type"),
this._data="application/x-www-form-urlencoded"==e?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;if(!c||b(a))return this;e||this.type("json");return this};x.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout();c(a,b)};x.prototype.crossDomainError=function(){var a=Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0;a.status=this.status;
a.method=this.method;a.url=this.url;this.callback(a)};x.prototype.timeoutError=function(){var a=this._timeout,b=Error("timeout of "+a+"ms exceeded");b.timeout=a;this.callback(b)};x.prototype.withCredentials=function(){this._withCredentials=!0;return this};x.prototype.end=function(c){var e=this,d=this.xhr=w.getXHR(),g=this._query.join("&"),h=this._timeout||7E3,k=this._formData||this._data;if(this.url&&-1<this.url.indexOf("ssp.lkqd.net")){if(window.lastLCall&&300>Date.now()-window.lastLCall){setTimeout(function(){e.end(c)},
300);return}window.lastLCall=Date.now()}this._callback=c||a;"undefined"!==typeof d.onreadystatechange?d.onreadystatechange=function(){if(4==d.readyState){try{var a=d.status}catch(ca){a=0}if(0==a){if(e.timedout)return e.timeoutError();if(e.aborted)return;if(e._withCredentials){e._withCredentials=!1;setTimeout(function(){e.end.call(e,e._callback)},10);return}return e.crossDomainError()}e.emit("end")}}:(d.onprogress=function(){},d.ontimeout=function(){},d.onload=function(){e.emit("end")},d.onflashproxyerror=
function(){e.emit("end")});var p=function(a){0<a.total&&(a.percent=a.loaded/a.total*100);a.direction="download";e.emit("progress",a)};this.hasListeners("progress")&&(d.onprogress=p);try{d.upload&&this.hasListeners("progress")&&(d.upload.onprogress=p)}catch(ma){}h&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0;e.abort()},h));g&&(g=w.serializeObject(g),this.url+=~this.url.indexOf("?")?"&"+g:"?"+g);d.open(this.method,this.url,!0);this._withCredentials&&(d.withCredentials=!0);"GET"==
this.method||"HEAD"==this.method||"string"==typeof k||b(k)||(g=this.getHeader("Content-Type"),h=this._parser||w.serialize[g?g.split(";")[0]:""],!h&&/[\/+]json\b/.test(g)&&(h=w.serialize["application/json"]),h&&(k=h(k)));for(var l in this.header)null!=this.header[l]&&d.setRequestHeader(l,this.header[l]);this.emit("request",this);d.send("undefined"!==typeof k?k:null);return this};x.prototype.then=function(a,b){return this.end(function(c,e){c?b(c):a(e)})};w.Request=x;w.get=function(a,b,c){a=w("GET",
a);"function"==typeof b&&(c=b,b=null);b&&a.query(b);c&&a.end(c);return a};w.head=function(a,b,c){a=w("HEAD",a);"function"==typeof b&&(c=b,b=null);b&&a.send(b);c&&a.end(c);return a};w.del=C;w["delete"]=C;w.patch=function(a,b,c){a=w("PATCH",a);"function"==typeof b&&(c=b,b=null);b&&a.send(b);c&&a.end(c);return a};w.post=function(a,b,c){a=w("POST",a);"function"==typeof b&&(c=b,b=null);b&&a.send(b);c&&a.end(c);return a};w.put=function(a,b,c){a=w("PUT",a);"function"==typeof b&&(c=b,b=null);b&&a.send(b);
c&&a.end(c);return a};m.exports=w},{emitter:46,reduce:47}],46:[function(k,m,r){function a(b){if(b){for(var c in a.prototype)b[c]=a.prototype[c];return b}}m.exports=a;a.prototype.on=a.prototype.addEventListener=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(c);return this};a.prototype.once=function(a,c){function b(){this.off(a,b);c.apply(this,arguments)}b.fn=c;this.on(a,b);return this};a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=
a.prototype.removeEventListener=function(a,c){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var b=this._callbacks["$"+a];if(!b)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var h,d=0;d<b.length;d++)if(h=b[d],h===c||h.fn===c){b.splice(d,1);break}return this};a.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),e=this._callbacks["$"+a];if(e){e=e.slice(0);for(var h=0,d=e.length;h<
d;++h)e[h].apply(this,b)}return this};a.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};a.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],47:[function(k,m,r){m.exports=function(a,b,c){for(var e=0,h=a.length,d=3==arguments.length?c:a[e++];e<h;)d=b.call(null,d,a[e],++e,a);return d}},{}],48:[function(k,m,r){var a="noError mediaPlayError mediaTimeout vpaidGeneralError vpaidLoadError vpaidLoadTimeout vpaidInitAdError vpaidInitAdTimeout vpaidStartAdError vpaidStartAdTimeout vpaidPlayError mediaJsonError".split(" ");
a.forEach(function(b){a[b]=b});Object.freeze(a);m.exports=a},{}]},{},[1])(1)});
(function(t){var k={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",
AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog",AdBid:"AdBid",AdError:"AdError"};t.aniviewPlayer=function(m){var r=this,a=5,b;t.AV_FlashOpen=this;var c=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)||/CriOS/.test(navigator.userAgent);/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);
var e=/iPhone|iPod|iPad/.test(navigator.userAgent),h=/(android)/i.test(navigator.userAgent),d=!1;(function(u){function l(a){if(d){var b="track1.aniview.com";n&&n.trackdomain&&(b=n.trackdomain);(new Image).src="https://"+b+"/track?pid="+m.environmentVars.publisherId+"&cid="+m.environmentVars.channelId+"&e=c"+a+"&cb="+Date.now()}}function x(){f.preroll=n.preroll;f.midrollTimer&&(clearTimeout(f.midrollTimer),f.resetAdRequest=!0);f.midrollTimer=0;f.resetAdRequest&&(f.resetAdRequest=!1,setTimeout(function(){S(W)},
10))}function w(){for(var a=-1,b=null,c=0;c<f.readyToPlay.length;c++){var e=f.waterfall.data.tags[f.readyToPlay[c].id];if(e.playerSettings&&0<e.playerSettings.vi){e=1==e.playerSettings.vi?50:e.playerSettings.vi;e=Math.max(0,Math.min(100,e));var d=Math.max(0,d||Utils.getViewabilityPerc(n.slot));if(d>=e){a=c;break}}else{a=c;break}}if(0<=a)b=f.readyToPlay.splice(a,1)[0],f.startAdViTime=0;else if(f.players.length==f.readyToPlay.length)if(f.startAdViTime=f.startAdViTime||Date.now(),Date.now()-f.startAdViTime<
1E3*n.startadvitimeout)Utils.writeLog(Utils.logLevels.debug,"AS waiting for view"),setTimeout(function(){r.startAd(!0)},250);else for(Utils.writeLog(Utils.logLevels.debug,"Wait for view ended, closing"),c=0;c<f.readyToPlay.length;c++)N(f.readyToPlay[c]),S(W);return b}function C(){f.isFullScreen&&!Utils.getFSElement(f.slotWindow.document)&&(f.slotWindow.document.removeEventListener(Utils.getFSEvent(),C),f.isFullScreen=!1,r.resizeAd(f.fsRestoreSize.width,f.fsRestoreSize.height,"normal"))}function I(){n.autoplay&&
0<f.preroll&&!f.prerollTimer&&0<n.prerolltimeout&&(f.prerollTimer=setTimeout(function(){f.prerollTimer=null;if(!f.player||f.player&&!f.player.impressionSet)f.preroll=0,ea()},1E3*n.prerolltimeout))}function g(){return Utils.isAutoSound(n)}function D(){if(0==f.readyToPlay.length)return!0;for(var a=f.readyToPlay[0],b=0;b<f.players.length;b++)if(f.advertisements[f.players[b]].Ad.num<a.num)return!1;return!0}function z(){function a(a){0==f.callStartTimer&&(0<f.callStartTimeout?(f.callStartTimer=setTimeout(function(){f.callStartTimer=
0;r.startAd(a)},1E3*f.callStartTimeout),f.callStartTimeout=0):r.startAd(a))}1==n.autoplay&&1<=f.readyToPlay.length&&-1==f.playing&&(D()?(0!=f.startTimer&&(clearTimeout(f.startTimer),f.startTimer=0),a(!0)):0==f.startTimer&&(f.startTimer=setTimeout(function(){f.startTimer=0;-1==f.playing&&a(!0)},1E3*n.startaddelay)))}function E(a){a.addEventListener("ended",function(){a.videoPlayerElement?(a.canVideoPlay=!0,a.videoPlayerElement.currentTime=-2,a.play()):(a.currentTime=0,a.pause(),setTimeout(function(){a.play()},
100))})}function p(a){if(!a.videoCompleteCalled){a.videoCompleteCalled=!0;var c=!1;a.player&&(c=a.player.impressionSet);f.playing==a.id&&(f.playing=-1,f.player=null,"content"!=n.preloader.type&&(f.divPreloader.style.zIndex="99999"),f.divPreloader.style.display="block","content"==n.preloader.type&&c&&ea());if(n.loopvideo)E(a.player.video);else if(c&&a&&a.sndInterval&&(clearInterval(a.sndInterval),a.sndInterval=0),!f.stopAd)if(f.impCount>=n.maximp&&-1==f.playing)S(W);else if(f.runCount<n.vastretry&&
1==f.preroll&&f.impressionSet){for(a=0;a<f.readyToPlay.length;a++)N(f.readyToPlay[a]);-1==f.playing&&S(W)}else 1==n.autoplay&&1<=f.readyToPlay.length&&-1==f.playing&&z(),f.advertisements.length>f.currentAd&&f.players.length<b?V(f.currentAd):-1==f.playing&&0>=f.players.length&&S(W)}}function N(a){if(!a.cleanupPlayerCalled){0<a.sec3Timer&&(clearTimeout(a.sec3Timer),a.sec3Timer=0);0<a.sec10Timer&&(clearTimeout(a.sec10Timer),a.sec10Timer=0);a.cleanupPlayerCalled=!0;if(f.playing==a.id){v.setPlayer(null);
f.playing=-1;f.player=null;f.activeImpression=!1;if("js"==n.preloader.type||"Image"==n.preloader.type)v.gui.style.display="none",f.divPreloader.style.display="block";var b=!1;a.player&&(b=a.player.impressionSet);"content"==n.preloader.type&&b&&(f.divPreloader.style.display="block",ea(!0))}if(a.player&&a.player.container&&a.player.container.parentNode){f.players.splice(f.players.indexOf(a.num),1);var c=a.player.container;c.style.display="none";setTimeout(function(){Utils.writeLog(Utils.logLevels.defaultLevel,
"cleanupPlayer remove container:"+a.id+":"+a.asid);if(a.player.slot&&a.player.frame){try{a.player.slot.removeChild(a.player.frame)}catch(X){}a.player.frame=null;try{a.player.container.removeChild(a.player.slot)}catch(X){}}c.parentNode.removeChild(c)},3E3)}for(b=0;b<f.readyToPlay.length;b++)a.num==f.readyToPlay[b].num&&f.readyToPlay.splice(b,1)}}function q(a,b){a="on"+a;if("function"==typeof r[a])r[a](b)}function R(a){function b(){f.adStoppedCalled||(f.adStoppedCalled=!0,q(k.AdStopped))}f.adStoppedCalled||
("1"==n.tgt&&f.playerSlot&&(f.playerSlot.style.display="none"),a?(f.adStoppedTimer&&(clearTimeout(f.adStoppedTimer),f.adStoppedTimer=0),b()):f.adStoppedTimer||(f.adStoppedTimer=setTimeout(function(){f.adStoppedTimer=0;b()},f.adStoppedTimeout)))}function la(a){f.maximps[a]||(f.maximps[a]={imps:0});f.maximps[a].imps++}function V(a){function b(a,b){if(a.impPostPixel&&n.tmf.adcontent)try{var c=a.player&&a.player.video&&a.player.video.src||"";"impression"==b&&c&&10<c.length&&(a.signature=Utils.getVideoSignature(c));
var d={video:c,sig:a.signature,macros:f.macros};H("POST",a.impPostPixel+b,!1).send(JSON.stringify(d))}catch(ia){}}function c(a){try{g()||a.sndEnabled||(a.player.adVolume=0)}catch(qa){}}var e=n.slot.querySelector("#videoslot");f.currentAd++;var d=f.advertisements[a].Ad;d.active=!0;d.asid=f.advertisements[a].asid;d.num=a;d.sortOrder=f.advertisements[a].sortOrder;f.players.push(a);var h=document.createElement("div");var l="";d.tag&&"string"===typeof d.tag.url&&-1<d.tag.url.indexOf(".lkqd.net")&&(l="\r",
d.vastPlayer&&(d.vastPlayer.opt2=!0));h.id="A"+l+"Vplayer"+a;h.style.position="absolute";1!=n.flashscale&&(h.style.top="-100000px");h.style.zIndex="1";"application/x-shockwave-flash"==d.mediaFiles[0].type?1!=n.flashscale?(h.style.width="640px",h.style.height="360px"):(h.style.width=0==n.width?"100%":""+n.width+"px",h.style.height=0==n.height?"100%":""+n.height+"px"):(h.style.width=n.width+"px",h.style.height=n.height+"px");e.appendChild(h);d.player.container=h;d.VideoComplete=!1;d.VideoStop=!1;d.player.reporter.track(d.player);
d.parameters&&"string"==typeof d.parameters&&(d.parameters=d.parameters.trim());d.player.load(d.mediaFiles,d.parameters,d.vastPlayer,d.trackingPixel,null,n.advideoslot?n.advideoslot:null,d.tag.type,d.tag).then(function(){});d.player.once(k.AdLoaded,function(){Utils.writeLog(Utils.logLevels.defaultLevel,"AdLoaded:"+d.id+":"+d.asid);var a=f.adLoaded;f.adLoaded=!0;if(Utils.isiOS()&&n.contentvideo&&n.nativevideo){var b=Utils.getOSVersion();b&&b.major&&("9"==b.major||"8"==b.major||"7"==b.major)&&this.video&&
this.video.src&&this.video.addEventListener("webkitendfullscreen",function(){v.paused=!0})}for(b=b=0;b<f.readyToPlay.length&&!(d.sortOrder<f.readyToPlay[b].sortOrder);b++);f.readyToPlay.splice(b,0,d);0==n.autoplay&&-1==f.playing?(v.bigPlay.style.display=n.showbigplay?"inline":"none",v.bigPlay.style.position="absolute",v.bigPlay.style.zIndex="99999",v.bigPlay.onclick=function(){f.divPreloader.style.zIndex="1";r.startAd();I()}):z();if("function"==typeof r.onAdLoaded&&!a)r.onAdLoaded()});d.player.on(k.AdDurationChange,
function(){Utils.writeLog(Utils.logLevels.defaultLevel,k.AdDurationChange+":"+d.id+":"+d.asid);q(k.AdDurationChange)});d.player.on(k.AdStarted,function(){c(d);Utils.writeLog(Utils.logLevels.defaultLevel,k.AdStarted+":"+d.id+":"+d.asid);q(k.AdStarted)});d.player.on(k.AdVideoStart,function(){c(d);Utils.writeLog(Utils.logLevels.defaultLevel,k.AdVideoStart+":"+d.id+":"+d.asid);q(k.AdVideoStart)});d.player.on(k.AdImpression,function(){function a(){var a="",c="",e="",h=null;f.impCount++;try{a=d.vastPlayer.vast.get("ads[0].creatives[0].videoClicks.clickThrough"),
d.tag.playerSettings&&d.tag.playerSettings.ops&&(c=decodeURIComponent(d.tag.playerSettings.ops)),e=d.player&&d.player.video&&d.player.video.src||"",h=d.player&&d.player.video,d.isSwf="application/x-shockwave-flash"==d.mediaFiles[0].type}catch(fa){}n.topasopt&&-1==f.topAsid.indexOf(d.asid)&&f.topAsid.push(d.asid);d.impTime=Date.now();q(k.AdImpression,{asid:d.asid,clickThrough:a,ops:c,videoUrl:e,video:h});b(d,"impression");if("59e75725073ef43488733566"==d.asid||"59e5fca8073ef449992ca434"==d.asid)a=
document.createElement("script"),a.src="https://z.moatads.com/tuiukftdisplay633960396608/moatad.js#moatClientLevel1=83782&moatClientLevel2=16139&moatClientLevel3=2764293&moatClientLevel4=50126&moatClientSlicer1=-&moatClientSlicer2=-&skin=0&zMoatADV=10836",d.player.container&&d.player.container.appendChild(a);la(d.asid);v.startSkipTimer(n.skiptimer,function(){q(k.AdSkippableStateChange)});if("js"==n.preloader.type||"Image"==n.preloader.type)v.gui.style.display="inline";f.impressionSet=!0;f.activeImpression=
!0;d.player.impressionSet=!0;Z=0;f.tagRequestCount=0;f.callStartTimeout=n.startmidroll;f.myInterval=setInterval(function(){try{"-100000px"==f.waterfall.data.tags[d.id].Ad.player.container.style.top&&(clearInterval(f.myInterval),f.myInterval=0,R())}catch(fa){clearInterval(f.myInterval),f.myInterval=0}},1E3);f.AVcontent&&("content"==n.preloader.type&&(f.diVideoPreloader.style.display="none"),f.AVcontent.pauseAd(),f.AVcontent.style.display="none",f.AVcontent.style.zIndex="1");v.bigPlay&&(v.bigPlay.style.display=
"none");try{g()||d.sndEnabled||(d.player.adVolume=0,d.player.video&&(d.player.video.volume=0),d.isSwf&&(0<d.player.adVolume&&(d.noForceVol=!0),d.player.api.setSystemVolume(0)))}catch(fa){}setTimeout(function(){try{g()||d.sndEnabled||(d.noForceVol||(d.player.adVolume=0),d.player.video&&(d.player.video.volume=0),d.isSwf&&d.player.api.setSystemVolume(0))}catch(fa){}},10);setTimeout(function(){try{g()||d.sndEnabled||(d.noForceVol||(d.player.adVolume=0),d.player.video&&(d.player.video.volume=0),d.isSwf&&
d.player.api.setSystemVolume(0))}catch(fa){}},150);setTimeout(function(){try{g()||d.sndEnabled||(d.noForceVol||(d.player.adVolume=0),d.player.video&&(d.player.video.volume=0),d.isSwf&&d.player.api.setSystemVolume(0))}catch(fa){}},300);d.player.container.style.position="absolute";d.player.container.style.top="0px";d.player.container.style.zIndex="99999";d.player.container.style.width=0==n.width?"100%":""+n.width+"px";d.player.container.style.height=0==n.height?"100%":""+n.height+"px";v.setPlayer(d.vastPlayer,
1!=d.sndEnabled,d);f.divPreloader.style.zIndex="1";f.divPreloader.style.display="none";d.isSwf||n.hidecontrols||v.controls(!0);1==n.flashsound&&d.isSwf&&setTimeout(function(){d.player&&d.player.api&&d.player.api.setSystemVolume(1)},1500);n.flashsound||g()||d.sndEnabled||(setTimeout(function(){d.player&&d.player.api&&!g()&&!d.sndEnabled&&(d.noForceVol||(d.player.adVolume=0),d.player.video&&(d.player.video.volume=0),d.isSwf&&d.player.api.setSystemVolume(0))},1),setTimeout(function(){d.player&&d.player.api&&
!g()&&!d.sndEnabled&&(d.noForceVol||(d.player.adVolume=0),d.player.video&&(d.player.video.volume=0),d.isSwf&&d.player.api.setSystemVolume(0))},100),d.sndIntervalCounter=0,d.sndInterval=setInterval(function(){d.sndIntervalCounter++;24<d.sndIntervalCounter?(clearInterval(d.sndInterval),d.sndInterval=0):d.player&&d.player.api&&!g()&&!d.sndEnabled?(d.noForceVol||(d.player.adVolume=0),d.player.video&&(d.player.video.volume=0),d.isSwf&&d.player.api.setSystemVolume(0)):(clearInterval(d.sndInterval),d.sndInterval=
0)},250));K("impression",d.asid,{video:d.player.video?d.player.video.src:null});f.vastCache=0;y[O]={tc:null,tcc:0};n.tmf.timing&&(d.sec3remaining=3E3,d.sec10remaining=1E4,d.seccurrent=Date.now(),d.sec3Timer=setTimeout(function(){d.sec3Timer=0;d.player.fireType("sec3");d.sec3remaining=0},3E3),d.sec10Timer=setTimeout(function(){d.sec10Timer=0;d.player.fireType("sec10");d.sec10remaining=0},1E4));g()&&setTimeout(function(){d.player.adVolume=.75;v.muted=!1},10);f.mobileControlsTimer&&0<f.mobileControlsTimer&&
(clearTimeout(f.mobileControlsTimer),f.mobileControlsTimer=0,f.mobileControlsOn=!1)}c(d);Utils.writeLog(Utils.logLevels.defaultLevel,k.AdImpression+":"+d.id+":"+d.asid);Utils.reportDuduPixel(n.publisherid,n.channelid,"impression");f.playing!=d.id?(d.player.once("AdVideoStart",function(){f.playing==d.id&&a()}),d.player.pauseAd()):a()});d.player.on(k.AdVolumeChange,function(){Utils.writeLog(Utils.logLevels.defaultLevel,k.AdVolumeChange+":"+d.id+":"+d.asid);"function"==typeof r.onAdVolumeChange&&this.impressionSet&&
(r.adVolume=this.adVolume,"undefined"!==typeof r.adVolume&&0<=r.adVolume&&(v.muted=1E-4>=r.adVolume),d.vastPlayer&&!d.vastPlayer.skipping&&q(k.AdVolumeChange));try{d.muting||g()||d.sndEnabled||!(0==d.impTime&&15>d.muteCount||15>d.impMuteCount&&Date.now()-d.impTime<1E3*n.mutetime)||(d.muteCount++,d.impTime&&d.impMuteCount++,setTimeout(function(){if(!d.muting&&!d.sndEnabled){d.muting=!0;try{d.isSwf?d.player.api.setSystemVolume(0):d.player.adVolume=0}catch(F){}d.muting=!1}},1),Utils.writeLog(Utils.logLevels.debug,
k.AdVolumeChange+":force mute"))}catch(F){}!d.isSwf||g()||d.sndEnabled||d.player.api.setSystemVolume(0)});d.player.on(k.AdVideoFirstQuartile,function(){Utils.writeLog(Utils.logLevels.defaultLevel,k.AdVideoFirstQuartile+":"+d.id+":"+d.asid);q(k.AdVideoFirstQuartile);b(d,"firstQuartile");K("firstQuartile",d.asid)});d.player.on(k.AdVideoMidpoint,function(){Utils.writeLog(Utils.logLevels.defaultLevel,k.AdVideoMidpoint+":"+d.id+":"+d.asid);q(k.AdVideoMidpoint);b(d,"midpoint");K("midpoint",d.asid)});d.player.on(k.AdVideoThirdQuartile,
function(){Utils.writeLog(Utils.logLevels.defaultLevel,k.AdVideoThirdQuartile+":"+d.id+":"+d.asid);q(k.AdVideoThirdQuartile);b(d,"thirdQuartile");K("thirdQuartile",d.asid)});d.player.on(k.AdVideoComplete,function(){d.active&&(Utils.writeLog(Utils.logLevels.defaultLevel,k.AdVideoComplete+":"+d.id+":"+d.asid),q(k.AdVideoComplete),b(d,"complete"),K("complete",d.asid),f.myInterval&&(clearInterval(f.myInterval),f.myInterval=0),n.adfoldermode?setTimeout(function(){d.player.video.addEventListener("ended",
function(){q(k.AdVideoComplete)})},250):n.loopvideo?E(d.player.video):n.lastframe||(N(d),"1"==n.tgt?(R(),setTimeout(function(){d.active&&d.player.stopAd()},50)):p(d)))});d.player.once(k.AdError,function(){if(d.active){d.active=!1;Utils.writeLog(Utils.logLevels.defaultLevel,"2.AdError:"+d.id+":"+d.asid);K("error",d.asid);N(d);if(d.player.impressionSet&&(q(k.AdError),"1"==n.tgt)){R();return}p(d)}});d.player.once(k.AdSkipped,function(){d.active&&(d.active=!1,Utils.writeLog(Utils.logLevels.defaultLevel,
"AdSkipped:"+d.id+":"+d.asid),K("skip",d.asid),f.myInterval&&(clearInterval(f.myInterval),f.myInterval=0),N(d),d.player.impressionSet&&(d.vastPlayer.skipping||q(k.AdSkipped),d.player.stopAd()),"1"==n.tgt&&d.player.impressionSet?R(!0):p(d))});d.player.once(k.AdStopped,function(){d.active&&(d.active=!1,Utils.writeLog(Utils.logLevels.defaultLevel,"AdStopped:"+d.id+":"+d.asid),K("stop",d.asid),d.VideoStop=!0,n.lastframe||(N(d),f.playing==d.id&&f.myInterval&&(clearInterval(f.myInterval),f.myInterval=0),
"1"==n.tgt&&d.player.impressionSet?R(!0):p(d)))});d.player.on(k.AdClickThru,function(){q(k.AdClickThru);K("click",d.asid)});d.player.on(k.AdPaused,function(){q(k.AdPaused);v.paused=!0;n.tmf.timing&&(0<d.sec3Timer&&(d.sec3remaining=Math.max(d.sec3remaining-(Date.now()-d.seccurrent),1),clearTimeout(d.sec3Timer),d.sec3Timer=0),0<d.sec10Timer&&(d.sec10remaining=Math.max(d.sec10remaining-(Date.now()-d.seccurrent),1),clearTimeout(d.sec10Timer),d.sec10Timer=0))});d.player.on(k.AdPlaying,function(){c(d);
q(k.AdPlaying);v.paused=!1;n.tmf.timing&&(0<d.sec3remaining&&0==d.sec3Timer&&(d.sec3Timer=setTimeout(function(){d.sec3Timer=0;d.player.fireType("sec3");d.sec3remaining=0},d.sec3remaining)),0<d.sec10remaining&&0==d.sec10Timer&&(d.sec10Timer=setTimeout(function(){d.sec10Timer=0;d.player.fireType("sec10");d.sec10remaining=0},d.sec10remaining)),d.seccurrent=Date.now())})}function ha(){b=f.advertisements.length<a?f.advertisements.length:a;for(var c=0;c<b;c++)V(c)}function L(){function a(){e=[];f.advertisements=
f.waterfall.data.tags.filter(function(a){return 1==a.AdBid});f.advertisements.sort(function(a,b){var c=parseInt(a.priority||"1"),d=parseInt(b.priority||"1");-1<f.topAsid.indexOf(a.asid)&&(c=0);-1<f.topAsid.indexOf(b.asid)&&(d=0);a=parseFloat(a.price||"0");b=parseFloat(b.price||"0");if(d==c)return b>a?1:b<a?-1:1==Math.floor(2*Math.random())?1:-1;if(d>c)return-1;if(d<c)return 1});for(var a=0;a<f.advertisements.length;a++)f.advertisements[a].sortOrder=a;Utils.writeLog(Utils.logLevels.debug,"Waterfall: ",
f.waterfall.data);Utils.writeLog(Utils.logLevels.debug,"Bids: ",f.advertisements);1<=f.advertisements.length?ha():("content"==n.preloader.type&&ea(),S(W))}function b(a){function b(){var a=Date.now();return a-1E10*Math.floor(a/1E10)}function c(a,c){var d=a.search(c)+c.length;var f=-1==a.indexOf("&",d)?a.length:a.indexOf("&",d);a=a.replace(a.slice(d,f),"");a=a.trim();c=a.search(c)+c.length;return[a.slice(0,c),b(),a.slice(c)].join("")}var d=a.url;"vast"==a.type&&(-1==d.search(/\[AVC_RANDOM\]/i)?-1==
d.search(/cb=/i)?-1==d.indexOf(".rubiconproject.")&&(d=-1==d.indexOf("?")?d+"?cbb="+b():d+"&cbb="+b()):d=c(d,"cb="):d=d.replace("[AVC_RANDOM]",b()));return d}function c(a){if(n.tmf.reqbid&&m[a]&&0<m[a].length){var b=t.AV_player.waterfall.data.tUrl+"&"+t.AV_player.waterfall.data.gEvents[a],c=m[a].join(",");b=b+"&e=request&cb="+Date.now()+"&asid="+encodeURIComponent(c);m[a]=[];(new Image).src=b}}function d(a,b,d,f,e){if(""!=b)if(f)if(a)m[e]||(m[e]=[]),m[e].push(a),10<=m[e].length&&c(e),K("request",
a);else{if(d){for(var g in m)m.hasOwnProperty(g)&&c(g);for(var h in t.AV_player.waterfall.data.events)t.AV_player.waterfall.data.events.hasOwnProperty(h)&&(b=t.AV_player.waterfall.data.tUrl+"&"+t.AV_player.waterfall.data.events[h]+"&cb="+Date.now(),(new Image).src=b)}}else if(a&&(l.push(a),K("request",a)),(d||10==l.length)&&0<l.length){l.sort();var k="";l.forEach(function(a,b){0!=b&&(k+=",");k+=a});b=t.AV_player.waterfall.data.requestPixel+"request&cb="+Date.now()+"&asid="+encodeURIComponent(k);l.length=
0;(new Image).src=b}}var e=[],g=0,h=[],k=document.getElementById(n.position);k||(k=n.slot);aa||(aa=document.createElement("div"),aa.id="anibid",k.appendChild(aa));var l=[],m={};k=f.vastConfig;for(var p=!1,q=0;q<f.waterfall.data.tags.length;q++)if(f.waterfall.data.tags[q].AdBid=!1,f.waterfall.data.tags[q].reqFiltered||f.waterfall.data.tags[q].reqImpsFiltered)g++,g>=f.waterfall.data.tags.length&&a();else{var r=t.AV_player.waterfall.data.tags[q];t.AV_player.waterfall.data.tUrl&&r.trackingParams&&(r.impressionTrackingPixel=
t.AV_player.waterfall.data.tUrl+"&"+r.trackingParams+"&e=impression&cb="+Date.now(),r.trackingPixel=t.AV_player.waterfall.data.tUrl+"&"+r.trackingParams+"&e=");var v="",ba="";if(t.AV_player.waterfall.data.gEvents||t.AV_player.waterfall.data.events)p=!0;t.AV_player.waterfall.data.gEvents&&t.AV_player.waterfall.data.gEvents[r.groupId]?(v=t.AV_player.waterfall.data.tUrl?t.AV_player.waterfall.data.tUrl+"&"+t.AV_player.waterfall.data.gEvents[r.groupId]:t.AV_player.waterfall.data.gEvents[r.groupId],ba=
r.nasid):(v=t.AV_player.waterfall.data.requestPixel,ba=r.asid);v?d(ba,v,!1,p,r.groupId):K("request",ba);f.waterfall.data.tags[q].url||(f.waterfall.data.tags[q].url="");f.waterfall.data.tags[q].fixedUrl=b(f.waterfall.data.tags[q]);f.waterfall.data.tags[q].AdBid=null;e[q]=new u(aa,n.clickfunc);e[q].id=q;if("googima"==f.waterfall.data.tags[q].type||0==f.waterfall.data.tags[q].url.toLowerCase().indexOf("https://googleads.g.doubleclick.net/pagead/ads?"))f.waterfall.data.tags[q].fixedUrl="https://ima3vpaid.appspot.com/?adTagUrl="+
encodeURIComponent(f.waterfall.data.tags[q].url)+"&type=all";if(-1<f.waterfall.data.tags[q].fixedUrl.indexOf("[AVC_INVIEW]"))try{r=0;v=!1;var x=Utils.getViewability(n.slot);x&&(r=Math.floor(100*x.ratio));v=1*(50<r);f.waterfall.data.tags[q].fixedUrl=f.waterfall.data.tags[q].fixedUrl.replace("[AVC_INVIEW]",v);f.waterfall.data.tags[q].fixedUrl=f.waterfall.data.tags[q].fixedUrl.replace("[AVC_INVIEWPERC]",r)}catch(va){}(n.autosdk4||f.waterfall.data.tags[q].playerSettings&&f.waterfall.data.tags[q].playerSettings.sdk4)&&
(-1<f.waterfall.data.tags[q].url.toLowerCase().indexOf("://v.lkqd.net")||-1<f.waterfall.data.tags[q].url.toLowerCase().indexOf("://ssp.lkqd.net"))&&"pl"!=f.waterfall.data.tags[q].type&&(f.waterfall.data.tags[q].type="pl",f.waterfall.data.tags[q].platform=4,f.waterfall.data.tags[q].template=encodeURIComponent(f.waterfall.data.tags[q].url),f.waterfall.data.tags[q].url="");e[q].load(f.waterfall.data.tags[q],k,f.waterfall.data.trackers,K,n.tgt).then(function(a){}).catch(function(b){g++;Utils.writeLog(Utils.logLevels.defaultLevel,
"1.AdError:"+b);g>=f.waterfall.data.tags.length&&a()});e[q].on("AdBid",function(b,c,d,e,k){if(t.AV_player.waterfall.data.gEvents&&t.AV_player.waterfall.data.gEvents[k.groupId]){var l=t.AV_player.waterfall.data.gEvents[k.groupId]+"&nasid="+encodeURIComponent(k.nasid);var m=t.AV_player.waterfall.data.tUrl+"&"+l+"&e="}else k.trackingPixel&&(m=k.trackingPixel);m&&n.tmf.reqbid&&((new Image).src=m+"bid&cb="+Date.now());b.asTrackingInfo={params:l,base:t.AV_player.waterfall.data.tUrl};h={id:e.id,player:b,
mediaFiles:c,parameters:d,vastPlayer:e,trackingPixel:m,tag:k,impTime:0,muteCount:0,impMuteCount:0};t.AV_player.waterfall.data.pUrl&&t.AV_player.waterfall.data.gEvents&&k.groupId&&k.nasid&&(h.impPostPixel=t.AV_player.waterfall.data.pUrl+"&"+t.AV_player.waterfall.data.gEvents[k.groupId]+"&nasid="+encodeURIComponent(k.nasid)+"&e=");b.dispatchWaterfallApiEvent=K;b.asid=f.waterfall.data.tags[e.id].asid;Utils.writeLog(Utils.logLevels.defaultLevel,"AdBid:"+e.id+":"+c[0].type);f.waterfall.data.tags[e.id].Ad=
h;f.waterfall.data.tags[e.id].AdBid=!0;g++;g>=f.waterfall.data.tags.length&&a()})}d(null,t.AV_player.waterfall.data.requestPixel,!0,p)}function ma(a,b){a="https://player.aniview.com/beacon/"+a+".txt?cb="+Date.now();if("string"===typeof f.authTxt)setTimeout(function(){b(f.authTxt)},10);else{var c=H("GET",a,!1);"undefined"!==typeof c.onreadystatechange?c.onreadystatechange=function(){4!=c.readyState||200!=c.status&&304!=c.status||b(c.responseText)}:c.onload=function(){b(c.responseText)};c.send()}}function ca(a){Y--;
if(0<Y){var b=100;500<=a&&(f.err500++,b=2<f.err500?3E3*f.err500:1E3*f.err500);setTimeout(function(){S(W)},b)}}function pa(){if(!(0<f.impCount)&&f.waterfall&&f.waterfall.data&&f.waterfall.data.trackers&&0<f.waterfall.data.trackers.length)for(var a=0;a<f.waterfall.data.trackers.length;a++)if("supplyError"==f.waterfall.data.trackers[a].e)if(2==f.waterfall.data.trackers[a].t){var b=document.createElement("script");b.src=f.waterfall.data.trackers[a].url;try{f.slotWindow.document.getElementsByTagName("body")[0].appendChild(b)}catch(U){}}else(new Image).src=
f.waterfall.data.trackers[a].url}function S(a,b){function c(a,b){if(b){for(var c=0;c<a.data.tags.length;c++)a.data.tags[c].asid=a.data.tags[c].asid||b.asid,a.data.tags[c].clickThroughUrl=a.data.tags[c].clickThroughUrl||"",a.data.tags[c].impressionTrackingPixel="https:"+b.impressionTrackingPixel+"&cb="+Date.now(),a.data.tags[c].price=a.data.tags[c].price||"0",a.data.tags[c].tagTimeout=a.data.tags[c].tagTimeout||"20000",a.data.tags[c].trackingPixel="",a.data.tags[c].impressionTrackingPixel=a.data.tags[c].impressionTrackingPixel.replace("[AV_HOST]",
f.host||""),a.data.tags[c].impressionTrackingPixel=a.data.tags[c].impressionTrackingPixel.replace("[AV_ASID]",a.data.tags[c].asid),a.data.tags[c].impressionTrackingPixel=a.data.tags[c].impressionTrackingPixel.replace("[AV_CID]",n.channelid),a.data.tags[c].impressionTrackingPixel=a.data.tags[c].impressionTrackingPixel.replace("[AV_SUBID]",f.macros.AV_SUBID||"");a.data.totalTimeout="20000";a.data.requestPixel="";return a}}function d(a,b){if(!f.stopAd)try{if(0<Y)if((h="string"===typeof a?JSON.parse(a):
a)&&"1"==h.blacklisted)Utils.writeLog(Utils.logLevels.defaultLevel,"Serving blacklisted:");else{if("undefined"!==typeof n.waterfall&&("string"===typeof n.waterfall&&c(h,p),a=h,"object"===typeof f.macros)){"undefined"===typeof f.macros.AV_USERAGENT&&navigator.userAgent&&(f.macros.AV_USERAGENT=encodeURIComponent(navigator.userAgent));for(var d=0;d<a.data.tags.length;d++)if("string"===typeof a.data.tags[d].url)try{for(var e in f.macros)f.macros.hasOwnProperty(e)&&"AV_"==e.substring(0,3)&&(a.data.tags[d].url=
a.data.tags[d].url.replace("["+e+"]",f.macros[e]));a.data.tags[d].url=a.data.tags[d].url.replace("[AV_RANDOM]",Date.now().toString());a.data.tags[d].url=a.data.tags[d].url.replace("[AV_TIMESTAMP]",Date.now().toString())}catch(xa){}}e=h;if("object"==typeof e&&e.data&&e.data.tags&&0<e.data.tags.length){var g=e.data.tags;a=y;for(d=0;d<g.length;d++)if(g[d].playerSettings&&"undefined"!==typeof g[d].playerSettings.mips&&0<g[d].playerSettings.mips&&(f.maximps[g[d].asid]?f.maximps[g[d].asid].imps>=g[d].playerSettings.mips&&
(g[d].reqImpsFiltered=!0):(f.maximps[g[d].asid]={mips:g[d].playerSettings.mips,imps:0},g[d].reqImpsFiltered=!1)),g[d].playerSettings&&"undefined"!==typeof g[d].playerSettings.maxRPM&&0<g[d].playerSettings.maxRPM)if(null==a.requestFC&&(a.requestFC={}),"undefined"===typeof a.requestFC[g[d].asid])a.requestFC[g[d].asid]={maxRPM:g[d].playerSettings.maxRPM,lc:Date.now()},g[d].reqFiltered=!1;else{var k=a.requestFC[g[d].asid];k.maxRPM&&0!=k.maxRPM||(k.maxRPM=6E4);var l=6E4/k.maxRPM;Date.now()-k.lc<l?g[d].reqFiltered=
!0:(g[d].reqFiltered=!1,"undefined"!==typeof g[d].playerSettings.maxRPM&&(a.requestFC[g[d].asid].maxRPM=g[d].playerSettings.maxRPM),a.requestFC[g[d].asid].lc=Date.now())}}f.waterfall=e;n.block&&f.waterfall&&f.waterfall.data&&!e.data.block&&(f.waterfall.data.block=n.block);b&&y[O]&&(y[O].tc=e,y[O].tcc=b);!f.nladstarted&&f.waterfall&&f.waterfall.data&&f.waterfall.data.nltags&&0<f.waterfall.data.nltags.length&&(ra(n.contentvideo,n.contentadscontainer,f.waterfall.data.nltags),f.nladstarted=!0);f.waterfall&&
f.waterfall.data&&f.waterfall.data.tags&&0<f.waterfall.data.tags.length?(L(),f.err500=0):(f.runCount=9999999,ca())}else ca()}catch(xa){ca()}}function e(a){if(0<Y){var b="cb="+Date.now();b=-1<a.indexOf("?")?"&"+b:"?"+b;g=H("GET",a+b,0);g.requesthandled=!1;"undefined"===typeof g.onreadystatechange?(g.onprogress=function(){},g.ontimeout=function(){},g.onload=function(){d(g.responseText,f.tagCacheMaxCount)},g.onerror=function(){ca(g.status)}):g.onreadystatechange=function(){4==g.readyState&&(200==g.status||
304==g.status?d(g.responseText,f.tagCacheMaxCount):ca(g.status))};g.send()}else ca()}if(!f.stopAd)if(f.startAdViTime=0,f.currentAd=0,f.active){Utils.writeLog(Utils.logLevels.debug,"Requesting new waterfall "+f.tagRequestCount);var g,h;O=n.position+n.publisherid+n.channelid;var k=!1,l=n.midrolltime;ja&&0==n.preroll&&.1<n.midrolltime&&0<n.midrolldelay&&(k=!0,l=n.midrolldelay);ja=!1;I();var m=f.impressionSet;if(m){0<f.preroll&&f.preroll--;if(0==f.preroll&&(k=!0,0==n.loop&&"content"!=n.preloader.type)){Utils.writeLog(Utils.logLevels.debug,
"stop waterfall preroll done");return}f.impressionSet=!1}if(f.tagRequestCount>n.vastretry||f.runCount>=n.maxrun||f.impCount>=n.maximp){0<f.preroll&&(f.preroll=0);f.tagRequestCount=0;Z++;k=Z>n.errorlimit||f.runCount>=n.maxrun||f.impCount>=n.maximp;if("function"===typeof r.onAdError)r.onAdError({errorlimit:k});k&&pa();if("1"==n.tgt){R(!0);return}if(k){b=f.stopWaterfall=!0;(null==n.preloader.type||n.passbackpriority)&&n.passbackurl&&(n.passbackpriority&&(b=!1,f.AVcontent&&f.AVcontent.pauseAd()),f.divPreloader.style.width=
"100%",f.divPreloader.style.height="100%",f.divPreloader.style.zIndex="99999",f.divPreloader.style.position="absolute",l=document.createElement("iframe"),l.id="ani_passback",l.style.height=n.height+"px",l.style.width=n.width+"px",l.style.overflow="hidden",l.setAttribute("scrolling","no"),l.style.margin="0px 0px 0px 0px",l.style.padding="0px, 0px, 0px, 0px",f.divPreloader.innerHTML="",f.divPreloader.style.background="#000",f.divPreloader.appendChild(l),m=document.createElement("script"),m.type="text/javascript",
m.src=n.passbackurl,l.appendChild(m));b&&ea();b="maximp";Z>n.errorlimit?b="errorlimit":f.runCount>=n.maxrun&&(b="maxrun");Utils.writeLog(Utils.logLevels.debug,"stop waterfall "+b);return}k=!0}if(0==f.preroll&&"content"==n.preloader.type&&(ea(),!n.midrolltime)){0<n.preroll&&(f.resetAdRequest=!0);Utils.writeLog(Utils.logLevels.debug,"stop waterfall wait for content end");return}if(k&&0<n.midrolltime)"function"===typeof n.midrollfunc?setTimeout(function(){n.midrollfunc(function(){S(W,!0)})},10):f.midrollTimer=
setTimeout(function(){S(W,!0)},1E3*l);else{if(!b&&!m&&1==n.mode&&"function"!==typeof n.waterfall&&(b=Z*n.vastretry+f.tagRequestCount,10<b&&(b=1E3*Math.floor(b/10),b>A))){A=b;setTimeout(function(){S(a,!0)},b);return}f.tagRequestCount++;f.useFlashProxy=!f.useFlashProxy;f.runCount++;y=function(){var a=f.slotWindow;"undefined"===typeof a&&(a=t);"1"==n.tgt&&(a=Utils.getTopWnd(a));"undefined"===typeof a.storageAni&&(a.storageAni={});"undefined"===typeof a.storageAni[O]&&(a.storageAni[O]={tc:null,tcc:0});
"undefined"===typeof a.storageAni.requestFC&&(a.storageAni.requestFC=null);return a.storageAni}();var p=null;(new Image).src=Q+"inventoryRequest&cb="+Date.now();if("function"===typeof r.onInventoryRequest)r.onInventoryRequest();if("undefined"===typeof n.waterfall||"string"===typeof n.waterfall){if(y[O]&&y[O].tc&&0<y[O].tcc){y[O].tcc--;var q=y[O].tc}else q=null;q?setTimeout(function(){d(q)},1):"string"===typeof n.waterfall?("//"==n.waterfall.substring(0,2)&&(n.waterfall=Utils.getProtocol()+n.waterfall),
ma(n.publisherid,function(a){try{var b=JSON.parse(a);f.authTxt=a}catch(T){b={domains:[]}}p=b;for(a=0;a<b.domains.length;a++){var c=n.waterfall.indexOf(b.domains[a].domain);if(7==c||8==c){e(n.waterfall);return}}ca()})):e(a)}else"function"!==typeof n.waterfall&&"object"!==typeof n.waterfall||ma(n.publisherid,function(a){try{var b=JSON.parse(a);f.authTxt=a}catch(ya){b={domains:[]}}p=b;if("function"===typeof n.waterfall)n.waterfall(function(a,f){for(var e=0;e<b.domains.length;e++)if(f==b.domains[e].domain){setTimeout(function(){a=
c(a,b);d(a)},10);return}ca()});else{a=n.waterfall;var e=b;if(a.data&&a.data.tags){for(var g=0;g<a.data.tags.length;g++){for(var h=!1,k=0;k<e.domains.length;k++){var l=a.data.tags[g].url.indexOf(e.domains[k].domain);if(7==l||8==l){h=!0;break}}if(h&&(e.key&&e.value||e.keys)&&((k=Utils.getUrlParameters(a.data.tags[g].url))&&k[e.key]&&0==k[e.key].indexOf(e.value)||(h=!1),k&&"object"===typeof e.keys))for(l=0;l<e.keys.length;l++)for(var m in e.keys[l])if(k[m]&&-1<k[m].indexOf(e.keys[l][m])){h=!0;break}h||
(a.data.tags.splice(g,1),g--)}a=c(a,b);d(a)}else ca()}})}}else Utils.writeLog(Utils.logLevels.debug,"Stop requesting new waterfall - not active"),R(!0),Utils.writeLog(Utils.logLevels.debug,"stop waterfall not active")}function K(a,b,c){if(t.AV_player.waterfall&&t.AV_player.waterfall.data&&"function"===typeof t.AV_player.waterfall.data.onEvent)t.AV_player.waterfall.data.onEvent(a,b,c);if("function"===typeof r.onAdEvent)r.onAdEvent(a,b,c)}function H(a,b,c){var d=new XMLHttpRequest;"withCredentials"in
d?(d.open(a,b,!0),1==c&&(d.withCredentials=!0)):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(a,b)):d=null;return d}function sa(){var a="";var b={};if(n.ref1)if("string"===typeof n.ref1&&0<n.ref1.length){var c=n.ref1.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(2<=e.length)try{if(e[1]=decodeURIComponent(e[1]),e[1]=decodeURIComponent(e[1]),e[1]=encodeURIComponent(e[1]),b[e[0]]=e[1],("current_url"==e[0]||"AV_URL"==e[0])&&(a=e[1])&&0<a.length){var g=a.substring(0,
1);if("%"==g||"{"==g||"$"==g||"["==g||"<"==g)a=""}}catch(ba){("current_url"==e[0]||"AV_URL"==e[0])&&(a=e[1])&&0<a.length&&(g=a.substring(0,1),"%"==g||"{"==g||"$"==g||"["==g||"<"==g)&&(a="")}}}else if("object"===typeof n.ref1){try{for(c in n.ref1)try{"AV_URL"==c&&"string"===typeof n.ref1[c]&&0<n.ref1[c].length&&(g=n.ref1[c].substring(0,1),"%"==g||"{"==g||"$"==g||"["==g||"<"==g)&&(n.ref1[c]=""),b[c]=decodeURIComponent(n.ref1[c]),b[c]=decodeURIComponent(b[c]),b[c]=encodeURIComponent(b[c])}catch(ba){}}catch(ba){}a=
b.AV_URL}g=Utils.getProtocol();a&&""!=a||(a=(a=b.AV_APPPKGNAME)&&2<a.length?a:encodeURIComponent(Utils.getTrueDomain()));Utils.isAndroid()&&b.AV_APPPKGNAME&&(b.AV_APPSTOREURL="https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3D"+b.AV_APPPKGNAME);b.AV_URL=a.substring(0,500);b.AV_PUBLISHERID=n.publisherid;b.AV_CHANNELID=n.channelid;b.AV_WIDTH=n.width;b.AV_HEIGHT=n.height;b.format="json";b.tgt=n.tgt;b.AV_SUBID=b.AV_SUBID||"";b.AV_SUBID=b.AV_SUBID.substring(0,Math.min(100,b.AV_SUBID.length));
b.AV_CDIM1=b.AV_CDIM1||"";b.AV_CDIM1=b.AV_CDIM1.substring(0,Math.min(100,b.AV_CDIM1.length));b.AV_CDIM2=b.AV_CDIM2||"";b.AV_CDIM2=b.AV_CDIM2.substring(0,Math.min(100,b.AV_CDIM2.length));b.AV_CDIM3=b.AV_CDIM3||"";b.AV_CDIM3=b.AV_CDIM3.substring(0,Math.min(100,b.AV_CDIM3.length));b.AV_ABT||(a=Math.floor(30*Math.random()),b.AV_ABT=4<a||0==a?"":""+a);n.autosdk4&&!b.AV_SUBID&&(b.AV_SUBID="1");AV_player.config.pc&&(b.pce="1",b.npx="1");0==b.AV_WIDTH&&(b.AV_WIDTH=300);0==b.AV_HEIGHT&&(b.AV_HEIGHT=250);b.AV_WIDTH=
Math.floor(b.AV_WIDTH);b.AV_HEIGHT=Math.floor(b.AV_HEIGHT);if(b.AV_AID||b.AV_IDFA)try{b.AV_AID&&36==b.AV_AID.length||!b.AV_IDFA||36!=b.AV_IDFA.length||(b.AV_AID=b.AV_IDFA),b.AV_IDFA&&36==b.AV_IDFA.length||!b.AV_AID||36!=b.AV_AID.length||(b.AV_IDFA=b.AV_AID),b.AV_AID=b.AV_AID||b.AV_IDFA,b.AV_IDFA=b.AV_IDFA||b.AV_AID,36==b.AV_IDFA.length&&(b.AV_IDFAMD5=b.AV_IDFAMD5||b.AV_AIDMD5||Utils.getMD5(b.AV_IDFA),b.AV_IDFASHA1=b.AV_IDFASHA1||b.AV_AIDSHA1||Utils.getSHA1(b.AV_IDFA)),36==b.AV_AID.length&&(b.AV_AIDMD5=
b.AV_AIDMD5||b.AV_IDFAMD5||Utils.getMD5(b.AV_AID),b.AV_AIDSHA1=b.AV_AIDSHA1||b.AV_IDFASHA1||Utils.getSHA1(b.AV_AID))}catch(ba){}b.AV_LONGITUDE&&isNaN(1*b.AV_LONGITUDE)&&(b.AV_LONGITUDE="");b.AV_LATITUDE&&isNaN(1*b.AV_LATITUDE)&&(b.AV_LATITUDE="");b.AV_DNT=b.AV_DNT||"0";a=Utils.joinObject(b);if("manage.dev.aniview.com"==AV_player.config.adserverdomain||"manage.newmanage.aniview.com"==AV_player.config.adserverdomain)g="http:";a=g+"//"+n.adserverdomain+"/api/adserver/tag/?"+a+"&v=6.1.1.105&cb="+Date.now();
c=b.AV_SUBID||"";e=b.AV_CDIM1||"";d=b.AV_CDIM2||"";var h=b.AV_CDIM3||"",k=b.AV_IC||0,l=b.tgt,m=b.AV_ABT||"",p=b.AV_APPNAME||"",q=b.AV_WIDTH||"",t=b.AV_HEIGHT||"";k*=12321;var u=Utils.getHostName(b.AV_URL);f.host=u;Q=g+"//"+n.trackdomain+"/track?pid="+b.AV_PUBLISHERID+"&cid="+b.AV_CHANNELID+"&r="+u+"&sn="+c+"&cd1="+e+"&cd2="+d+"&cd3="+h+"&ic="+k+"&tgt="+l+"&app="+p+"&wi="+q+"&he="+t+"&test="+m+"&e=";"manage.dev.aniview.com"==AV_player.config.adserverdomain&&(Q=Q.replace("track1.aniview.com","manage.dev.aniview.com"));
"partnerserv.aniview.com"==AV_player.config.adserverdomain&&(Q=Q.replace("track1.aniview.com","trackv3.aniview.com"));(new Image).src=Q+"inventory&vi="+Utils.getViewabilityPerc()+"&cb="+Date.now();if("function"===typeof r.onInventory)r.onInventory();Utils.reportDuduPixel(n.publisherid,n.channelid,"inventory");f.macros=b;return a}function M(a,b,c){if(!f.stopAd&&f.active){var d=new u(aa,!1),e={asid:"Content",type:"pl",platform:6,template:encodeURIComponent('{"tagUrl":"'+c[0].url+'","overlay":"true"}'),
impressionTrackingPixel:t.AV_player.waterfall.data.tUrl+"&"+c[0].trackingParams+"&e=impression&cb="+Date.now(),initAdTimeout:2E4,startAdTimeout:2E4};e.impressionTrackingPixel=e.impressionTrackingPixel.replace("tgt=0","tgt=4");d.load(e,{nljs:!0,js:!0},[],function(){}).then(function(a){}).catch(function(a){});d.on("AdBid",function(d,e,f,g,h){function l(){m||(m=!0,d.stopAd(),setTimeout(function(){if(b&&d.frame){try{b.removeChild(ad.player.frame)}catch(fa){}d.frame=null;try{for(;b.firstChild;)b.removeChild(b.firstChild)}catch(fa){}}},
3E3))}var m=!1;d.once(k.AdLoaded,function(){var a=this;setTimeout(function(){a.start()},50)});d.once(k.AdImpression,function(){setTimeout(function(){l()},1E3*n.nonlinearruntime);Utils.writeLog(Utils.logLevels.debug,"Nonlinear impression"+c[0].asid)});d.once(k.AdError,function(){l();Utils.writeLog(Utils.logLevels.debug,"Nonlinear AdError"+c[0].asid)});d.once(k.AdSkipped,function(){l();Utils.writeLog(Utils.logLevels.debug,"Nonlinear AdSkipped"+c[0].asid)});d.once(k.AdStopped,function(){l();Utils.writeLog(Utils.logLevels.debug,
"Nonlinear AdStopped"+c[0].asid)});d.once(k.AdVideoComplete,function(){l();Utils.writeLog(Utils.logLevels.debug,"Nonlinear AdVideoComplete"+c[0].asid)});d.once(k.AdClosed,function(){l();Utils.writeLog(Utils.logLevels.debug,"Nonlinear AdClosed"+c[0].asid)});d.load(e,f,this,null,b,a).then(function(){d.reporter.track(d)})})}}function ra(a,b,c){if(a&&b&&c&&0<c.length){var d="";a.paused||(d=a.src,M(a,b,c));a.addEventListener("playing",function(){d!=this.src&&(d=this.src,M(a,b,c))});a.addEventListener("loadedmetadata",
function(){})}}function ea(a){function b(a,b){b=a&&(-1<a.indexOf("aniview.")||-1<a.indexOf("ani-view.")||b);if(t.AV_player.contentPixel&&2>t.AV_player.AVcontent.currentTime&&(t.AV_player.contentPixel=!1,b&&Utils.reportDuduPixel(t.AV_player.config.publisherid,t.AV_player.config.channelid,"content"),"function"==typeof r.onContentImpression))r.onContentImpression(a)}if(!(f.stopAd||"content"!=n.preloader.type||!f.active||0<f.preroll&&!a))if(n.autoplay||0!=n.preloader.autoplay){a=e&&c||h&&!(c&&53<=Utils.getChromeVersion());
var d=0;n.nonnativecontent&&(a=!0);"56ea678d181f46c76f8b45fb"!=n.publisherid&&"5857b9e90b8ee887ed01e880"!=n.publisherid&&"55b78633181f4603178b4568"!=n.publisherid||!h||(a=!0);"5857b9e90b8ee887ed01e880"!=n.publisherid&&"55b78633181f4603178b4568"!=n.publisherid||!e||(a=!0);if(f.playContent)v.player!==f.AVcontent&&(!g()&&0<f.AVcontent.volume&&(f.AVcontent.volume=0,f.AVcontent.muted=!0,v.muted=!0,f.AVcontent.setAttribute("muted",!0)),v.setPlayer(f.AVcontent,!(0<f.AVcontent.volume&&!f.AVcontent.muted))),
v.controls(!n.hidecontrols&&(!n.hidemobilecontrols&&Utils.isMobile()||f.mobileControlsOn||!Utils.isMobile())),f.AVcontent.style.display="block","content"==t.AV_player.config.preloader.type&&0==t.AV_player.config.autoplay&&"string"===typeof t.AV_player.config.preloader.poster&&10<t.AV_player.config.preloader.poster.length||(t.AV_player.divPreloader.style.zIndex="0"),f.AVcontent.style.zIndex="0",n.autoplay?("content"==n.preloader.type&&(f.diVideoPreloader.style.display="block"),f.AVcontent.resumeAd()):
(n.showbigplay&&(v.bigPlay.style.display="inline"),v.bigPlay.style.position="absolute",v.bigPlay.style.zIndex="99999",v.controls(!1),v.bigPlay.onclick=function(){n.slot.querySelector("#imgpreloader").style.display="none";n.autoplay=!0;v.bigPlay.style.display="none";"content"==n.preloader.type&&(f.diVideoPreloader.style.display="block");f.AVcontent.resumeAd();v.controls(!n.hidecontrols&&(!n.hidemobilecontrols&&Utils.isMobile()||f.mobileControlsOn||!Utils.isMobile()));I()});else{var k=!0,l=null,m=null,
p=null;f.playContent=!0;f.AVcontent=n.slot.querySelector("#AVcontent");f.AVcontent.asid="Content";if(a)a=f.AVcontent,f.AVcontent=AniviewImagePlayer.createAniviewVideoTag(),f.AVcontent.asid="Content",f.diVideoPreloader=f.AVcontent,a.parentNode.replaceChild(f.AVcontent,a),f.AVcontent.style.position="absolute",f.AVcontent.style.width="100%",f.AVcontent.style.height="100%",f.AVcontent.onclick=a.onclick,l=function(){f.active&&!f.activeImpression&&(v.player!==f.AVcontent&&v.setPlayer(f.AVcontent),v.controls(!n.hidecontrols&&
(!n.hidemobilecontrols||f.mobileControlsOn)),f.divPreloader.style.zIndex="0",f.AVcontent.style.zIndex="0","function"===typeof f.AVcontent.startAd&&f.AVcontent.startAd(),f.AVcontent.play(),b(t.AV_player.AVcontent.src,!0))},m=function(){f.AVcontent.pause()},p=function(){f.AVcontent.muted=!0},f.AVcontent.isAudioReady=function(){return 1==f.AVcontent.audioReady};else if(/iPhone|iPod|iPad/.test(navigator.userAgent)){var u=!0;var P=!1;var w=null;var y=!1,A=!1,C=!0,z=document.createElement("audio");f.AVcontent.addEventListener("canplay",
function(){u=P=!0});var E=Date.now();f.contentInterval=setInterval(function(){var a=Date.now(),b=(a-E)/1E3;E=a;!k&&P&&0<f.AVcontent.buffered.length&&(f.AVcontent.buffered.end(f.AVcontent.buffered.length-1)>d?(d+=b,u&&(u=!1,f.AVcontent.currentTime=d),d>f.AVcontent.duration&&n.loop&&(d=0,H(),setTimeout(function(){l()},1E3))):f.AVcontent.currentTime=d)},40);l=function(){f.active&&!f.activeImpression&&k&&!y&&(v.player!==f.AVcontent&&v.setPlayer(f.AVcontent),v.controls(!n.hidecontrols&&(!n.hidemobilecontrols||
f.mobileControlsOn)),f.divPreloader.style.zIndex="0",f.AVcontent.style.zIndex="0",w!=f.AVcontent.src&&(w=f.AVcontent.src,d=0,C=!0,A=!1,z.src=w,z.load()),A&&!C&&(z.currentTime=d,z.play()),k=!1,u=!0,b(t.AV_player.AVcontent.src))};m=function(){A&&(z.currentTime=d,z.pause());u=k=!0};p=function(){var a=function(){d=z.currentTime;k=y=!1;z.removeEventListener("playing",a)};var b=function(){d=0;z.play();z.removeEventListener("canplaythrough",b)};(z.muted=C)?z.pause():A?(z.currentTime=d,z.play()):(A=!0,k||
(y=k=!0,d=0,z.addEventListener("playing",a,!1),z.addEventListener("canplaythrough",b,!1),z.load()))};f.AVcontent.setContentVolume=function(a){C=0==a?!0:!1;p()};f.AVcontent.onvolumechange=function(){}}else if(/(android)/i.test(navigator.userAgent)){var D=!0;u=!0;P=!1;w=null;f.AVcontent.addEventListener("canplay",function(){u=P=!0});E=Date.now();f.contentInterval=setInterval(function(){if(D){var a=Date.now(),b=(a-E)/1E3;E=a;!k&&P&&0<f.AVcontent.buffered.length&&(f.AVcontent.buffered.end(f.AVcontent.buffered.length-
1)>d?(d+=b,u&&(u=!1,f.AVcontent.currentTime=d),d>f.AVcontent.duration&&n.loop&&(d=0,H(),setTimeout(function(){l()},1E3))):f.AVcontent.currentTime=d)}},40);l=function(a){f.active&&!f.activeImpression&&k&&(v.player!==f.AVcontent&&v.setPlayer(f.AVcontent),v.controls(!n.hidecontrols&&(!n.hidemobilecontrols||f.mobileControlsOn)),f.divPreloader.style.zIndex="0",f.AVcontent.style.zIndex="0",a&&D&&(D=!1),k=!1,D?(w!=f.AVcontent.src&&(w=f.AVcontent.src,d=0),u=!0):(f.AVcontent.style.zIndex="0",f.AVcontent.play()),
b(t.AV_player.AVcontent.src))};m=function(a){a&&D&&(D=!1);k=!0;D?u=!0:f.AVcontent.pause()};p=function(){D&&(D=!1,f.AVcontent.currentTime=d=0);f.AVcontent.muted=!f.AVcontent.muted;k?f.AVcontent.pause():(f.AVcontent.style.zIndex="0",f.AVcontent.play())};f.AVcontent.setContentVolume=function(a){1!=a||k||f.AVcontent.play()};f.AVcontent.onvolumechange=function(){D&&(D=!1,f.AVcontent.currentTime=d=0);f.AVcontent.muted=1E-6<f.AVcontent.volume?!1:!0}}else f.AVcontent.onvolumechange=function(){f.AVcontent.muted=
1E-6<f.AVcontent.volume?!1:!0},l=function(){f.active&&!f.activeImpression&&(k=!1,setTimeout(function(){k||(v.setPlayer(f.AVcontent,!(0<f.AVcontent.volume&&!f.AVcontent.muted)),n.hidecontrols||v.controls(!0),f.divPreloader.style.zIndex="0",f.AVcontent.style.zIndex="0",f.AVcontent.play())},300),b(t.AV_player.AVcontent.src))},m=function(){k=!0;f.AVcontent.pause()},p=function(){f.AVcontent.muted=!f.AVcontent.muted};f.AVcontent.volume=g()?1:0;f.AVcontent.pauseAd=function(a){m(a);if(!f.contentPaused&&(f.contentPaused=
!0,"function"==typeof r.onContentPaused))r.onContentPaused()};f.AVcontent.resumeAd=function(){if(!f.AVcontent.userPaused&&(v.showPreloader(!1),f.AVcontent.src||H(),l(),f.AVcontent.style.display="block",f.contentPaused&&(f.contentPaused=!1,"function"==typeof r.onContentPlaying)))r.onContentPlaying()};f.AVcontent.addEventListener("timeupdate",function(){f.AVcontent.adDuration=f.AVcontent.duration;f.AVcontent.adRemainingTime=f.AVcontent.duration-f.AVcontent.currentTime;if(1>f.AVcontent.adRemainingTime&&
0==f.contentPixel){if("function"==typeof r.onContentComplete)r.onContentComplete();f.AVcontent.volume=0;v.player===f.AVcontent&&(v.muted=!0);g()?(f.AVcontent.volume=1,f.AVcontent.removeAttribute("muted"),v.muted=!1):f.AVcontent.setAttribute("muted",!0);if(!n.loop){f.active=!1;f.contentInterval&&clearInterval(f.contentInterval);f.contentInterval=0;f.contentPixel=!0;f.AVcontent.pauseAd(!0);return}f.AVcontent.currentTime=0;f.contentPixel=!0;d=0;"function"===typeof f.AVcontent.init&&f.AVcontent.init(n.preloader.fullframe);
if(Z<=n.errorlimit&&(0<n.preroll&&0==n.midrolltime&&x(),0<f.preroll&&!f.stopWaterfall)){v.showPreloader(!0);f.AVcontent.pauseAd(!0);f.AVcontent.style.display="none";return}v.player===f.AVcontent&&v.playPauseClick();H();setTimeout(function(){l()},1E3);n.postroll||n.loop&&0==f.preroll&&setTimeout(function(){},100)}u=!0});var H=function(){if("undefined"===typeof f.vidPreloaders)"function"===typeof f.AVcontent.init&&f.AVcontent.init(n.preloader.fullframe),f.AVcontent.src=n.preloader.link;else{var a=f.vidPreloaders.getPreloader();
"function"===typeof f.AVcontent.init&&f.AVcontent.init(n.preloader.fullframe);f.AVcontent.src=a.url;f.diVideoPreloader.onclick=function(){if(n.autoplay){if("function"==typeof r.onBannerClick)r.onBannerClick();n.hidemobilecontrols&&!f.mobileControlsOn?(f.mobileControlsOn=!0,v.controls(!0),f.mobileControlsTimer=setTimeout(function(){f.mobileControlsOn=!1;f.mobileControlsTimer=0;v.controls(!1)},1E3*n.mobilecontrolsdelay)):""!=n.preloader.clickthrough&&""!=a.clickthrough&&(t.open(a.clickthrough,"blank"),
q("ContentClick"))}else v.bigPlay.onclick()}}f.AVcontent.load();g()?(f.AVcontent.volume=1,f.AVcontent.muted=!1,v.muted=!1,f.AVcontent.removeAttribute("muted")):f.AVcontent.setAttribute("muted",!0);f.AVcontent.ready=!0;v.setPlayer(f.AVcontent,!(0<f.AVcontent.volume&&!f.AVcontent.muted));v.controls(!n.hidecontrols&&(!n.hidemobilecontrols&&Utils.isMobile()||f.mobileControlsOn||!Utils.isMobile()));"content"==t.AV_player.config.preloader.type&&0==t.AV_player.config.autoplay&&"string"===typeof t.AV_player.config.preloader.poster&&
10<t.AV_player.config.preloader.poster.length||(t.AV_player.divPreloader.style.zIndex="0");f.AVcontent.style.zIndex="0";n.autoplay?l():v.controls(!1)};f.AVcontent.style.display="block";f.AVcontent.style.zIndex="0";H()}}else v.setPlayer({ready:!0,resumeAd:function(){ea()}},!0)}var A=0,Q="",W,y,O,f,n;u.vpaidSWFLocation="https://aniview.hs.llnwd.net/d1/Script/6.1/player.swf";r.startAd=function(a){if(!f.stopAd&&!f.wfPause&&(Utils.writeLog(Utils.logLevels.debug,"startAd Request"),(!n.autoplay||a&&-1==
f.playing)&&f.adLoaded))if(n.autoplayloop&&(n.autoplay=!0),v.bigPlay.style.display="none",1<=f.readyToPlay.length&&-1==f.playing){var b=w();b&&(f.playing=b.id,f.player=f.waterfall.data.tags[b.id].Ad.player,setTimeout(function(){b.player.start()},10))}else-1<f.playing&&n.autoplayloop&&f.waterfall.data.tags[f.playing].Ad.player.start()};r.setWaterfallState=function(a,b){a==f.wfPause&&(f.wfPause=!a,!f.wfPause&&b&&r.startAd(!0))};r.seekAd=function(a){0<=t.AV_player.playing&&t.AV_player.waterfall.data.tags[t.AV_player.playing].Ad.player.seekAd(a)};
r.setAdVolume=function(a){if(!(f.stopAd&&0<a)&&(Utils.writeLog(Utils.logLevels.debug,"setAdVolume request "+a),0<a?v&&(v.muted=!1):v&&(v.muted=!0),0<=f.playing)){var b=f.waterfall.data.tags[f.playing].Ad;b&&b.player&&(n.autosound&&0==a&&(n.autosound=!1),0<a&&(b.sndEnabled=!0,b.player.sndEnabled=!0),b.player.adVolume=a,b.mediaFiles&&b.mediaFiles[0]&&"application/x-shockwave-flash"==b.mediaFiles[0].type&&b.player.api&&(0<a?(b.player.api.setSystemVolume(1),b.sndInterval&&(clearInterval(b.sndInterval),
b.sndInterval=0)):b.player.api.setSystemVolume(0)))}};r.getAdVolume=function(){return 0<=f.playing?f.waterfall.data.tags[f.playing].Ad.player.adVolume:0};r.pauseAd=function(){Utils.writeLog(Utils.logLevels.debug,"pauseAd request");0<=f.playing&&f.waterfall.data.tags[f.playing].Ad.player.pauseAd()};r.resumeAd=function(){f.stopAd||(Utils.writeLog(Utils.logLevels.debug,"resumeAd request"),0<=f.playing&&f.waterfall.data.tags[f.playing].Ad.player.resumeAd())};r.getAdDuration=function(){return 0<=f.playing?
f.waterfall.data.tags[f.playing].Ad.player.adDuration:-2};r.getAdRemainingTime=function(){return 0<=f.playing?f.waterfall.data.tags[f.playing].Ad.player.adRemainingTime:-2};r.resizeAd=function(a,b,c){Utils.writeLog(Utils.logLevels.debug,"resizeAd: "+a+":"+b+":"+c);c||(c=Utils.getFSElement(f.slotWindow.document)?"fullscreen":"normal");"fullscreen"==c&&(t.orientation&&90!==t.orientation&&-90!==t.orientation?(a=screen.height,b=screen.width):(a=screen.width,b=screen.height));if("undefined"!==typeof t.AV_player&&
t.AV_player){if(n.contentplayer&&"fullscreen"==c)t.AV_player&&(n.width=a,n.height=b),f.player&&"function"===typeof f.player.resizeAd&&(f.player.resizeAd(a,b,c),f.player.container.style.width=a+"px",f.player.container.style.height=b+"px",f.player.video&&"function"===typeof f.player.video.resize&&f.player.video.resize(a,b,c));else{if("fullscreen"==c){if(Utils.isiOS()){"undefined"!==typeof f.player&&f.player&&f.player.video&&f.player.impressionSet&&"function"===typeof f.player.video.resize&&f.player.video.resize(a,
b,c);return}if(!Utils.getFSElement(f.slotWindow.document)){f.fsRestoreSize={width:n.width,height:n.height};Utils.setFSState(n.slot,!0);a=screen.width;b=screen.height;f.isFullScreen=!0;var d=Utils.getFSEvent();d&&f.slotWindow.document.addEventListener(d,C)}}"undefined"!==typeof t.AV_player&&t.AV_player&&(n.width=a,n.height=b);"undefined"!==typeof f.player&&f.player&&"function"===typeof f.player.resizeAd&&(f.player.resizeAd(a,b,c),f.player.container.style.width=a+"px",f.player.container.style.height=
b+"px",f.player.video&&"function"===typeof f.player.video.resize&&f.player.video.resize(a,b,c));"undefined"!==typeof f.AVcontent&&f.AVcontent&&(f.AVcontent.style.width=a+"px",f.AVcontent.style.height=b+"px")}"undefined"!==typeof v&&v&&v.resize(a,b)}};r.getContentPaused=function(){return f.contentPaused};r.pauseContent=function(){var a=v.getPlayer();a&&"Content"==a.asid&&(a.pauseAd(),v.paused=!0)};r.resumeContent=function(){var a=v.getPlayer();a&&"Content"==a.asid&&(n.slot.querySelector("#imgpreloader").style.display=
"none",n.autoplay=!0,v.bigPlay.style.display="none","content"==n.preloader.type&&(f.diVideoPreloader.style.display="block"),v.controls(!n.hidecontrols&&(!n.hidemobilecontrols&&Utils.isMobile()||f.mobileControlsOn||!Utils.isMobile())),a.resumeAd(),v.paused=!1)};r.setContentVolume=function(a){var b=v.getPlayer();b&&"Content"==b.asid&&(b.volume=a,1E-6>a?(v.muted=!0,b.muted=!0):(v.muted=!1,b.muted=!1))};r.stopAd=function(){Utils.vcmgr.reset(n.advideoslot);f.stopAd=!0;0<=f.playing&&(f.waterfall.data.tags[f.playing].Ad.player.pauseAd(),
f.waterfall.data.tags[f.playing].Ad.player.stopAd());setTimeout(function(){v.closeClick()},1E3)};r.skipAd=function(){0<=f.playing&&f.waterfall.data.tags[f.playing].Ad.player.skipAd()};var ja=!0,ka=!1,Y=9999,Z=0,v,aa;m&&m.environmentVars&&m.environmentVars.debug&&(d=!0);l(1);(function(b){function c(a){"string"===typeof a&&(a=a.trim());a=Utils.getUrlParameters(a);for(var b in a)a.hasOwnProperty(b)&&("AV_PUBLISHERID"==b?d.publisherid=a[b]:"AV_CHANNELID"==b?d.channelid=a[b]:("true"==a[b]&&(a[b]=!0),"false"==
a[b]&&(a[b]=!1),d[b]=a[b],b&&"AV_"==b.substring(0,3)&&(d.ref1=d.ref1+b+"="+encodeURIComponent(a[b])+"&")))}var d={hd:!1,vastretry:0,errorlimit:5,maximp:9999,maxrun:9999,maxcrun:9999,tgt:"0",vpaidpriority:"js",format:"all",cdnurl:Utils.httpsReplace("http://data1.aniview.com/"),adserverdomain:"go1.aniview.com",autoplay:!0,autoplayloop:!0,muted:!0,share:!1,soundbutton:!0,pausebutton:!0,closebutton:!1,closeevent:!1,fullscreen:!1,phone:"",logo:!0,ref1:"",showbigplay:!0,timelinemode:"overlay",hidecontrols:!0,
hidemobilecontrols:!1,mobilecontrolsdelay:5,basejsurl:"https://player.aniview.com/script/6.1/",preroll:0,midroll:!0,midrolltime:0,midrolldelay:0,flashsslproxy:!1,flashscale:!1,pc:!0,maxp:5,autosound:!1,startaddelay:3,startmidroll:0,startdelay:0,mutetime:4,clickfunc:!1,tm:"",tmf:{},replayfunc:null,nativevideo:!1,customcss:"",prerolltimeout:0,logoclick:!1,autosdk4:!1,nonlinearruntime:15,topasopt:!1,showpreloader:!0,startadvitimeout:3,preloader:{type:null,link:null,clickthrough:null,poster:"",fullframe:!1,
random:!0}};"5649e717181f462d1d8b4567"==b.publisherId&&(d.errorlimit=15);f=t.AV_player={active:!0,currentAd:0,playing:-1,readyToPlay:[],vastCache:10,tagCacheMaxCount:10,advertisements:[],standbyTime:1E3,waterfall:void 0,player:[],players:[],mode:-1,vastretry:0,tagRequestCount:0,preroll:0,midrolltime:0,midrollTimer:0,postroll:!1,css:"/cnn_new/css/gui.css",slotWindow:null,adLoaded:!1,impressionSet:!1,useFlashProxy:!1,contentPixel:!0,contentPaused:!0,startTimer:0,callStartTimeout:0,callStartTimer:0,
err500:0,impCount:0,runCount:0,crunCount:0,adStoppedTimeout:3E3,topAsid:[],maximps:{},thePlayer:r,wfPause:!1,vastConfig:{vpaidPriority:"js",swf:!0,js:!0,html5:!0},config:b};n=f.config;for(var e in f.config)if(f.config.hasOwnProperty(e)){var g=e.toLowerCase();"environmentvars"!=g&&(d[g]=f.config[e])}for(e in n.environmentVars)n.environmentVars.hasOwnProperty(e)&&(g=e.toLowerCase(),d[g]=n.environmentVars[e],"true"==d[g]&&(d[g]=!0),"false"==d[g]&&(d[g]=!1));c();b.creativeData&&b.creativeData.AdParameters&&
c(b.creativeData.AdParameters);f.vastConfig.vpaidPriority=d.vpaidpriority;1==d.preroll?d.preroll=1:0==d.preroll&&(d.preroll=0);1==d.postroll?d.postroll=1:0==d.postroll&&(d.postroll=0);0==d.preroll&&0==d.midrolltime&&(d.midrolltime=.1);"57263f7b0757bb0c6f8b45ee"!=d.publisherid&&"58ff0b58073ef41af820a6ec"!=d.publisherid||d.block||(d.block={script:{list:"commercialadsdistributor.com adsocialweb.com sitewebvideo.com impavideo.com advertisingstory.com elitelmediaadvertising.com".split(" ")},vast:{list:"commercialadsdistributor.com adsocialweb.com sitewebvideo.com impavideo.com advertisingstory.com elitelmediaadvertising.com".split(" ")}});
"56b89b31181f466b388b4575"==d.publisherid&&(f.tagCacheMaxCount=1);"59dcc77d28a06144362fbe43"==d.channelid&&0<Math.floor(10*Math.random())&&(d.autosdk4=!0);"undefined"===typeof d.position&&(d.position=d.slot.id);a=d.maxp=Math.max(1,Math.min(8,d.maxp));Utils.logLevel=d.loglevel;"object"==typeof d.slot&&"object"==typeof d.slot.ownerDocument?f.slotWindow=d.slot.ownerDocument.defaultView||d.slot.ownerDocument.parentWindow:"object"==typeof d.videoSlot&&"object"==typeof d.videoSlot.ownerDocument?f.slotWindow=
d.videoSlot.ownerDocument.defaultView||d.videoSlot.ownerDocument.parentWindow:"http:"==location.protocol||"https:"==location.protocol?f.slotWindow=t:(f.slotWindow=Utils.getTopWindow(),f.slotWindow||(f.slotWindow=t));d.format&&("json"==d.format&&(d.format="all"),"all"!==d.format&&(-1==d.format.indexOf("js")&&(t.AV_player.vastConfig.js=!1),-1==d.format.indexOf("swf")&&(t.AV_player.vastConfig.swf=!1),-1==d.format.indexOf("html5")&&(t.AV_player.vastConfig.html5=!1)));if(d.lastframe||d.loopvideo)d.mode=
-1,d.loop=!1,d.skip=!1;5<d.vastretry&&(d.vastretry=5);1==d.mode&&(d.errorlimit=99);d.loop&&-1==d.mode&&(d.mode=0);d.preloader&&d.preloader.type&&(b=d.preloader.type.toLowerCase(),d.preloader.type="content"==b?"content":"js"==b?"js":"image"==b?"Image":null);if("content"==d.preloader.type&&"object"===typeof d.preloader.link&&"string"===typeof d.preloader.link[0])for(f.vidPreloaders={current:0,random:!0,preloaders:[],addPreloader:function(a){this.preloaders.push(a)},getPreloader:function(){if(0==this.preloaders.length)return{url:"",
clickthrough:""};var a=this.random?Math.floor(Math.random()*this.preloaders.length):this.current;this.current++;this.current>=this.preloaders.length&&(this.current=0);return this.preloaders[a]}},f.vidPreloaders.random=d.preloader.random,b=0;b<d.preloader.link.length;b++)f.vidPreloaders.addPreloader({url:d.preloader.link[b],clickthrough:d.preloader.clickthrough.length>b?d.preloader.clickthrough[b]:""});""==d.preloader.link&&(d.preloader.type=null);"content"==d.preloader.type&&(d.preloader.poster=d.preloader.poster||
"");"undefined"!==typeof d.waterfall&&(d.tgt=2);"1"==d.tgt&&(d.autoplay=!1);d.tmf.vpaid=""==d.tm||-1<d.tm.indexOf("v");d.tmf.reqbid=""==d.tm||-1<d.tm.indexOf("r");d.tmf.adcontent=""==d.tm||-1<d.tm.indexOf("c");d.tmf.timing=""==d.tm||-1<d.tm.indexOf("t");"1"==d.tgt&&-1<["5a79675728a0617aac25a4a7","5a7ffe0428a0611eb6013b21"].indexOf(d.publisherid)&&(d.tmf.vpaid=!1);if(d.wl&&!d.customlogo){b="";var h;d.customlogo={};d.customlogo.link=d.basejsurl+"wl/"+d.wl+"/logo.png";d["wl.ltxt"]&&(b=d["wl.ltxt"]);
"vi"==d.wl&&(h="https://www.vi.ai");d["wl.llnk"]&&(h=d["wl.llnk"]);d.customlogo.clickthrough=h;d.customlogo.text=b}d.adserverdomain&&"go1.aniview.com"!=d.adserverdomain&&d.wl&&(b=d.adserverdomain.indexOf("."),-1<b&&(h=d.adserverdomain.substring(0,b),b=d.adserverdomain.substring(b,100),d.trackdomain=d.trackdomain||h+"t"+b,d.keydomain=d.keydomain||h+"k"+b,d.adddomain=d.adddomain||h+"a"+b,d.cdnurl1=d.cdnurl1||Utils.getProtocol()+"//"+h+"d"+b+"/"));d.adddomain=d.adddomain||"add1.aniview.com";d.keydomain=
d.keydomain||"cdn1.aniview.com";d.trackdomain=d.trackdomain||"track1.aniview.com";d.setvastretry=d.vastretry;f.baseJsUrl=d.basejsurl;f.callStartTimeout=d.startdelay;Utils.isMobile()||(d.hidemobilecontrols=!1);n=f.config=d;n.remotedebugid&&Utils.startRemoteDebug(n.remotedebugid);n.advideoslot&&(n.contentslot=n.advideoslot.parentNode,Utils.vcmgr.init(n.advideoslot),n.maxp=1,Utils.writeLog(Utils.logLevels.defaultLevel,"Video element passed from content player. autosound:"+n.autosound));n.contentplayer&&
(n.slot&&(n.slot.av_maximps||(n.slot.av_maximps=f.maximps),f.maximps=n.slot.av_maximps),n.showpreloader=!1);x()})(m);l(2);(function(a,b){(a=AV_player.slotWindow.document.getElementsByTagName("head")[0])||(a=AV_player.slotWindow.document.getElementsByTagName("body")[0]);a||(a=AV_player.config.slot);if(!f.cssTag){t.AV_player.cssTag=!0;var c=document.createElement("style"),d=t.aniviewCSS+" "+n.customcss;c.type="text/css";c.id="av_css_id";c.styleSheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d));
var e=AV_player.slotWindow.document.getElementById("av_css_id");e&&e.innerHTML==d||a.appendChild(c);setTimeout(function(){b()},10)}})(f.baseJsUrl+"css/gui.css",function(){if(!ka){l(5);ka=!0;var a=t.aniviewGetGui(),b=document.createElement("div");f.playerSlot=b;"1"==n.tgt&&(b.style.top="0px",b.style.width="100%",b.style.height="100%",b.style.position="absolute");m.environmentVars.slot.appendChild(b);b.innerHTML=a;b.id=m.environmentVars.slot.id+"gui";a=b.querySelector("#av-container");f.divPreloader=
b.querySelector("#imgpreloader");"content"==n.preloader.type&&(f.diVideoPreloader=b.querySelector("#AVcontent"),f.diVideoPreloader.style.width="100%",f.diVideoPreloader.style.height="100%",f.diVideoPreloader.style.display="none",f.diVideoPreloader.style.position="absolute");n.preloader&&("Image"==n.preloader.type&&""!=n.preloader.link||"content"==n.preloader.type&&"undefined"!==typeof n.preloader.poster)&&(b="Image"==n.preloader.type?n.preloader.link:n.preloader.poster,f.divPreloader.style.width=
"100%",f.divPreloader.style.height="100%",f.divPreloader.style.background="url('"+b+"') center center no-repeat",n.preloader.poster&&(f.divPreloader.style.backgroundSize="contain"),"content"==t.AV_player.config.preloader.type&&0==t.AV_player.config.autoplay&&"string"===typeof t.AV_player.config.preloader.poster&&10<t.AV_player.config.preloader.poster.length&&(t.AV_player.divPreloader.style.zIndex="1"),f.divPreloader.style.position="absolute",""!=n.preloader.clickthrough&&"Image"==n.preloader.type&&
(f.divPreloader.style.zIndex="99999",f.divPreloader.style.cursor="pointer",f.divPreloader.onclick=function(){if("function"==typeof r.onBannerClick)r.onBannerClick();t.open(n.preloader.clickthrough,"blank");q("ContentClick")}),"content"==n.preloader.type&&(f.diVideoPreloader.onclick=function(){if(n.autoplay){if("function"==typeof r.onBannerClick)r.onBannerClick();n.hidemobilecontrols&&!f.mobileControlsOn?(f.mobileControlsOn=!0,v.controls(!0),f.mobileControlsTimer=setTimeout(function(){f.mobileControlsOn=
!1;f.mobileControlsTimer=0;v.controls(!1)},1E3*n.mobilecontrolsdelay)):""!=n.preloader.clickthrough&&(t.open(n.preloader.clickthrough,"blank"),q("ContentClick"))}else v.bigPlay.onclick()}));if("js"==n.preloader.type){f.divPreloader.style.width="100%";f.divPreloader.style.height="100%";f.divPreloader.style.zIndex="99999";f.divPreloader.style.position="absolute";b=document.createElement("iframe");b.id="ani_passback";f.divPreloader.style.position="absolute";b.style.height=n.height+"px";b.style.width=
n.width+"px";b.style.border="none";b.style.overflow="hidden";b.setAttribute("scrolling","no");b.setAttribute("frameborder","0");b.style="margin=0";b.style="Padding=0";f.divPreloader.innerHTML="";f.divPreloader.appendChild(b);var c=document.createElement("script");c.type="text/javascript";c.src=n.preloader.link;b.appendChild(c)}a={container:a,videoSlotName:m.position,autoplay:n.autoplay,muted:n.muted,share:n.share,sound:n.soundbutton,playPause:n.pausebutton,fullscreen:n.fullscreen,phone:n.phone,logo:n.logo,
lastframe:n.lastframe,showBigPlay:n.showbigplay,close:n.closebutton,skip:n.skip,skipTimer:n.skiptimer,skipText:n.skiptext,responsive:null==m.width&&null==m.height,width:n.width,height:n.height,hideControls:n.hidecontrols,timelineMode:n.timelinemode,timelineChange:n.timelinechange,showpreloader:n.showpreloader};Utils.writeLog(Utils.logLevels.defaultLevel,"pl.config:",f.config);Utils.writeLog(Utils.logLevels.defaultLevel,"config:",a);v=new AnivewPlayerGUI(a);v.controls(!1);"content"==n.preloader.type&&
0>=f.preroll&&ea();"js"==n.preloader.type&&(v.gui.style.display="none");0==t.AV_player.config.autoplay&&t.AV_player.config.preloader&&"content"==t.AV_player.config.preloader.type&&(n.showbigplay&&(v.bigPlay.style.display="inline"),v.bigPlay.style.position="absolute",v.bigPlay.style.zIndex="99999",v.bigPlay.onclick=function(){t.AV_player.config.autoplay=!0;v.bigPlay.style.display="none";v.playClick();I()});if(n.customlogo&&(a=n.slot.querySelector("#aniview-credit"))){if(n.customlogo.text||""==n.customlogo.text)a.innerHTML=
n.customlogo.text+"<span>";n.customlogo.height&&(a.getElementsByTagName("SPAN")[0].style.height=n.customlogo.height+"px");n.customlogo.width&&(a.getElementsByTagName("SPAN")[0].style.width=n.customlogo.width+"px");a.getElementsByTagName("SPAN")[0].style.margin="4 4 4 2";n.customlogo.link&&(a.getElementsByTagName("SPAN")[0].style.backgroundImage="url('"+n.customlogo.link+"')");a.onclick=function(){n.customlogo.clickthrough&&t.open(n.customlogo.clickthrough)}}W=sa();S(W)}});l(3)})(t.AV_VASTPlayer)}})(window);
