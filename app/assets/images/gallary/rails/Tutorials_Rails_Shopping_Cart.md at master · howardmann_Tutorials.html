<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com/">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com/">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-KDZfnHRZjn4xEe2VuPe5iA8c+O1aNoowrYTe3DQQR97UQDzf5HZ15My/ytImCLmX5X6kBM8kwtuUVj5H+DOZbA==" rel="stylesheet" href="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/frameworks-7d09971c51977b60c6626362003ef38a.css">
  <link crossorigin="anonymous" media="all" integrity="sha512-8VnmS7+S4UIxsIz2BC4F/c3YYbRNB/GEcCQ6AssRT3F3s6sObMSaw8K9ijW0SyurkWRxN/dPT/DV/+4GjWcFrA==" rel="stylesheet" href="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/github-324331281b788158086ad9201d9c0804.css">
  
  
  
  

  <meta name="viewport" content="width=device-width">
  
  <title>Tutorials/Rails_Shopping_Cart.md at master · howardmann/Tutorials</title>
    <meta name="description" content="GitHub is where people build software. More than 27 million people use GitHub to discover, fork, and contribute to over 80 million projects.">
  <link rel="search" type="application/opensearchdescription+xml" href="https://github.com/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/17248926?s=400&amp;v=4"><meta property="og:site_name" content="GitHub"><meta property="og:type" content="object"><meta property="og:title" content="howardmann/Tutorials"><meta property="og:url" content="https://github.com/howardmann/Tutorials"><meta property="og:description" content="Tutorials - Random personal tutorials">

  <link rel="assets" href="https://assets-cdn.github.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6MjU5NjE1NzYyOjM0ZWNiZjhhNWU3YzFmNGQzZjA5NjkzNDY1ZmIwNzY2YzRmYWM5MDEwOTE2ODViNmFmMDE4ZWExZjNjYTE2NDk=--d97596e2bdaad712cfa05085893134a8699d6a0f">
  <meta name="pjax-timeout" content="1000">
  <link rel="sudo-modal" href="https://github.com/sessions/sudo_modal">
  <meta name="request-id" content="ACA4:0A21:1F14A44:38B0B46:5AC1F958" data-pjax-transient="">


  

  <meta name="selected-link" value="repo_source" data-pjax-transient="">

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta name="octolytics-host" content="collector.githubapp.com"><meta name="octolytics-app-id" content="github"><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event"><meta name="octolytics-dimension-request_id" content="ACA4:0A21:1F14A44:38B0B46:5AC1F958"><meta name="octolytics-dimension-region_edge" content="iad"><meta name="octolytics-dimension-region_render" content="iad"><meta name="octolytics-actor-id" content="22934261"><meta name="octolytics-actor-login" content="samiemphamba"><meta name="octolytics-actor-hash" content="f159c57f826be184b4936127c9bb2fb3b56258ca4887eae7ee4eb198c13bd57d">
<meta name="hydro-events-url" content="https://github.com/hydro_browser_events">
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true">




  <meta class="js-ga-set" name="dimension1" content="Logged In">


  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="samiemphamba">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="MWU5YWI2YzY3NGNjYWE3YzgwNTljZTA5YWI0NWZkZTM3MzU2NTFlNTE2NzUzMTc2N2RlODI1NGVhMWYyNWIzMnx7InJlbW90ZV9hZGRyZXNzIjoiMTA1LjIzNC4xNjQuOSIsInJlcXVlc3RfaWQiOiJBQ0E0OjBBMjE6MUYxNEE0NDozOEIwQjQ2OjVBQzFGOTU4IiwidGltZXN0YW1wIjoxNTIyNjYxNzIxLCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_INSIGHTS,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES">

  <meta name="html-safe-nonce" content="42ba5226c6b57be7ff1d6a29bce00269c850963a">

  <meta http-equiv="x-pjax-version" content="2a8622940bb010d0ebdd41ecb8362bdb">
  

      <link href="https://github.com/howardmann/Tutorials/commits/master.atom" rel="alternate" title="Recent Commits to Tutorials:master" type="application/atom+xml">

  <meta name="description" content="Tutorials - Random personal tutorials">
  <meta name="go-import" content="github.com/howardmann/Tutorials git https://github.com/howardmann/Tutorials.git">

  <meta name="octolytics-dimension-user_id" content="17248926"><meta name="octolytics-dimension-user_login" content="howardmann"><meta name="octolytics-dimension-repository_id" content="68508058"><meta name="octolytics-dimension-repository_nwo" content="howardmann/Tutorials"><meta name="octolytics-dimension-repository_public" content="true"><meta name="octolytics-dimension-repository_is_fork" content="false"><meta name="octolytics-dimension-repository_network_root_id" content="68508058"><meta name="octolytics-dimension-repository_network_root_nwo" content="howardmann/Tutorials"><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false">


    <link rel="canonical" href="https://github.com/howardmann/Tutorials/blob/master/Rails_Shopping_Cart.md" data-pjax-transient="">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



<link rel="manifest" href="https://github.com/manifest.json" crossorigin="use-credentials">

  </head>

  <body class="logged-in env-production page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="bg-black text-white p-3 show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        
<header class="Header  f5" role="banner">
  <div class="d-flex flex-justify-between px-3 container-lg">
    <div class="d-flex flex-justify-between ">
      <div class="">
        <a class="header-logo-invertocat" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo">
  <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>

      </div>

    </div>

    <div class="HeaderMenu d-flex flex-justify-between flex-auto">
      <div class="d-flex">
            <div class="">
              <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --><form class="js-site-search-form" data-scoped-search-url="/howardmann/Tutorials/search" data-unscoped-search-url="/search" action="/howardmann/Tutorials/search" accept-charset="UTF-8" method="get"><input name="utf8" value="✓" type="hidden">
    <label class="form-control header-search-wrapper  js-chromeless-input-container">
        <a class="header-search-scope no-underline" href="https://github.com/howardmann/Tutorials/blob/master/Rails_Shopping_Cart.md">This repository</a>
      <input class="form-control header-search-input  js-site-search-focus js-site-search-field is-clearable" data-hotkey="s,/" name="q" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" autocapitalize="off" type="text">
        <input class="js-site-search-type-field" name="type" type="hidden">
    </label>
</form></div>

            </div>

          <ul class="d-flex pl-2 flex-items-center text-bold list-style-none" role="navigation">
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="https://github.com/pulls">
                Pull requests
</a>            </li>
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="https://github.com/issues">
                Issues
</a>            </li>
                <li>
                  <a class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-selected-links=" /marketplace" href="https://github.com/marketplace">
                    Marketplace
</a>                </li>
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="https://github.com/explore">
                Explore
</a>            </li>
          </ul>
      </div>

      <div class="d-flex">
        
<ul class="user-nav d-flex flex-items-center list-style-none" id="user-links">
  <li class="dropdown js-menu-container">
    <span class="d-inline-block  px-2">
      

    </span>
  </li>

  <li class="dropdown js-menu-container">
    <details class="dropdown-details details-reset js-dropdown-details d-flex px-2 flex-items-center">
      <summary class="HeaderNavlink" aria-label="Create new…" data-ga-click="Header, create new, icon:add">
        <svg class="octicon octicon-plus float-left mr-1 mt-1" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5z"></path></svg>
        <span class="dropdown-caret mt-1"></span>
      </summary>

      <ul class="dropdown-menu dropdown-menu-sw">
        
<a class="dropdown-item" href="https://github.com/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a class="dropdown-item" href="https://github.com/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a class="dropdown-item" href="https://github.com/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>



  <div class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="howardmann/Tutorials">This repository</span>
  </div>
    <a class="dropdown-item" href="https://github.com/howardmann/Tutorials/issues/new" data-ga-click="Header, create new issue">
      New issue
    </a>

      </ul>
    </details>
  </li>

  <li class="dropdown js-menu-container">

    <details class="dropdown-details details-reset js-dropdown-details d-flex pl-2 flex-items-center">
      <summary class="HeaderNavlink name mt-1" aria-label="View profile and more" data-ga-click="Header, show menu, icon:avatar">
        <img alt="@samiemphamba" class="avatar float-left mr-1" src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/22934261.png" width="20" height="20">
        <span class="dropdown-caret"></span>
      </summary>

      <ul class="dropdown-menu dropdown-menu-sw">
        <li class="dropdown-header header-nav-current-user css-truncate">
          Signed in as <strong class="css-truncate-target">samiemphamba</strong>
        </li>

        <li class="dropdown-divider"></li>

        <li><a class="dropdown-item" href="https://github.com/samiemphamba" data-ga-click="Header, go to profile, text:your profile">
          Your profile
        </a></li>
        <li><a class="dropdown-item" href="https://github.com/samiemphamba?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">
          Your stars
        </a></li>
          <li><a class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, your gists, text:your gists">Your gists</a></li>

        <li class="dropdown-divider"></li>

        <li><a class="dropdown-item" href="https://help.github.com/" data-ga-click="Header, go to help, text:help">
          Help
        </a></li>

        <li><a class="dropdown-item" href="https://github.com/settings/profile" data-ga-click="Header, go to settings, icon:settings">
          Settings
        </a></li>

        <li><!-- '"` --><!-- </textarea></xmp> --><form class="logout-form" action="/logout" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="2oH5+4QS4sz3mRTemvJgSB/blt3YvOPacA4s9Fca4oYHbCG2hvpTK2TmX6WcxrSMRSzels0xZ0q/5f6YbZrjtQ==" type="hidden">
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
        </form></li>
      </ul>
    </details>
  </li>
</ul>



        <!-- '"` --><!-- </textarea></xmp> --><form class="sr-only right-0" action="/logout" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="5VlfJ48hdeq7yvGQu/u54ReB5DIS4U5IOEz93no2+QU4tIdqjcnEDSi1uuu9z20lTXaseQdsytj3py+yQLb4Ng==" type="hidden">
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
</form>      </div>
    </div>
  </div>
</header>

      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container="">
      







  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
        <!-- '"` --><!-- </textarea></xmp> --><form data-autosubmit="true" data-remote="true" class="js-social-container" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="eWJCDbUGpE6McNsPQ4Tvx9lYvvlmjmrNxARd6NsaBzaHR1QsWnDPLdTQKGo2YtDa453Y1qOwb3hTCrk+FEGhmg==" type="hidden">      <input name="repository_id" id="repository_id" value="68508058" class="form-control" type="hidden">

        <div class="select-menu js-menu-container js-select-menu">
          <a href="https://github.com/howardmann/Tutorials/subscription" class="btn btn-sm btn-with-count select-menu-button js-menu-target" role="button" aria-haspopup="true" aria-expanded="false" aria-label="Toggle repository notifications menu" data-ga-click="Repository, click Watch settings, action:blob#show">
            <span class="js-select-button">
                <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                Watch
            </span>
          </a>
          <a class="social-count js-social-count" href="https://github.com/howardmann/Tutorials/watchers" aria-label="1 user is watching this repository">
            1
          </a>

        <div class="select-menu-modal-holder">
          <div class="select-menu-modal subscription-menu-modal js-menu-content">
            <div class="select-menu-header js-navigation-enable" tabindex="-1">
              <svg class="octicon octicon-x js-menu-close" role="img" aria-label="Close" viewBox="0 0 12 16" version="1.1" width="12" height="16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
              <span class="select-menu-title">Notifications</span>
            </div>

              <div class="select-menu-list js-navigation-container" role="menu">

                <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
                  <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
                  <div class="select-menu-item-text">
                    <input name="do" id="do_included" value="included" checked="checked" type="radio">
                    <span class="select-menu-item-heading">Not watching</span>
                    <span class="description">Be notified when participating or @mentioned.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                      Watch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
                  <div class="select-menu-item-text">
                    <input name="do" id="do_subscribed" value="subscribed" type="radio">
                    <span class="select-menu-item-heading">Watching</span>
                    <span class="description">Be notified of all conversations.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                        Unwatch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
                  <div class="select-menu-item-text">
                    <input name="do" id="do_ignore" value="ignore" type="radio">
                    <span class="select-menu-item-heading">Ignoring</span>
                    <span class="description">Never be notified.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg class="octicon octicon-mute" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"></path></svg>
                        Stop ignoring
                    </span>
                  </div>
                </div>

              </div>

            </div>
          </div>
        </div>
</form>
  </li>

  <li>
    
  <div class="js-toggler-container js-social-container starring-container ">
    <!-- '"` --><!-- </textarea></xmp> --><form class="starred js-social-form" action="/howardmann/Tutorials/unstar" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="fFvmqcx47czrZ6G4AZix1xKKVOhlx0y7+D05cxPHwwIr5c9eMYpK+szgGBpGcCnZWIq/Gj7W5Gnvgx74WNjFGQ==" type="hidden">
      <input name="context" value="repository" type="hidden">
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Unstar howardmann/Tutorials" data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">
        <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"></path></svg>
        Unstar
      </button>
        <a class="social-count js-social-count" href="https://github.com/howardmann/Tutorials/stargazers" aria-label="2 users starred this repository">
          2
        </a>
</form>
    <!-- '"` --><!-- </textarea></xmp> --><form class="unstarred js-social-form" action="/howardmann/Tutorials/star" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="x/1RZGe3S6evcgVjAqS05PZiLeITn9eLFvwwaSoaks9+0VFJU2teFNxr9leApDVv7b4jI06nEMzVTjbjIURcOg==" type="hidden">
      <input name="context" value="repository" type="hidden">
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Star this repository" title="Star howardmann/Tutorials" data-ga-click="Repository, click star button, action:blob#show; text:Star">
        <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"></path></svg>
        Star
      </button>
        <a class="social-count js-social-count" href="https://github.com/howardmann/Tutorials/stargazers" aria-label="2 users starred this repository">
          2
        </a>
</form>  </div>

  </li>

  <li>
          <a href="#fork-destination-box" class="btn btn-sm btn-with-count" title="Fork your own copy of howardmann/Tutorials to your account" aria-label="Fork your own copy of howardmann/Tutorials to your account" rel="facebox" data-ga-click="Repository, show fork modal, action:blob#show; text:Fork">
              <svg class="octicon octicon-repo-forked" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
            Fork
          </a>

          <div id="fork-destination-box" style="display: none;">
            <h2 class="facebox-header" data-facebox-id="facebox-header">Where should we fork this repository?</h2>
            <include-fragment src="" class="js-fork-select-fragment fork-select-fragment" data-url="/howardmann/Tutorials/fork?fragment=1">
              <img alt="Loading" src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/octocat-spinner-128.gif" width="64" height="64">
            </include-fragment>
          </div>

    <a href="https://github.com/howardmann/Tutorials/network" class="social-count" aria-label="4 users forked this repository">
      4
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" href="https://github.com/howardmann">howardmann</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="https://github.com/howardmann/Tutorials">Tutorials</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container">

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /howardmann/Tutorials" href="https://github.com/howardmann/Tutorials">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /howardmann/Tutorials/issues" href="https://github.com/howardmann/Tutorials/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">1</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /howardmann/Tutorials/pulls" href="https://github.com/howardmann/Tutorials/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /howardmann/Tutorials/projects" href="https://github.com/howardmann/Tutorials/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      Projects
      <span class="Counter">0</span>
</a>
    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /howardmann/Tutorials/wiki" href="https://github.com/howardmann/Tutorials/wiki">
      <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg>
      Wiki
</a>

  <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /howardmann/Tutorials/pulse" href="https://github.com/howardmann/Tutorials/pulse">
    <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"></path></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <a class="d-none js-permalink-shortcut" data-hotkey="y" href="https://github.com/howardmann/Tutorials/blob/00565f261e6063c333b2e7f327158716ca310059/Rails_Shopping_Cart.md">Permalink</a>

  <!-- blob contrib key: blob_contributors:v21:34fcd62e3193e861907bd252f5d2321e -->

  <div class="file-navigation">
    
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Branch:</i>
      <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg class="octicon octicon-x js-menu-close" role="img" aria-label="Close" viewBox="0 0 12 16" version="1.1" width="12" height="16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags" type="text">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="https://github.com/howardmann/Tutorials/blob/master/Rails_Shopping_Cart.md" data-name="master" data-skip-pjax="true" rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

    <div class="BtnGroup float-right">
      <a href="https://github.com/howardmann/Tutorials/find/master" class="js-pjax-capture-input btn btn-sm BtnGroup-item" data-pjax="" data-hotkey="t">
        Find file
      </a>
      <clipboard-copy for="blob-path" aria-label="Copy file path to clipboard" class="btn btn-sm BtnGroup-item tooltipped tooltipped-s" copied-label="Copied!" tabindex="0" role="button">
        Copy path
      </clipboard-copy>
    </div>
    <div id="blob-path" class="breadcrumb">
      <span class="repo-root js-repo-root"><span class="js-path-segment"><a data-pjax="true" href="https://github.com/howardmann/Tutorials"><span>Tutorials</span></a></span></span><span class="separator">/</span><strong class="final-path">Rails_Shopping_Cart.md</strong>
    </div>
  </div>


  

  <div class="commit-tease">
      <span class="float-right">
        <a class="commit-tease-sha" href="https://github.com/howardmann/Tutorials/commit/8c7187fd50cb3fb16cc720d7cbba6a974f22b5f7" data-pjax="">
          8c7187f
        </a>
        <relative-time datetime="2016-09-18T08:37:43Z" title="Sep 18, 2016, 10:37 AM GMT+2">on Sep 18, 2016</relative-time>
      </span>
      <div>
        <img class="avatar" src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/17248926_002.jpeg" alt="@howardmann" data-hovercard-user-id="17248926" width="20" height="20">
        <a class="user-mention" rel="author" href="https://github.com/howardmann">howardmann</a>
          <a data-pjax="true" title="Added guide on rails shopping carts" class="message" href="https://github.com/howardmann/Tutorials/commit/8c7187fd50cb3fb16cc720d7cbba6a974f22b5f7">Added guide on rails shopping carts</a>
      </div>

    <div class="commit-tease-contributors">
      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box">
        <strong>1</strong>
         contributor
      </button>
      
    </div>

    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list" data-facebox-id="facebox-description">
          <li class="facebox-user-list-item">
            <img src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/17248926.jpeg" alt="@howardmann" data-hovercard-user-id="17248926" width="24" height="24">
            <a data-hovercard-user-id="17248926" href="https://github.com/howardmann" aria-describedby="hovercard-aria-description">howardmann</a>
          </li>
      </ul>
    </div>
  </div>


  <div class="file">
    <div class="file-header">
  <div class="file-actions">

    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="https://github.com/howardmann/Tutorials/raw/master/Rails_Shopping_Cart.md">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="https://github.com/howardmann/Tutorials/blame/master/Rails_Shopping_Cart.md">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="https://github.com/howardmann/Tutorials/commits/master/Rails_Shopping_Cart.md">History</a>
    </div>


          <!-- '"` --><!-- </textarea></xmp> --><form class="inline-form js-update-url-with-hash" action="/howardmann/Tutorials/edit/master/Rails_Shopping_Cart.md" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="p0MZpSRTwU+9ukuJ/77VNImQw35h+riRuVGvqqf8Noa152n9JJQsimfyhYOH2mcBFgTu8diSckdPcjYbMx7JRA==" type="hidden">
            <button class="btn-octicon tooltipped tooltipped-nw" type="submit" aria-label="Fork this project and edit the file" data-hotkey="e" data-disable-with="">
              <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path></svg>
            </button>
</form>
        <!-- '"` --><!-- </textarea></xmp> --><form class="inline-form" action="/howardmann/Tutorials/delete/master/Rails_Shopping_Cart.md" accept-charset="UTF-8" method="post"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="emJ5u3T31ThWEXl+VPpwVMzD4SdZ4DZvQDDkFtYrQ0lsTqXalYNv5EsHFrWDMckm4U9sbfNr7A3WHn0JN6NkDA==" type="hidden">
          <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit" aria-label="Fork this project and delete the file" data-disable-with="">
            <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"></path></svg>
          </button>
</form>  </div>

  <div class="file-info">
      546 lines (450 sloc)
      <span class="file-info-divider"></span>
    16.8 KB
  </div>
</div>

    
  <div id="readme" class="readme blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-rails-shopping-cart" class="anchor" aria-hidden="true" href="#rails-shopping-cart"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rails Shopping Cart</h1>
<h2><a id="user-content-overview-and-features" class="anchor" aria-hidden="true" href="#overview-and-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview and Features</h2>
<p>Howie's workflow notes for building a simple Rails grocery shopping cart. Summary features outlined below:</p>
<ul>
<li>
<p><strong>User is able to:</strong></p>
<ul>
<li>View all products</li>
<li>Add/ remove products to/ from cart</li>
<li>Add/ reduce quantity of products in cart</li>
<li>Checkout cart by submitting order</li>
<li>Enter order details</li>
</ul>
</li>
<li>
<p><strong>Admin is able to:</strong></p>
<ul>
<li>Create, edit and delete products</li>
<li>View and delete/ fulfil all user orders</li>
</ul>
</li>
</ul>
<h2><a id="user-content-models" class="anchor" aria-hidden="true" href="#models"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Models</h2>
<p>Build a minimum of four models (excluding User authentication for now):</p>
<ol>
<li><strong>Product</strong>:</li>
</ol>
<ul>
<li>Stores individual products and their details
<ul>
<li>has_many :line_items, dependent: :destroy</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>LineItem</strong>:</li>
</ol>
<ul>
<li>Join Table which bridges Product and Cart. Needed to add multiple quantities of each product to Cart (see below)
<ul>
<li>belongs_to :product</li>
<li>belongs_to :cart</li>
<li>belongs_to :order (for checkout see below)</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>Cart</strong>:</li>
</ol>
<ul>
<li>Create a new instance each time a new session occurs to keep track 
of added products throughout the app. Used to store Product LineItems 
before proceeding to new Order checkout
<ul>
<li>has_many :line_items, dependent: :destroy</li>
<li>has_many :products, through: :line_items</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>Order</strong>:</li>
</ol>
<ul>
<li>New model created from Cart page after user is happy to checkout. 
Model captures user payment and shipping details and then LineItems are 
transferred from Cart to Order
<ul>
<li>has_many :line_items, dependent: :destroy</li>
</ul>
</li>
</ul>
<p><strong>Rails generate Model commands</strong><br>
Note: remember to set default values in atom Rails migration tables prior to rake db:migrate. Syntax: <code>, default: value</code></p>
<div class="highlight highlight-source-ruby"><pre>rails g model <span class="pl-c1">Product</span> <span class="pl-c1">name:</span>string <span class="pl-c1">price:</span>decimal
rails g model <span class="pl-c1">Cart</span>  
rails g model <span class="pl-c1">LineItem</span> <span class="pl-c1">quantity:</span>integer <span class="pl-c1">product_id:</span>integer <span class="pl-c1">cart_id:</span>integer <span class="pl-c1">order_id:</span>integer
rails g model <span class="pl-c1">Order</span> <span class="pl-c1">name:</span>string <span class="pl-c1">email:</span>string <span class="pl-c1">address:</span>text</pre></div>
<p><strong>Database schema reference</strong><br>
Schema below for reference. Remember to add associations to model as outlined above</p>
<div class="highlight highlight-source-ruby"><pre>create_table <span class="pl-s"><span class="pl-pds">"</span>products<span class="pl-pds">"</span></span>, <span class="pl-c1">force:</span> <span class="pl-c1">:cascade</span> <span class="pl-k">do</span> |<span class="pl-smi">t</span>|
  t.string   <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>
  t.decimal  <span class="pl-s"><span class="pl-pds">"</span>price<span class="pl-pds">"</span></span>,      <span class="pl-c1">default:</span> <span class="pl-c1">0.0</span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
<span class="pl-k">end</span>

create_table <span class="pl-s"><span class="pl-pds">"</span>carts<span class="pl-pds">"</span></span>, <span class="pl-c1">force:</span> <span class="pl-c1">:cascade</span> <span class="pl-k">do</span> |<span class="pl-smi">t</span>|
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
<span class="pl-k">end</span>

create_table <span class="pl-s"><span class="pl-pds">"</span>line_items<span class="pl-pds">"</span></span>, <span class="pl-c1">force:</span> <span class="pl-c1">:cascade</span> <span class="pl-k">do</span> |<span class="pl-smi">t</span>|
  t.integer  <span class="pl-s"><span class="pl-pds">"</span>quantity<span class="pl-pds">"</span></span>,   <span class="pl-c1">default:</span> <span class="pl-c1">1</span>
  t.integer  <span class="pl-s"><span class="pl-pds">"</span>product_id<span class="pl-pds">"</span></span>
  t.integer  <span class="pl-s"><span class="pl-pds">"</span>cart_id<span class="pl-pds">"</span></span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
  t.integer  <span class="pl-s"><span class="pl-pds">"</span>order_id<span class="pl-pds">"</span></span>
<span class="pl-k">end</span>

create_table <span class="pl-s"><span class="pl-pds">"</span>orders<span class="pl-pds">"</span></span>, <span class="pl-c1">force:</span> <span class="pl-c1">:cascade</span> <span class="pl-k">do</span> |<span class="pl-smi">t</span>|
  t.string   <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>
  t.string   <span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span>
  t.text     <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>
  t.string   <span class="pl-s"><span class="pl-pds">"</span>pay_method<span class="pl-pds">"</span></span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>created_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
  t.datetime <span class="pl-s"><span class="pl-pds">"</span>updated_at<span class="pl-pds">"</span></span>, <span class="pl-c1">null:</span> <span class="pl-c1">false</span>
<span class="pl-k">end</span></pre></div>
<p><strong>Seed database with initial models</strong><br>
Seed database file with Product data and write simple tests. Also destroy latest session Cart when re-seeding.</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"><span class="pl-c">#</span> PRODUCT</span>
<span class="pl-c1">Product</span>.destroy_all
product1 <span class="pl-k">=</span> <span class="pl-c1">Product</span>.create({<span class="pl-c1">:name</span>=&gt;<span class="pl-s"><span class="pl-pds">"</span>tomato<span class="pl-pds">"</span></span>, <span class="pl-c1">:price</span> =&gt; <span class="pl-c1">1</span>})
product2 <span class="pl-k">=</span> <span class="pl-c1">Product</span>.create({<span class="pl-c1">:name</span>=&gt;<span class="pl-s"><span class="pl-pds">"</span>milk<span class="pl-pds">"</span></span>, <span class="pl-c1">:price</span> =&gt; <span class="pl-c1">3</span>})
product3 <span class="pl-k">=</span> <span class="pl-c1">Product</span>.create({<span class="pl-c1">:name</span>=&gt;<span class="pl-s"><span class="pl-pds">"</span>bread<span class="pl-pds">"</span></span>, <span class="pl-c1">:price</span> =&gt; <span class="pl-c1">5.50</span>})
product4 <span class="pl-k">=</span> <span class="pl-c1">Product</span>.create({<span class="pl-c1">:name</span>=&gt;<span class="pl-s"><span class="pl-pds">"</span>bacon<span class="pl-pds">"</span></span>, <span class="pl-c1">:price</span> =&gt; <span class="pl-c1">10</span>})
product5 <span class="pl-k">=</span> <span class="pl-c1">Product</span>.create({<span class="pl-c1">:name</span>=&gt;<span class="pl-s"><span class="pl-pds">"</span>cheese<span class="pl-pds">"</span></span>, <span class="pl-c1">:price</span> =&gt; <span class="pl-c1">3.20</span>})

<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Total number of products: <span class="pl-pse">#{</span><span class="pl-s1"><span class="pl-c1">Product</span>.all.count</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Product names: <span class="pl-pse">#{</span><span class="pl-s1"><span class="pl-c1">Product</span>.all.pluck(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>)</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Product1: <span class="pl-pse">#{</span><span class="pl-s1">product1.name</span><span class="pl-pse">}</span> price: <span class="pl-pse">#{</span><span class="pl-s1">product1.price.round(<span class="pl-c1">2</span>)</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Product2: <span class="pl-pse">#{</span><span class="pl-s1">product2.name</span><span class="pl-pse">}</span> price: <span class="pl-pse">#{</span><span class="pl-s1">product2.price.round(<span class="pl-c1">2</span>)</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Product3: <span class="pl-pse">#{</span><span class="pl-s1">product3.name</span><span class="pl-pse">}</span> price: <span class="pl-pse">#{</span><span class="pl-s1">product3.price.round(<span class="pl-c1">2</span>)</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Product4: <span class="pl-pse">#{</span><span class="pl-s1">product4.name</span><span class="pl-pse">}</span> price: <span class="pl-pse">#{</span><span class="pl-s1">product4.price.round(<span class="pl-c1">2</span>)</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span>Product5: <span class="pl-pse">#{</span><span class="pl-s1">product5.name</span><span class="pl-pse">}</span> price: <span class="pl-pse">#{</span><span class="pl-s1">product5.price.round(<span class="pl-c1">2</span>)</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">#</span> CART</span>
<span class="pl-c1">Cart</span>.destroy_all
<span class="pl-c1">puts</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>Total cart count: <span class="pl-pse">#{</span><span class="pl-s1"><span class="pl-c1">Cart</span>.all.count</span><span class="pl-pse">}</span><span class="pl-pds">"</span></span></pre></div>
<h2><a id="user-content-controller-setup" class="anchor" aria-hidden="true" href="#controller-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Controller setup</h2>
<p>Setup controllers for each model and associated actions and views. 
Run terminal commands (see next section) before adding methods</p>
<ol>
<li><strong>Product</strong></li>
</ol>
<ul>
<li>Actions (full CRUD): index, new, create, edit, update, destroy</li>
<li>Views: index, new, edit</li>
</ul>
<ol start="2">
<li><strong>LineItem</strong></li>
</ol>
<ul>
<li>Actions: create, add_quantity, reduce_quantity, destroy</li>
</ul>
<ol start="3">
<li><strong>Cart</strong>:</li>
</ol>
<ul>
<li>Actions: show, destroy</li>
<li>Views: show</li>
</ul>
<ol start="4">
<li><strong>Order</strong>:</li>
</ol>
<ul>
<li>Actions: index show new create</li>
<li>Views: index, new, show</li>
</ul>
<p><strong>Rails generate Controller commands</strong><br>
Avoid using scaffold as we wont need most of the methods. Remember controllers are plural.</p>
<div class="highlight highlight-source-ruby"><pre>rails g controller <span class="pl-c1">Products</span> index <span class="pl-k">new</span> edit
rails g controller <span class="pl-c1">LineItems</span>
rails g controller <span class="pl-c1">Carts</span> show
rails g controller <span class="pl-c1">Orders</span> index show <span class="pl-k">new</span></pre></div>
<h2><a id="user-content-routes-setup" class="anchor" aria-hidden="true" href="#routes-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Routes setup</h2>
<p>Match routes with controller actions outlined above. The tricky 
routes here are the line_items routes which we define custom routes for 
as lineitems will be modified within Product and Cart views.</p>
<div class="highlight highlight-source-ruby"><pre>root <span class="pl-s"><span class="pl-pds">'</span>products#index<span class="pl-pds">'</span></span>

get <span class="pl-s"><span class="pl-pds">'</span>carts/:id<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>carts#show<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>cart<span class="pl-pds">"</span></span>
delete <span class="pl-s"><span class="pl-pds">'</span>carts/:id<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>carts#destroy<span class="pl-pds">"</span></span>

post <span class="pl-s"><span class="pl-pds">'</span>line_items/:id/add<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#add_quantity<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>line_item_add<span class="pl-pds">"</span></span>
post <span class="pl-s"><span class="pl-pds">'</span>line_items/:id/reduce<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#reduce_quantity<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>line_item_reduce<span class="pl-pds">"</span></span>
post <span class="pl-s"><span class="pl-pds">'</span>line_items<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#create<span class="pl-pds">"</span></span>
get <span class="pl-s"><span class="pl-pds">'</span>line_items/:id<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#show<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>line_item<span class="pl-pds">"</span></span>
delete <span class="pl-s"><span class="pl-pds">'</span>line_items/:id<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#destroy<span class="pl-pds">"</span></span>

resources <span class="pl-c1">:products</span>
resources <span class="pl-c1">:orders</span></pre></div>
<p>We include post url routes directing to the line_item actions of 
creating, adding and reducing products to the cart. To access these urls
 from the view pages we need to modify the link_to helpers to specify a 
post HTTP request as the default method is get. We will see this code 
later on</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-c"><span class="pl-c">#</span> Link from the Product index page (erb tags)</span>
button_to <span class="pl-s"><span class="pl-pds">"</span>Add to cart<span class="pl-pds">"</span></span>, line_items_path(<span class="pl-c1">:product_id</span> =&gt; product.id)

<span class="pl-c"><span class="pl-c">#</span> Link from the Cart show (erb tags)</span>
link_to <span class="pl-s"><span class="pl-pds">"</span>Add (+1)<span class="pl-pds">"</span></span>, line_item_add_path(<span class="pl-c1">:id</span> =&gt; line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:post</span>
link_to <span class="pl-s"><span class="pl-pds">"</span>Reduce (-1)<span class="pl-pds">"</span></span>, line_item_reduce_path(<span class="pl-c1">:id</span> =&gt; line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:post</span>
link_to <span class="pl-s"><span class="pl-pds">"</span>Remove item<span class="pl-pds">"</span></span>, line_item_path(line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:delete</span></pre></div>
<h2><a id="user-content-product" class="anchor" aria-hidden="true" href="#product"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Product</h2>
<h3><a id="user-content-products-controller" class="anchor" aria-hidden="true" href="#products-controller"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Products Controller</h3>
<p>Build out full CRUD controller actions</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">ProductsController<span class="pl-e"> &lt; ApplicationController</span></span>
  <span class="pl-k">def</span> <span class="pl-en">index</span>
    <span class="pl-smi">@products</span> <span class="pl-k">=</span> <span class="pl-c1">Product</span>.all
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">new</span>
    <span class="pl-smi">@product</span> <span class="pl-k">=</span> <span class="pl-c1">Product</span>.<span class="pl-k">new</span>
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">create</span>
    <span class="pl-smi">@product</span> <span class="pl-k">=</span> <span class="pl-c1">Product</span>.create(product_params)
    redirect_to products_path
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">edit</span>
    <span class="pl-smi">@product</span> <span class="pl-k">=</span> <span class="pl-c1">Product</span>.find(params[<span class="pl-c1">:id</span>])
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">update</span>
    <span class="pl-smi">@product</span> <span class="pl-k">=</span> <span class="pl-c1">Product</span>.find(params[<span class="pl-c1">:id</span>])
    <span class="pl-smi">@product</span>.update(product_params)
    redirect_to products_path
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">destroy</span>
    <span class="pl-smi">@product</span> <span class="pl-k">=</span> <span class="pl-c1">Product</span>.find(params[<span class="pl-c1">:id</span>])
    <span class="pl-smi">@product</span>.destroy
    redirect_to products_path
  <span class="pl-k">end</span>

  <span class="pl-k">private</span>
    <span class="pl-k">def</span> <span class="pl-en">product_params</span>
      params.require(<span class="pl-c1">:product</span>).permit(<span class="pl-c1">:name</span>, <span class="pl-c1">:price</span>)
    <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<h3><a id="user-content-product-views" class="anchor" aria-hidden="true" href="#product-views"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Product Views</h3>
<p>** Product Index show page**</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">&lt;</span>h2<span class="pl-k">&gt;</span><span class="pl-c1">All</span> <span class="pl-c1">Products</span><span class="pl-k">&lt;</span><span class="pl-k">/</span>h2<span class="pl-k">&gt;</span>

<span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-smi">@products</span>.each <span class="pl-k">do</span> |<span class="pl-smi">product</span>| <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;p<span class="pl-pds">&gt;</span></span><span class="pl-c1">Name:</span> <span class="pl-k">&lt;</span><span class="pl-k">%=</span> product.name <span class="pl-s"><span class="pl-pds">%&gt;</span>; unit price of &lt;%= number_to_currency(product.price) %<span class="pl-pds">&gt;</span></span><span class="pl-k">&lt;</span><span class="pl-k">/</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> link_to <span class="pl-s"><span class="pl-pds">"</span>Edit<span class="pl-pds">"</span></span>, edit_product_path(product) <span class="pl-s"><span class="pl-pds">%&gt;</span> |</span>
<span class="pl-s">    &lt;%= link_to "Delete", product_path(product), method: :delete, data: {confirm: "Are you sure?"} %<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> button_to <span class="pl-s"><span class="pl-pds">"</span>Add <span class="pl-pse">#{</span><span class="pl-s1">product.name</span><span class="pl-pse">}</span> to cart<span class="pl-pds">"</span></span>, line_items_path(<span class="pl-c1">:product_id</span> =&gt; product.id) <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
<span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-k">end</span><span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s"></span>
<span class="pl-s">&lt;%= link_to "New product", new_product_path</span></pre></div>
<p>** Product New and Edit form partial **</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">&lt;</span><span class="pl-k">%=</span> form_for(<span class="pl-smi">@product</span>) <span class="pl-k">do</span> |<span class="pl-smi">f</span>| <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;p<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.label <span class="pl-c1">:name</span> <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;br<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.text_field <span class="pl-c1">:name</span>, <span class="pl-c1">required:</span> <span class="pl-c1">true</span>, <span class="pl-c1">autofocus:</span> <span class="pl-c1">true</span>, <span class="pl-c1">placeholder:</span> <span class="pl-s"><span class="pl-pds">"</span>Enter product name<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.label <span class="pl-c1">:price</span> <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;br<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.number_field <span class="pl-c1">:price</span>, <span class="pl-c1">required:</span> <span class="pl-c1">true</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.submit <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
<span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-k">end</span></pre></div>
<h2><a id="user-content-cart" class="anchor" aria-hidden="true" href="#cart"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cart</h2>
<h3><a id="user-content-carts-controller" class="anchor" aria-hidden="true" href="#carts-controller"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Carts Controller</h3>
<p>We want the Cart to be accessible throughout the entire app so we 
store it in the application_controller. We want to create a new Cart 
model each time a user visits the site and store that cart_id in a 
session[:cart_id]. This will let us track the same cart and its contents
 throughout the application. Save the code in the file 
app/controllers/application_controller.rb and have it run before all 
actions.<br>
The code logic below is two fold:</p>
<ol>
<li>If a session[:cart_id] already exists then find the Cart with that 
id, if there is no cart with that id then set the session id to nil.</li>
<li>If there is no session[:cart_id] associated with this user then create a new cart and store it in the users session id</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">ApplicationController<span class="pl-e"> &lt; ActionController::Base</span></span>
  <span class="pl-c"><span class="pl-c">#</span> Prevent CSRF attacks by raising an exception.</span>
  <span class="pl-c"><span class="pl-c">#</span> For APIs, you may want to use :null_session instead.</span>
  protect_from_forgery <span class="pl-c1">with:</span> <span class="pl-c1">:exception</span>

  before_action <span class="pl-c1">:current_cart</span>

  <span class="pl-k">private</span>
    <span class="pl-k">def</span> <span class="pl-en">current_cart</span>
      <span class="pl-k">if</span> session[<span class="pl-c1">:cart_id</span>]
        cart <span class="pl-k">=</span> <span class="pl-c1">Cart</span>.find_by(<span class="pl-c1">:id</span> =&gt; session[<span class="pl-c1">:cart_id</span>])
        <span class="pl-k">if</span> cart.present?
          <span class="pl-smi">@current_cart</span> <span class="pl-k">=</span> cart
        <span class="pl-k">else</span>
          session[<span class="pl-c1">:cart_id</span>] <span class="pl-k">=</span> <span class="pl-c1">nil</span>
        <span class="pl-k">end</span>
      <span class="pl-k">end</span>

      <span class="pl-k">if</span> session[<span class="pl-c1">:cart_id</span>] <span class="pl-k">==</span> <span class="pl-c1">nil</span>
        <span class="pl-smi">@current_cart</span> <span class="pl-k">=</span> <span class="pl-c1">Cart</span>.create
        session[<span class="pl-c1">:cart_id</span>] <span class="pl-k">=</span> <span class="pl-smi">@current_cart</span>.id
      <span class="pl-k">end</span>
    <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<p>After a cart is created we want to be able to show and empty the cart:</p>
<ol>
<li>Show: Within the carts_controller.rb file define the show action to 
reference the current_cart as determined by the session above</li>
<li>Destroy: To empty the cart we call the destroy action to destroy the
 current cart, reset the cart_id to nil and redirect back to the root 
page</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">CartsController<span class="pl-e"> &lt; ApplicationController</span></span>
  <span class="pl-k">def</span> <span class="pl-en">show</span>
    <span class="pl-smi">@cart</span> <span class="pl-k">=</span> <span class="pl-smi">@current_cart</span>
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">destroy</span>
    <span class="pl-smi">@cart</span> <span class="pl-k">=</span> <span class="pl-smi">@current_cart</span>
    <span class="pl-smi">@cart</span>.destroy
    session[<span class="pl-c1">:cart_id</span>] <span class="pl-k">=</span> <span class="pl-c1">nil</span>
    redirect_to root_path
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<h3><a id="user-content-cart-view" class="anchor" aria-hidden="true" href="#cart-view"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cart View</h3>
<p><strong>Cart show page</strong>: Cart show view page to display all 
line_items and relevant, product, quantity and price details. (See 
sections below for explanation of LineItem and Order links).</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">&lt;</span>h2<span class="pl-k">&gt;</span><span class="pl-c1">Cart</span> show<span class="pl-k">&lt;</span><span class="pl-k">/</span>h2<span class="pl-k">&gt;</span>
<span class="pl-k">&lt;</span>ul<span class="pl-k">&gt;</span>
  <span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-smi">@cart</span>.line_items.each <span class="pl-k">do</span> |<span class="pl-smi">line_item</span>| <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">    &lt;li<span class="pl-pds">&gt;</span></span><span class="pl-c1">Item:</span> <span class="pl-k">&lt;</span><span class="pl-k">%=</span> line_item.product.name <span class="pl-s"><span class="pl-pds">%&gt;</span>/ Price: &lt;%= number_to_currency(line_item.product.price) %<span class="pl-pds">&gt;</span></span><span class="pl-k">/</span> <span class="pl-c1">Quantity:</span> <span class="pl-k">&lt;</span><span class="pl-k">%=</span> line_item.quantity <span class="pl-s"><span class="pl-pds">%&gt;</span>/ Total Price: &lt;%= number_to_currency(line_item.total_price) %<span class="pl-pds">&gt;</span></span>
    <span class="pl-c"><span class="pl-c">#</span> See lineItem section below for explanation of line_item links</span>
    <span class="pl-k">&lt;</span>ul<span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span>li<span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span><span class="pl-k">%=</span> link_to <span class="pl-s"><span class="pl-pds">"</span>Add one<span class="pl-pds">"</span></span>, line_item_add_path(<span class="pl-c1">:id</span> =&gt; line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:post</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">        &lt;%= link_to "Reduce one", line_item_reduce_path(:id =<span class="pl-pds">&gt;</span></span> line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:post</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">      &lt;/li<span class="pl-pds">&gt;</span></span>
      <span class="pl-k">&lt;</span>li<span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span><span class="pl-k">%=</span> link_to <span class="pl-s"><span class="pl-pds">"</span>Remove item<span class="pl-pds">"</span></span>, line_item_path(line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:delete</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">      &lt;/li<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">/</span>ul<span class="pl-k">&gt;</span>
    <span class="pl-c"><span class="pl-c">#</span></span>
  <span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-k">end</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">&lt;/ul<span class="pl-pds">&gt;</span></span>
<span class="pl-k">&lt;</span>h3<span class="pl-k">&gt;</span><span class="pl-c1">Sub</span> <span class="pl-c1">total:</span> <span class="pl-k">&lt;</span><span class="pl-k">%=</span> number_to_currency(<span class="pl-smi">@cart</span>.sub_total) <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;/h3<span class="pl-pds">&gt;</span></span>
<span class="pl-c"><span class="pl-c">#</span> See Order section below for explanation of new_order_path</span>
<span class="pl-k">&lt;</span><span class="pl-k">%=</span> link_to <span class="pl-s"><span class="pl-pds">"</span>Proceed to checkout<span class="pl-pds">"</span></span>, new_order_path <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;br<span class="pl-pds">&gt;</span></span>
<span class="pl-c"><span class="pl-c">#</span></span>
<span class="pl-k">&lt;</span><span class="pl-k">%=</span> link_to <span class="pl-s"><span class="pl-pds">"</span>Empty cart<span class="pl-pds">"</span></span>, cart_path(<span class="pl-smi">@current_cart</span>),<span class="pl-c1">method:</span> <span class="pl-c1">:delete</span>, <span class="pl-c1">data:</span> {<span class="pl-c1">confirm:</span> <span class="pl-s"><span class="pl-pds">"</span>Are you sure?<span class="pl-pds">"</span></span>}</pre></div>
<p><strong>Model Helpers</strong>: Add Model helper methods to calculate LineItem total_price and Cart Sub_total:</p>
<ol>
<li>LineItem: write total_price helper to find value of lineItem</li>
<li>Cart: write sub_total helper to calculate sum total of the total_price for each line_item</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">LineItem<span class="pl-e"> &lt; ActiveRecord::Base</span></span>
  belongs_to <span class="pl-c1">:product</span>
  belongs_to <span class="pl-c1">:cart</span>
  belongs_to <span class="pl-c1">:order</span>

  <span class="pl-c"><span class="pl-c">#</span> LOGIC</span>
  <span class="pl-k">def</span> <span class="pl-en">total_price</span>
    <span class="pl-c1">self</span>.quantity <span class="pl-k">*</span> <span class="pl-c1">self</span>.product.price
  <span class="pl-k">end</span>
<span class="pl-k">end</span>

<span class="pl-k">class</span> <span class="pl-en">Cart<span class="pl-e"> &lt; ActiveRecord::Base</span></span>
  has_many <span class="pl-c1">:line_items</span>, <span class="pl-c1">dependent:</span> <span class="pl-c1">:destroy</span>
  has_many <span class="pl-c1">:products</span>, <span class="pl-c1">through:</span> <span class="pl-c1">:line_items</span>

  <span class="pl-c"><span class="pl-c">#</span> LOGIC</span>
  <span class="pl-k">def</span> <span class="pl-en">sub_total</span>
    sum <span class="pl-k">=</span> <span class="pl-c1">0</span>
    <span class="pl-c1">self</span>.line_items.each <span class="pl-k">do</span> |<span class="pl-smi">line_item</span>|
      sum<span class="pl-k">+=</span> line_item.total_price
    <span class="pl-k">end</span>
    <span class="pl-k">return</span> sum
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<h2><a id="user-content-lineitem" class="anchor" aria-hidden="true" href="#lineitem"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LineItem</h2>
<p>LineItems includes the most logic as it joins all models together: 
Product, Cart and Order. We will want to perform four key actions with 
the LineItem model:</p>
<ol>
<li><strong>Create LineItem</strong>:</li>
<li><strong>Controller logic</strong>: If it is a new product then 
create a new line_item and append the product and cart to it. If the 
cart already has this product then find the line_item with this product 
and increment its quantity by 1</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">create</span>
  <span class="pl-c"><span class="pl-c">#</span> Find associated product and current cart</span>
  chosen_product <span class="pl-k">=</span> <span class="pl-c1">Product</span>.find(params[<span class="pl-c1">:product_id</span>])
  current_cart <span class="pl-k">=</span> <span class="pl-smi">@current_cart</span>

  <span class="pl-c"><span class="pl-c">#</span> If cart already has this product then find the relevant line_item and iterate quantity otherwise create a new line_item for this product</span>
  <span class="pl-k">if</span> current_cart.products.include?(chosen_product)
    <span class="pl-c"><span class="pl-c">#</span> Find the line_item with the chosen_product</span>
    <span class="pl-smi">@line_item</span> <span class="pl-k">=</span> current_cart.line_items.find_by(<span class="pl-c1">:product_id</span> =&gt; chosen_product)
    <span class="pl-c"><span class="pl-c">#</span> Iterate the line_item's quantity by one</span>
    <span class="pl-smi">@line_item</span>.quantity <span class="pl-k">+=</span> <span class="pl-c1">1</span>
  <span class="pl-k">else</span>
    <span class="pl-smi">@line_item</span> <span class="pl-k">=</span> <span class="pl-c1">LineItem</span>.<span class="pl-k">new</span>
    <span class="pl-smi">@line_item</span>.cart <span class="pl-k">=</span> current_cart
    <span class="pl-smi">@line_item</span>.product <span class="pl-k">=</span> chosen_product
  <span class="pl-k">end</span>

  <span class="pl-c"><span class="pl-c">#</span> Save and redirect to cart show path</span>
  <span class="pl-smi">@line_item</span>.save
  redirect_to cart_path(current_cart)
<span class="pl-k">end</span>

<span class="pl-k">private</span>
  <span class="pl-k">def</span> <span class="pl-en">line_item_params</span>
    params.require(<span class="pl-c1">:line_item</span>).permit(<span class="pl-c1">:quantity</span>,<span class="pl-c1">:product_id</span>, <span class="pl-c1">:cart_id</span>)
  <span class="pl-k">end</span></pre></div>
<ol start="2">
<li><strong>View link</strong>: Add button link to products index page (erb tags). Include reference to the relevant product when linking to LineItem url</li>
</ol>
<div class="highlight highlight-source-ruby"><pre>button_to <span class="pl-s"><span class="pl-pds">"</span>Add <span class="pl-pse">#{</span><span class="pl-s1">product.name</span><span class="pl-pse">}</span> to cart<span class="pl-pds">"</span></span>, line_items_path(<span class="pl-c1">:product_id</span> =&gt; product.id)</pre></div>
<ol start="3">
<li><strong>Routes url</strong>: Add as a post url request in routes linking to the create action in LineItems controller</li>
</ol>
<div class="highlight highlight-source-ruby"><pre>post <span class="pl-s"><span class="pl-pds">'</span>line_items<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#create<span class="pl-pds">"</span></span></pre></div>
<ol start="2">
<li><strong>Destroy LineItem</strong>:</li>
<li><strong>Controller logic</strong>: Find the current LineItem, destroy and redirect back to cart</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">destroy</span>
  <span class="pl-smi">@line_item</span> <span class="pl-k">=</span> <span class="pl-c1">LineItem</span>.find(params[<span class="pl-c1">:id</span>])
  <span class="pl-smi">@line_item</span>.destroy
  redirect_to cart_path(<span class="pl-smi">@current_cart</span>)
<span class="pl-k">end</span>  </pre></div>
<ol start="2">
<li><strong>View link</strong>: Add link to carts/show page</li>
</ol>
<div class="highlight highlight-source-ruby"><pre>link_to <span class="pl-s"><span class="pl-pds">"</span>Remove item<span class="pl-pds">"</span></span>, line_item_path(line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:delete</span></pre></div>
<ol start="3">
<li><strong>Routes url</strong>:  Add delete method url and also get request for individual line_item which delete method will access to delete</li>
</ol>
<div class="highlight highlight-source-ruby"><pre>get <span class="pl-s"><span class="pl-pds">'</span>line_items/:id<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#show<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>line_item<span class="pl-pds">"</span></span>
delete <span class="pl-s"><span class="pl-pds">'</span>line_items/:id<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#destroy<span class="pl-pds">"</span></span></pre></div>
<ol start="3">
<li><strong>add_quantity</strong> and <strong>remove_quantity</strong>:</li>
<li><strong>Controller logic</strong>: Find line_item then increment or 
decrement, save and redirect back to cart show page. Additional logic in
 reduce_quantity to ensure cannot reduce below 1.</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">add_quantity</span>
  <span class="pl-smi">@line_item</span> <span class="pl-k">=</span> <span class="pl-c1">LineItem</span>.find(params[<span class="pl-c1">:id</span>])
  <span class="pl-smi">@line_item</span>.quantity <span class="pl-k">+=</span> <span class="pl-c1">1</span>
  <span class="pl-smi">@line_item</span>.save
  redirect_to cart_path(<span class="pl-smi">@current_cart</span>)
<span class="pl-k">end</span>

<span class="pl-k">def</span> <span class="pl-en">reduce_quantity</span>
  <span class="pl-smi">@line_item</span> <span class="pl-k">=</span> <span class="pl-c1">LineItem</span>.find(params[<span class="pl-c1">:id</span>])
  <span class="pl-k">if</span> <span class="pl-smi">@line_item</span>.quantity <span class="pl-k">&gt;</span> <span class="pl-c1">1</span>
    <span class="pl-smi">@line_item</span>.quantity <span class="pl-k">-=</span> <span class="pl-c1">1</span>
  <span class="pl-k">end</span>
  <span class="pl-smi">@line_item</span>.save
  redirect_to cart_path(<span class="pl-smi">@current_cart</span>)
<span class="pl-k">end</span></pre></div>
<ol start="2">
<li><strong>View link</strong>: Reference url links in step 3 below and 
call on method: :post (You could also write as a get method but may 
cause performance issue, and as we are posting an increment/ decrement 
value it is better to use POST)</li>
</ol>
<div class="highlight highlight-source-ruby"><pre>link_to <span class="pl-s"><span class="pl-pds">"</span>Add one<span class="pl-pds">"</span></span>, line_item_add_path(<span class="pl-c1">:id</span> =&gt; line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:post</span>
link_to <span class="pl-s"><span class="pl-pds">"</span>Reduce one<span class="pl-pds">"</span></span>, line_item_reduce_path(<span class="pl-c1">:id</span> =&gt; line_item), <span class="pl-c1">method:</span> <span class="pl-c1">:post</span></pre></div>
<ol start="3">
<li><strong>Routes url</strong>: Create custom urls similar to RESTful 
routes and including add and reduce to end of urls in order to 
differentiate HTTP POST requests</li>
</ol>
<div class="highlight highlight-source-ruby"><pre>post <span class="pl-s"><span class="pl-pds">'</span>line_items/:id/add<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#add_quantity<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>line_item_add<span class="pl-pds">"</span></span>
post <span class="pl-s"><span class="pl-pds">'</span>line_items/:id/reduce<span class="pl-pds">'</span></span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>line_items#reduce_quantity<span class="pl-pds">"</span></span>, <span class="pl-c1">as:</span> <span class="pl-s"><span class="pl-pds">"</span>line_item_reduce<span class="pl-pds">"</span></span></pre></div>
<h2><a id="user-content-order" class="anchor" aria-hidden="true" href="#order"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Order</h2>
<h3><a id="user-content-orders-controller" class="anchor" aria-hidden="true" href="#orders-controller"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Orders Controller</h3>
<p>Create Orders controller with typical index, show and new actions.</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">OrdersController<span class="pl-e"> &lt; ApplicationController</span></span>
  <span class="pl-k">def</span> <span class="pl-en">index</span>
    <span class="pl-smi">@orders</span> <span class="pl-k">=</span> <span class="pl-c1">Order</span>.all
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">show</span>
    <span class="pl-smi">@order</span> <span class="pl-k">=</span> <span class="pl-c1">Order</span>.find(params[<span class="pl-c1">:id</span>])
  <span class="pl-k">end</span>

  <span class="pl-k">def</span> <span class="pl-en">new</span>
    <span class="pl-smi">@order</span> <span class="pl-k">=</span> <span class="pl-c1">Order</span>.<span class="pl-k">new</span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>
<p><strong>Create</strong>: Create method takes four logical steps:</p>
<ol>
<li>Instantiate a new Order variable passing in the form params (see below for the new form page view which collects the params).</li>
<li>Then before saving, iterate through the current_cart's line_items 
and append them to the new order variable. Then remember to assign the 
cart_id of the line_item to nil - NOTE: THIS IS IMPORTANT AS IT STOPS 
THE LINE_ITEMS BEING DELETED AFTER WE DESTROY THE CART LATER.</li>
<li>Save the order after appending all line_items from the cart</li>
<li>Destroy the cart and set the session[:cart_id] = nil as the order 
and cart has been fulfilled and the user can start shopping for a new 
order. Redirect back to root_path</li>
</ol>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">create</span>
  <span class="pl-smi">@order</span> <span class="pl-k">=</span> <span class="pl-c1">Order</span>.<span class="pl-k">new</span>(order_params)
  <span class="pl-smi">@current_cart</span>.line_items.each <span class="pl-k">do</span> |<span class="pl-smi">item</span>|
    <span class="pl-smi">@order</span>.line_items <span class="pl-k">&lt;&lt;</span> item
    item.cart_id <span class="pl-k">=</span> <span class="pl-c1">nil</span>
  <span class="pl-k">end</span>
  <span class="pl-smi">@order</span>.save
  <span class="pl-c1">Cart</span>.destroy(session[<span class="pl-c1">:cart_id</span>])
  session[<span class="pl-c1">:cart_id</span>] <span class="pl-k">=</span> <span class="pl-c1">nil</span>
  redirect_to root_path
<span class="pl-k">end</span>

<span class="pl-k">private</span>
  <span class="pl-k">def</span> <span class="pl-en">order_params</span>
    params.require(<span class="pl-c1">:order</span>).permit(<span class="pl-c1">:name</span>, <span class="pl-c1">:email</span>, <span class="pl-c1">:address</span>, <span class="pl-c1">:pay_method</span>)
  <span class="pl-k">end</span></pre></div>
<h3><a id="user-content-orders-view" class="anchor" aria-hidden="true" href="#orders-view"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Orders View</h3>
<p>New Order page which asks user for payment details</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">&lt;</span><span class="pl-k">%=</span> form_for(<span class="pl-smi">@order</span>) <span class="pl-k">do</span> |<span class="pl-smi">f</span>| <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;p<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.label <span class="pl-c1">:name</span> <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;br<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.text_field <span class="pl-c1">:name</span>, <span class="pl-c1">required:</span> <span class="pl-c1">true</span>, <span class="pl-c1">autofocus:</span> <span class="pl-c1">true</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.label <span class="pl-c1">:email</span> <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;br<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.email_field <span class="pl-c1">:email</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.label <span class="pl-c1">:address</span> <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;br<span class="pl-pds">&gt;</span></span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.text_area <span class="pl-c1">:address</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%=</span> f.submit <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/p<span class="pl-pds">&gt;</span></span>
<span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-k">end</span></pre></div>
<p>Index page listing out all orders</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">&lt;</span>h2<span class="pl-k">&gt;</span><span class="pl-c1">All</span> <span class="pl-c1">Orders</span><span class="pl-k">&lt;</span><span class="pl-k">/</span>h2<span class="pl-k">&gt;</span>

<span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-smi">@orders</span>.each <span class="pl-k">do</span> |<span class="pl-smi">order</span>| <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;p<span class="pl-pds">&gt;</span></span><span class="pl-c1">Name:</span> <span class="pl-k">&lt;</span><span class="pl-k">%=</span> order.name <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span><span class="pl-c1">Email:</span> <span class="pl-k">&lt;</span><span class="pl-k">%=</span> order.email <span class="pl-s"><span class="pl-pds">%&gt;</span>&lt;/p<span class="pl-pds">&gt;</span></span>
  <span class="pl-k">&lt;</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span><span class="pl-c1">Line</span> <span class="pl-c1">Items:</span> <span class="pl-k">&lt;</span><span class="pl-k">/</span><span class="pl-c1">p</span><span class="pl-k">&gt;</span>
  <span class="pl-k">&lt;</span>ul<span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%</span> order.line_items.each <span class="pl-k">do</span> |<span class="pl-smi">item</span>| <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">    &lt;li<span class="pl-pds">&gt;</span></span><span class="pl-k">&lt;</span><span class="pl-k">%=</span> item.quantity <span class="pl-s"><span class="pl-pds">%&gt;</span> x &lt;%= item.product.name %<span class="pl-pds">&gt;</span></span><span class="pl-k">&lt;</span><span class="pl-k">/</span>li<span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-k">end</span> <span class="pl-s"><span class="pl-pds">%&gt;</span></span>
<span class="pl-s">  &lt;/ul<span class="pl-pds">&gt;</span></span>
<span class="pl-k">&lt;</span><span class="pl-k">%</span> <span class="pl-k">end</span></pre></div>
<h1><a id="user-content-end" class="anchor" aria-hidden="true" href="#end"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>END</h1>
</article>
  </div>

  </div>

  <button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="d-none">Jump to Line</button>
  <div id="jump-to-line" style="display:none">
    <!-- '"` --><!-- </textarea></xmp> --><form class="js-jump-to-line-form" action="" accept-charset="UTF-8" method="get"><input name="utf8" value="✓" type="hidden">
      <input class="form-control linejump-input js-jump-to-line-field" placeholder="Jump to line…" aria-label="Jump to line" autofocus="" type="text">
      <button type="submit" class="btn">Go</button>
</form>  </div>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">© 2018 <span title="0.36396s from unicorn-1123942680-3rsqk">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com/">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon" href="https://github.com/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com/" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com/" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com/" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to blog, text:blog" href="https://github.com/blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"></path></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
    </button>
    You can't perform that action at this time.
  </div>


    <script crossorigin="anonymous" integrity="sha512-gEAdDZ4LgyEE51A6EiCI5F8hC2pELVwJzk9fcRYT6JKNg92wpQhso4uD1rML8kTVE8FFW4G1hKIm+eWgX+D5/g==" type="application/javascript" src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/compat-432e5bb0f7cc942dbf63a7c74de5da3c.js"></script>
    <script crossorigin="anonymous" integrity="sha512-bDFUXMGHFddte8PoN8CW5xNr/0w/9Zrfsjun90gr7lJdc7w5+NLGNrJHTPFeaZa5ph1MzSTQg7fqTg/CI95fSw==" type="application/javascript" src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/frameworks-c566e2adb34ea4706cec5d285e57dd1d.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-QKerAmbi8RFAfjUvkdjUZNeOk7x3IoYJhiCCTJbn/v17op8fggb0zxJw0denloKM0lPiHUKs2iE4+nUMj+Q7Yw==" type="application/javascript" src="Tutorials_Rails_Shopping_Cart.md%20at%20master%20%C2%B7%20howardmann_Tutorials_files/github-12f0557a92f0fb40861429376cb054d5.js"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"></path></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>
    </button>
  </div>
</div>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>


  


</body></html>